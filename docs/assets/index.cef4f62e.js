import{r as e,S as y,l as a,o as p,c as k,a as m,F as t,b as i,u as N,w as c,v as h,i as s,n,t as l,d as M}from"./vendor.1cab0a75.js";!function(e=".",y="__import__"){try{self[y]=new Function("u","return import(u)")}catch(a){const p=new URL(e,location),k=e=>{URL.revokeObjectURL(e.src),e.remove()};self[y]=e=>new Promise(((a,m)=>{const t=new URL(e,p);if(self[y].moduleMap[t])return a(self[y].moduleMap[t]);const i=new Blob([`import * as m from '${t}';`,`${y}.moduleMap['${t}']=m;`],{type:"text/javascript"}),N=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(i),onerror(){m(new Error(`Failed to import: ${e}`)),k(N)},onload(){a(self[y].moduleMap[t]),k(N)}});document.head.appendChild(N)})),self[y].moduleMap={}}}("/Vue3-Piano/assets/");const T={id:"App"},o={class:"container"},d=m("div",{class:"title"},"ENCAIK POINA",-1),r={class:"setting"},u={class:"setting-btn-group"},b={class:"keyboard"},A={class:"keyboard"},C=m("div",{class:"text-input"},[m("span",null,"C4中央Do"),m("span",null,"R四分休止符"),m("span",null,"_（下划线）四分延音符"),m("span",null,"-（减号）八分音符"),m("span",null,"=（等号）十六分音符"),m("span",null,".（英文句号）附点音符")],-1),E={class:"music-input"};M({expose:[],setup(M){let v=[{keyName:"",pitchName:"A0",keyType:0,keyMap:""},{keyName:"",pitchName:"Bb0",keyType:1,keyMap:""},{keyName:"",pitchName:"B0",keyType:0,keyMap:""},{keyName:"",pitchName:"C1",keyType:0,keyMap:""},{keyName:"",pitchName:"Db1",keyType:1,keyMap:""},{keyName:"",pitchName:"D1",keyType:0,keyMap:""},{keyName:"",pitchName:"Eb1",keyType:1,keyMap:""},{keyName:"",pitchName:"E1",keyType:0,keyMap:""},{keyName:"",pitchName:"F1",keyType:0,keyMap:""},{keyName:"",pitchName:"Gb1",keyType:1,keyMap:""},{keyName:"",pitchName:"G1",keyType:0,keyMap:""},{keyName:"",pitchName:"Ab1",keyType:1,keyMap:""},{keyName:"",pitchName:"A1",keyType:0,keyMap:""},{keyName:"",pitchName:"Bb1",keyType:1,keyMap:""},{keyName:"",pitchName:"B1",keyType:0,keyMap:""},{keyName:"Q",pitchName:"C2",keyType:0,keyMap:"KeyQ"},{keyName:"2",pitchName:"Db2",keyType:1,keyMap:"Digit2"},{keyName:"w",pitchName:"D2",keyType:0,keyMap:"KeyW"},{keyName:"3",pitchName:"Eb2",keyType:1,keyMap:"Digit3"},{keyName:"E",pitchName:"E2",keyType:0,keyMap:"KeyE"},{keyName:"R",pitchName:"F2",keyType:0,keyMap:"KeyR"},{keyName:"5",pitchName:"Gb2",keyType:1,keyMap:"Digit5"},{keyName:"T",pitchName:"G2",keyType:0,keyMap:"KeyT"},{keyName:"6",pitchName:"Ab2",keyType:1,keyMap:"Digit6"},{keyName:"Y",pitchName:"A2",keyType:0,keyMap:"KeyY"},{keyName:"7",pitchName:"Bb2",keyType:1,keyMap:"Digit7"},{keyName:"U",pitchName:"B2",keyType:0,keyMap:"KeyU"},{keyName:"I",pitchName:"C3",keyType:0,keyMap:"KeyI"},{keyName:"9",pitchName:"Db3",keyType:1,keyMap:"Digit9"},{keyName:"O",pitchName:"D3",keyType:0,keyMap:"KeyO"},{keyName:"0",pitchName:"Eb3",keyType:1,keyMap:"Digit0"},{keyName:"P",pitchName:"E3",keyType:0,keyMap:"KeyP"},{keyName:"[",pitchName:"F3",keyType:0,keyMap:"BracketLeft"},{keyName:"=",pitchName:"Gb3",keyType:1,keyMap:"Equal"},{keyName:"]",pitchName:"G3",keyType:0,keyMap:"BracketRight"},{keyName:"A",pitchName:"Ab3",keyType:1,keyMap:"KeyA"},{keyName:"Z",pitchName:"A3",keyType:0,keyMap:"KeyZ"},{keyName:"S",pitchName:"Bb3",keyType:1,keyMap:"KeyS"},{keyName:"X",pitchName:"B3",keyType:0,keyMap:"KeyX"},{keyName:"C",pitchName:"C4",keyType:0,keyMap:"KeyC"},{keyName:"F",pitchName:"Db4",keyType:1,keyMap:"KeyF"},{keyName:"V",pitchName:"D4",keyType:0,keyMap:"KeyV"},{keyName:"G",pitchName:"Eb4",keyType:1,keyMap:"KeyG"},{keyName:"B",pitchName:"E4",keyType:0,keyMap:"KeyB"},{keyName:"N",pitchName:"F4",keyType:0,keyMap:"KeyN"},{keyName:"J",pitchName:"Gb4",keyType:1,keyMap:"KeyJ"},{keyName:"M",pitchName:"G4",keyType:0,keyMap:"KeyM"},{keyName:"K",pitchName:"Ab4",keyType:1,keyMap:"KeyK"},{keyName:",",pitchName:"A4",keyType:0,keyMap:"Comma"},{keyName:"L",pitchName:"Bb4",keyType:1,keyMap:"KeyL"},{keyName:".",pitchName:"B4",keyType:0,keyMap:"Period"},{keyName:"/",pitchName:"C5",keyType:0,keyMap:"Slash"},{keyName:"'",pitchName:"Db5",keyType:1,keyMap:"Quote"},{keyName:"",pitchName:"D5",keyType:0,keyMap:""},{keyName:"",pitchName:"Eb5",keyType:1,keyMap:""},{keyName:"",pitchName:"E5",keyType:0,keyMap:""},{keyName:"",pitchName:"F5",keyType:0,keyMap:""},{keyName:"",pitchName:"Gb5",keyType:1,keyMap:""},{keyName:"",pitchName:"G5",keyType:0,keyMap:""},{keyName:"",pitchName:"Ab5",keyType:1,keyMap:""},{keyName:"",pitchName:"A5",keyType:0,keyMap:""},{keyName:"",pitchName:"Bb5",keyType:1,keyMap:""},{keyName:"",pitchName:"B5",keyType:0,keyMap:""},{keyName:"",pitchName:"C6",keyType:0,keyMap:""},{keyName:"",pitchName:"Db6",keyType:1,keyMap:""},{keyName:"",pitchName:"D6",keyType:0,keyMap:""},{keyName:"",pitchName:"Eb6",keyType:1,keyMap:""},{keyName:"",pitchName:"E6",keyType:0,keyMap:""},{keyName:"",pitchName:"F6",keyType:0,keyMap:""},{keyName:"",pitchName:"Gb6",keyType:1,keyMap:""},{keyName:"",pitchName:"G6",keyType:0,keyMap:""},{keyName:"",pitchName:"Ab6",keyType:1,keyMap:""},{keyName:"",pitchName:"A6",keyType:0,keyMap:""},{keyName:"",pitchName:"Bb6",keyType:1,keyMap:""},{keyName:"",pitchName:"B6",keyType:0,keyMap:""},{keyName:"",pitchName:"C7",keyType:0,keyMap:""},{keyName:"",pitchName:"Db7",keyType:1,keyMap:""},{keyName:"",pitchName:"D7",keyType:0,keyMap:""},{keyName:"",pitchName:"Eb7",keyType:1,keyMap:""},{keyName:"",pitchName:"E7",keyType:0,keyMap:""},{keyName:"",pitchName:"F7",keyType:0,keyMap:""},{keyName:"",pitchName:"Gb7",keyType:1,keyMap:""},{keyName:"",pitchName:"G7",keyType:0,keyMap:""},{keyName:"",pitchName:"Ab7",keyType:1,keyMap:""},{keyName:"",pitchName:"A7",keyType:0,keyMap:""},{keyName:"",pitchName:"Bb7",keyType:1,keyMap:""},{keyName:"",pitchName:"B7",keyType:0,keyMap:""},{keyName:"",pitchName:"C8",keyType:0,keyMap:""}],G=e("C4-D4-E4-G4G4-R-E4-G4-E4-A4-G4-E4-G4.R-E4=G4=A4-A4-A4-A4-A4-G4-F4=G4=G4._E4B4-C5C5-C5-E4-R-E4-B4-B4C5-B4-G4.R-C4=G4=A4-A4-A4-A4-A4-G4-F4=G4=G4._");const g=new y({urls:{A0:"A0.mp3",C1:"C1.mp3",A1:"A1.mp3",C2:"C2.mp3",A2:"A2.mp3",C3:"C3.mp3",A3:"A3.mp3",C4:"C4.mp3",C5:"C5.mp3",A5:"A5.mp3",C6:"C6.mp3",A6:"A6.mp3",C7:"C7.mp3"},release:1,baseUrl:"/samples/piano/"}).toDestination();function K(e){g.triggerAttackRelease(e,"8n");let y=document.getElementById(e);y.classList.add("key-active"),setTimeout((()=>{y.classList.remove("key-active")}),100)}a().then((()=>{!function(){let e=.5,y=[],a=G.value.match(/[a-zA-Z]+[0-9]?(-|=)?\.?/g)||[];for(let k of a){console.log(k);let a=0,p=k.match(/(-|=|\.)/g)||[];console.log(p),p.includes("-")?a+=.25:p.includes("=")?a+=.125:(p.includes("_"),a+=e),p.includes(".")&&(a+=a/2),y.push({pitch:k.match(/[a-zA-Z]+[0-9]?/)[0],playTime:a})}let p=n();y.forEach((e=>{console.log(e),"R"!==e.pitch&&g.triggerAttackRelease(e.pitch,"2n",p),p+=e.playTime}))}()}));let B=e(1);function D(e){B.value=e}let f=new Map;document.addEventListener("keydown",(e=>{var y;if(f.has(e.code))return;f.set(e.code);let a=null==(y=v.filter((y=>y.keyMap===e.code)))?void 0:y[0];a&&K(a.pitchName)})),document.addEventListener("keyup",(e=>{f.delete(e.code)}));let L=!1;return document.addEventListener("mousedown",(()=>{L=!0})),document.addEventListener("mouseover",(e=>{L&&["white-key","black-key"].includes(e.target.className)&&K(e.target.innerHTML)})),document.addEventListener("mouseup",(()=>{L=!1})),(e,y)=>(p(),k("div",T,[m("div",o,[d,m("div",r,[m("div",u,[m("div",{class:"setting-btn",onClick:y[1]||(y[1]=e=>D(0))},"键名"),m("div",{class:"setting-btn",onClick:y[2]||(y[2]=e=>D(1))},"音名")])]),m("div",b,[(p(!0),k(t,null,i(N(v).slice(0,N(v).length/2),(e=>(p(),k("div",{class:e.keyType?"black-key":"white-key",key:e.pitchName,onClick:y=>K(e.pitchName),id:e.pitchName},l(N(B)?e.pitchName:e.keyName),11,["onClick","id"])))),128))]),m("div",A,[(p(!0),k(t,null,i(N(v).slice(N(v).length/2),(e=>(p(),k("div",{class:e.keyType?"black-key":"white-key",key:e.pitchName,onClick:y=>K(e.pitchName),id:e.pitchName},l(N(B)?e.pitchName:e.keyName),11,["onClick","id"])))),128))]),C,m("div",E,[c(m("textarea",{rows:"10",cols:"200","onUpdate:modelValue":y[3]||(y[3]=e=>s(G)?G.value=e:G=e)},"\n        ",512),[[h,N(G)]])])])]))}}).mount("#app");
