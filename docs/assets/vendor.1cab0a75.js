var t=Object.defineProperty,e=Object.defineProperties,n=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,r=(e,n,s)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[n]=s,a=(t,e)=>{for(var n in e||(e={}))i.call(e,n)&&r(t,n,e[n]);if(s)for(var n of s(e))o.call(e,n)&&r(t,n,e[n]);return t},c=(t,s)=>e(t,n(s)),l=(t,e)=>{var n={};for(var r in t)i.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&s)for(var r of s(t))e.indexOf(r)<0&&o.call(t,r)&&(n[r]=t[r]);return n};function u(t,e){const n=Object.create(null),s=t.split(",");for(let i=0;i<s.length;i++)n[s[i]]=!0;return e?t=>!!n[t.toLowerCase()]:t=>!!n[t]}const h=u("Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt"),p=u("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function d(t){if(D(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],i=d(V(s)?_(s):s);if(i)for(const t in i)e[t]=i[t]}return e}if(F(t))return t}const f=/;(?![^(]*\))/g,m=/:(.+)/;function _(t){const e={};return t.split(f).forEach((t=>{if(t){const n=t.split(m);n.length>1&&(e[n[0].trim()]=n[1].trim())}})),e}function g(t){let e="";if(V(t))e=t;else if(D(t))for(let n=0;n<t.length;n++){const s=g(t[n]);s&&(e+=s+" ")}else if(F(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const v=t=>null==t?"":F(t)?JSON.stringify(t,y,2):String(t),y=(t,e)=>I(e)?{[`Map(${e.size})`]:[...e.entries()].reduce(((t,[e,n])=>(t[`${e} =>`]=n,t)),{})}:R(e)?{[`Set(${e.size})`]:[...e.values()]}:!F(e)||D(e)||B(e)?e:String(e),w={},x=[],b=()=>{},T=()=>!1,C=/^on[^a-z]/,S=t=>C.test(t),A=t=>t.startsWith("onUpdate:"),k=Object.assign,O=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},M=Object.prototype.hasOwnProperty,E=(t,e)=>M.call(t,e),D=Array.isArray,I=t=>"[object Map]"===W(t),R=t=>"[object Set]"===W(t),N=t=>"function"==typeof t,V=t=>"string"==typeof t,P=t=>"symbol"==typeof t,F=t=>null!==t&&"object"==typeof t,q=t=>F(t)&&N(t.then)&&N(t.catch),j=Object.prototype.toString,W=t=>j.call(t),B=t=>"[object Object]"===W(t),L=t=>V(t)&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,U=u(",key,ref,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),z=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},$=/-(\w)/g,G=z((t=>t.replace($,((t,e)=>e?e.toUpperCase():"")))),X=/\B([A-Z])/g,Y=z((t=>t.replace(X,"-$1").toLowerCase())),Z=z((t=>t.charAt(0).toUpperCase()+t.slice(1))),H=z((t=>t?`on${Z(t)}`:"")),Q=(t,e)=>t!==e&&(t==t||e==e),J=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},K=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},tt=t=>{const e=parseFloat(t);return isNaN(e)?t:e},et=new WeakMap,nt=[];let st;const it=Symbol(""),ot=Symbol("");function rt(t,e=w){(function(t){return t&&!0===t._isEffect})(t)&&(t=t.raw);const n=function(t,e){const n=function(){if(!n.active)return e.scheduler?void 0:t();if(!nt.includes(n)){lt(n);try{return ht.push(ut),ut=!0,nt.push(n),st=n,t()}finally{nt.pop(),dt(),st=nt[nt.length-1]}}};return n.id=ct++,n.allowRecurse=!!e.allowRecurse,n._isEffect=!0,n.active=!0,n.raw=t,n.deps=[],n.options=e,n}(t,e);return e.lazy||n(),n}function at(t){t.active&&(lt(t),t.options.onStop&&t.options.onStop(),t.active=!1)}let ct=0;function lt(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let ut=!0;const ht=[];function pt(){ht.push(ut),ut=!1}function dt(){const t=ht.pop();ut=void 0===t||t}function ft(t,e,n){if(!ut||void 0===st)return;let s=et.get(t);s||et.set(t,s=new Map);let i=s.get(n);i||s.set(n,i=new Set),i.has(st)||(i.add(st),st.deps.push(i))}function mt(t,e,n,s,i,o){const r=et.get(t);if(!r)return;const a=new Set,c=t=>{t&&t.forEach((t=>{(t!==st||t.allowRecurse)&&a.add(t)}))};if("clear"===e)r.forEach(c);else if("length"===n&&D(t))r.forEach(((t,e)=>{("length"===e||e>=s)&&c(t)}));else switch(void 0!==n&&c(r.get(n)),e){case"add":D(t)?L(n)&&c(r.get("length")):(c(r.get(it)),I(t)&&c(r.get(ot)));break;case"delete":D(t)||(c(r.get(it)),I(t)&&c(r.get(ot)));break;case"set":I(t)&&c(r.get(it))}a.forEach((t=>{t.options.scheduler?t.options.scheduler(t):t()}))}const _t=u("__proto__,__v_isRef,__isVue"),gt=new Set(Object.getOwnPropertyNames(Symbol).map((t=>Symbol[t])).filter(P)),vt=Tt(),yt=Tt(!1,!0),wt=Tt(!0),xt=Tt(!0,!0),bt={};function Tt(t=!1,e=!1){return function(n,s,i){if("__v_isReactive"===s)return!t;if("__v_isReadonly"===s)return t;if("__v_raw"===s&&i===(t?e?Kt:Jt:e?Qt:Ht).get(n))return n;const o=D(n);if(!t&&o&&E(bt,s))return Reflect.get(bt,s,i);const r=Reflect.get(n,s,i);if(P(s)?gt.has(s):_t(s))return r;if(t||ft(n,0,s),e)return r;if(le(r)){return!o||!L(s)?r.value:r}return F(r)?t?ne(r):ee(r):r}}["includes","indexOf","lastIndexOf"].forEach((t=>{const e=Array.prototype[t];bt[t]=function(...t){const n=ae(this);for(let e=0,i=this.length;e<i;e++)ft(n,0,e+"");const s=e.apply(n,t);return-1===s||!1===s?e.apply(n,t.map(ae)):s}})),["push","pop","shift","unshift","splice"].forEach((t=>{const e=Array.prototype[t];bt[t]=function(...t){pt();const n=e.apply(this,t);return dt(),n}}));function Ct(t=!1){return function(e,n,s,i){let o=e[n];if(!t&&(s=ae(s),o=ae(o),!D(e)&&le(o)&&!le(s)))return o.value=s,!0;const r=D(e)&&L(n)?Number(n)<e.length:E(e,n),a=Reflect.set(e,n,s,i);return e===ae(i)&&(r?Q(s,o)&&mt(e,"set",n,s):mt(e,"add",n,s)),a}}const St={get:vt,set:Ct(),deleteProperty:function(t,e){const n=E(t,e);t[e];const s=Reflect.deleteProperty(t,e);return s&&n&&mt(t,"delete",e,void 0),s},has:function(t,e){const n=Reflect.has(t,e);return P(e)&&gt.has(e)||ft(t,0,e),n},ownKeys:function(t){return ft(t,0,D(t)?"length":it),Reflect.ownKeys(t)}},At={get:wt,set:(t,e)=>!0,deleteProperty:(t,e)=>!0},kt=k({},St,{get:yt,set:Ct(!0)});k({},At,{get:xt});const Ot=t=>F(t)?ee(t):t,Mt=t=>F(t)?ne(t):t,Et=t=>t,Dt=t=>Reflect.getPrototypeOf(t);function It(t,e,n=!1,s=!1){const i=ae(t=t.__v_raw),o=ae(e);e!==o&&!n&&ft(i,0,e),!n&&ft(i,0,o);const{has:r}=Dt(i),a=s?Et:n?Mt:Ot;return r.call(i,e)?a(t.get(e)):r.call(i,o)?a(t.get(o)):void 0}function Rt(t,e=!1){const n=this.__v_raw,s=ae(n),i=ae(t);return t!==i&&!e&&ft(s,0,t),!e&&ft(s,0,i),t===i?n.has(t):n.has(t)||n.has(i)}function Nt(t,e=!1){return t=t.__v_raw,!e&&ft(ae(t),0,it),Reflect.get(t,"size",t)}function Vt(t){t=ae(t);const e=ae(this);return Dt(e).has.call(e,t)||(e.add(t),mt(e,"add",t,t)),this}function Pt(t,e){e=ae(e);const n=ae(this),{has:s,get:i}=Dt(n);let o=s.call(n,t);o||(t=ae(t),o=s.call(n,t));const r=i.call(n,t);return n.set(t,e),o?Q(e,r)&&mt(n,"set",t,e):mt(n,"add",t,e),this}function Ft(t){const e=ae(this),{has:n,get:s}=Dt(e);let i=n.call(e,t);i||(t=ae(t),i=n.call(e,t)),s&&s.call(e,t);const o=e.delete(t);return i&&mt(e,"delete",t,void 0),o}function qt(){const t=ae(this),e=0!==t.size,n=t.clear();return e&&mt(t,"clear",void 0,void 0),n}function jt(t,e){return function(n,s){const i=this,o=i.__v_raw,r=ae(o),a=e?Et:t?Mt:Ot;return!t&&ft(r,0,it),o.forEach(((t,e)=>n.call(s,a(t),a(e),i)))}}function Wt(t,e,n){return function(...s){const i=this.__v_raw,o=ae(i),r=I(o),a="entries"===t||t===Symbol.iterator&&r,c="keys"===t&&r,l=i[t](...s),u=n?Et:e?Mt:Ot;return!e&&ft(o,0,c?ot:it),{next(){const{value:t,done:e}=l.next();return e?{value:t,done:e}:{value:a?[u(t[0]),u(t[1])]:u(t),done:e}},[Symbol.iterator](){return this}}}}function Bt(t){return function(...e){return"delete"!==t&&this}}const Lt={get(t){return It(this,t)},get size(){return Nt(this)},has:Rt,add:Vt,set:Pt,delete:Ft,clear:qt,forEach:jt(!1,!1)},Ut={get(t){return It(this,t,!1,!0)},get size(){return Nt(this)},has:Rt,add:Vt,set:Pt,delete:Ft,clear:qt,forEach:jt(!1,!0)},zt={get(t){return It(this,t,!0)},get size(){return Nt(this,!0)},has(t){return Rt.call(this,t,!0)},add:Bt("add"),set:Bt("set"),delete:Bt("delete"),clear:Bt("clear"),forEach:jt(!0,!1)},$t={get(t){return It(this,t,!0,!0)},get size(){return Nt(this,!0)},has(t){return Rt.call(this,t,!0)},add:Bt("add"),set:Bt("set"),delete:Bt("delete"),clear:Bt("clear"),forEach:jt(!0,!0)};function Gt(t,e){const n=e?t?$t:Ut:t?zt:Lt;return(e,s,i)=>"__v_isReactive"===s?!t:"__v_isReadonly"===s?t:"__v_raw"===s?e:Reflect.get(E(n,s)&&s in e?n:e,s,i)}["keys","values","entries",Symbol.iterator].forEach((t=>{Lt[t]=Wt(t,!1,!1),zt[t]=Wt(t,!0,!1),Ut[t]=Wt(t,!1,!0),$t[t]=Wt(t,!0,!0)}));const Xt={get:Gt(!1,!1)},Yt={get:Gt(!1,!0)},Zt={get:Gt(!0,!1)},Ht=new WeakMap,Qt=new WeakMap,Jt=new WeakMap,Kt=new WeakMap;function te(t){return t.__v_skip||!Object.isExtensible(t)?0:function(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}((t=>W(t).slice(8,-1))(t))}function ee(t){return t&&t.__v_isReadonly?t:se(t,!1,St,Xt,Ht)}function ne(t){return se(t,!0,At,Zt,Jt)}function se(t,e,n,s,i){if(!F(t))return t;if(t.__v_raw&&(!e||!t.__v_isReactive))return t;const o=i.get(t);if(o)return o;const r=te(t);if(0===r)return t;const a=new Proxy(t,2===r?s:n);return i.set(t,a),a}function ie(t){return oe(t)?ie(t.__v_raw):!(!t||!t.__v_isReactive)}function oe(t){return!(!t||!t.__v_isReadonly)}function re(t){return ie(t)||oe(t)}function ae(t){return t&&ae(t.__v_raw)||t}const ce=t=>F(t)?ee(t):t;function le(t){return Boolean(t&&!0===t.__v_isRef)}function ue(t){return function(t,e=!1){if(le(t))return t;return new he(t,e)}(t)}class he{constructor(t,e=!1){this._rawValue=t,this._shallow=e,this.__v_isRef=!0,this._value=e?t:ce(t)}get value(){return ft(ae(this),0,"value"),this._value}set value(t){Q(ae(t),this._rawValue)&&(this._rawValue=t,this._value=this._shallow?t:ce(t),mt(ae(this),"set","value",t))}}function pe(t){return le(t)?t.value:t}const de={get:(t,e,n)=>pe(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const i=t[e];return le(i)&&!le(n)?(i.value=n,!0):Reflect.set(t,e,n,s)}};function fe(t){return ie(t)?t:new Proxy(t,de)}class me{constructor(t,e){this._object=t,this._key=e,this.__v_isRef=!0}get value(){return this._object[this._key]}set value(t){this._object[this._key]=t}}class _e{constructor(t,e,n){this._setter=e,this._dirty=!0,this.__v_isRef=!0,this.effect=rt(t,{lazy:!0,scheduler:()=>{this._dirty||(this._dirty=!0,mt(ae(this),"set","value"))}}),this.__v_isReadonly=n}get value(){const t=ae(this);return t._dirty&&(t._value=this.effect(),t._dirty=!1),ft(t,0,"value"),t._value}set value(t){this._setter(t)}}function ge(t,e,n,s){let i;try{i=s?t(...s):t()}catch(o){ye(o,e,n)}return i}function ve(t,e,n,s){if(N(t)){const i=ge(t,e,n,s);return i&&q(i)&&i.catch((t=>{ye(t,e,n)})),i}const i=[];for(let o=0;o<t.length;o++)i.push(ve(t[o],e,n,s));return i}function ye(t,e,n,s=!0){e&&e.vnode;if(e){let s=e.parent;const i=e.proxy,o=n;for(;s;){const e=s.ec;if(e)for(let n=0;n<e.length;n++)if(!1===e[n](t,i,o))return;s=s.parent}const r=e.appContext.config.errorHandler;if(r)return void ge(r,null,10,[t,i,o])}!function(t,e,n,s=!0){console.error(t)}(t,0,0,s)}let we=!1,xe=!1;const be=[];let Te=0;const Ce=[];let Se=null,Ae=0;const ke=[];let Oe=null,Me=0;const Ee=Promise.resolve();let De=null,Ie=null;function Re(t){const e=De||Ee;return t?e.then(this?t.bind(this):t):e}function Ne(t){if(!(be.length&&be.includes(t,we&&t.allowRecurse?Te+1:Te)||t===Ie)){const e=function(t){let e=Te+1,n=be.length;const s=je(t);for(;e<n;){const t=e+n>>>1;je(be[t])<s?e=t+1:n=t}return e}(t);e>-1?be.splice(e,0,t):be.push(t),Ve()}}function Ve(){we||xe||(xe=!0,De=Ee.then(We))}function Pe(t,e,n,s){D(t)?n.push(...t):e&&e.includes(t,t.allowRecurse?s+1:s)||n.push(t),Ve()}function Fe(t,e=null){if(Ce.length){for(Ie=e,Se=[...new Set(Ce)],Ce.length=0,Ae=0;Ae<Se.length;Ae++)Se[Ae]();Se=null,Ae=0,Ie=null,Fe(t,e)}}function qe(t){if(ke.length){const t=[...new Set(ke)];if(ke.length=0,Oe)return void Oe.push(...t);for(Oe=t,Oe.sort(((t,e)=>je(t)-je(e))),Me=0;Me<Oe.length;Me++)Oe[Me]();Oe=null,Me=0}}const je=t=>null==t.id?1/0:t.id;function We(t){xe=!1,we=!0,Fe(t),be.sort(((t,e)=>je(t)-je(e)));try{for(Te=0;Te<be.length;Te++){const t=be[Te];t&&ge(t,null,14)}}finally{Te=0,be.length=0,qe(),we=!1,De=null,(be.length||ke.length)&&We(t)}}function Be(t,e,...n){const s=t.vnode.props||w;let i=n;const o=e.startsWith("update:"),r=o&&e.slice(7);if(r&&r in s){const t=`${"modelValue"===r?"model":r}Modifiers`,{number:e,trim:o}=s[t]||w;o?i=n.map((t=>t.trim())):e&&(i=n.map(tt))}let a,c=s[a=H(e)]||s[a=H(G(e))];!c&&o&&(c=s[a=H(Y(e))]),c&&ve(c,t,6,i);const l=s[a+"Once"];if(l){if(t.emitted){if(t.emitted[a])return}else(t.emitted={})[a]=!0;ve(l,t,6,i)}}function Le(t,e,n=!1){if(!e.deopt&&void 0!==t.__emits)return t.__emits;const s=t.emits;let i={},o=!1;if(!N(t)){const s=t=>{const n=Le(t,e,!0);n&&(o=!0,k(i,n))};!n&&e.mixins.length&&e.mixins.forEach(s),t.extends&&s(t.extends),t.mixins&&t.mixins.forEach(s)}return s||o?(D(s)?s.forEach((t=>i[t]=null)):k(i,s),t.__emits=i):t.__emits=null}function Ue(t,e){return!(!t||!S(e))&&(e=e.slice(2).replace(/Once$/,""),E(t,e[0].toLowerCase()+e.slice(1))||E(t,Y(e))||E(t,e))}let ze=0;const $e=t=>ze+=t;let Ge=null,Xe=null;function Ye(t){const e=Ge;return Ge=t,Xe=t&&t.type.__scopeId||null,e}function Ze(t){const{type:e,vnode:n,proxy:s,withProxy:i,props:o,propsOptions:[r],slots:a,attrs:c,emit:l,render:u,renderCache:h,data:p,setupState:d,ctx:f}=t;let m;const _=Ye(t);try{let t;if(4&n.shapeFlag){const e=i||s;m=cs(u.call(e,e,h,o,d,p,f)),t=c}else{const n=e;0,m=cs(n.length>1?n(o,{attrs:c,slots:a,emit:l}):n(o,null)),t=e.props?c:Qe(c)}let _=m;if(!1!==e.inheritAttrs&&t){const e=Object.keys(t),{shapeFlag:n}=_;e.length&&(1&n||6&n)&&(r&&e.some(A)&&(t=Je(t,r)),_=rs(_,t))}n.dirs&&(_.dirs=_.dirs?_.dirs.concat(n.dirs):n.dirs),n.transition&&(_.transition=n.transition),m=_}catch(g){Zn.length=0,ye(g,t,1),m=os(Xn)}return Ye(_),m}function He(t){let e;for(let n=0;n<t.length;n++){const s=t[n];if(!ts(s))return;if(s.type!==Xn||"v-if"===s.children){if(e)return;e=s}}return e}const Qe=t=>{let e;for(const n in t)("class"===n||"style"===n||S(n))&&((e||(e={}))[n]=t[n]);return e},Je=(t,e)=>{const n={};for(const s in t)A(s)&&s.slice(9)in e||(n[s]=t[s]);return n};function Ke(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let i=0;i<s.length;i++){const o=s[i];if(e[o]!==t[o]&&!Ue(n,o))return!0}return!1}function tn(t){if(N(t)&&(t=t()),D(t)){t=He(t)}return cs(t)}function en(t,e,n,s=!1){const i={},o={};K(o,ns,1),t.propsDefaults=Object.create(null),nn(t,e,i,o),n?t.props=s?i:se(i,!1,kt,Yt,Qt):t.type.props?t.props=i:t.props=o,t.attrs=o}function nn(t,e,n,s){const[i,o]=t.propsOptions;if(e)for(const r in e){const o=e[r];if(U(r))continue;let a;i&&E(i,a=G(r))?n[a]=o:Ue(t.emitsOptions,r)||(s[r]=o)}if(o){const e=ae(n);for(let s=0;s<o.length;s++){const r=o[s];n[r]=sn(i,e,r,e[r],t)}}}function sn(t,e,n,s,i){const o=t[n];if(null!=o){const t=E(o,"default");if(t&&void 0===s){const t=o.default;if(o.type!==Function&&N(t)){const{propsDefaults:o}=i;n in o?s=o[n]:(ks(i),s=o[n]=t(e),ks(null))}else s=t}o[0]&&(E(e,n)||t?!o[1]||""!==s&&s!==Y(n)||(s=!0):s=!1)}return s}function on(t,e,n=!1){if(!e.deopt&&t.__props)return t.__props;const s=t.props,i={},o=[];let r=!1;if(!N(t)){const s=t=>{r=!0;const[n,s]=on(t,e,!0);k(i,n),s&&o.push(...s)};!n&&e.mixins.length&&e.mixins.forEach(s),t.extends&&s(t.extends),t.mixins&&t.mixins.forEach(s)}if(!s&&!r)return t.__props=x;if(D(s))for(let a=0;a<s.length;a++){const t=G(s[a]);rn(t)&&(i[t]=w)}else if(s)for(const a in s){const t=G(a);if(rn(t)){const e=s[a],n=i[t]=D(e)||N(e)?{type:e}:e;if(n){const e=ln(Boolean,n.type),s=ln(String,n.type);n[0]=e>-1,n[1]=s<0||e<s,(e>-1||E(n,"default"))&&o.push(t)}}}return t.__props=[i,o]}function rn(t){return"$"!==t[0]}function an(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:""}function cn(t,e){return an(t)===an(e)}function ln(t,e){return D(e)?e.findIndex((e=>cn(e,t))):N(e)&&cn(e,t)?0:-1}function un(t,e,n=As,s=!1){if(n){const i=n[t]||(n[t]=[]),o=e.__weh||(e.__weh=(...s)=>{if(n.isUnmounted)return;pt(),ks(n);const i=ve(e,n,t,s);return ks(null),dt(),i});return s?i.unshift(o):i.push(o),o}}const hn=t=>(e,n=As)=>!Ms&&un(t,e,n),pn=hn("bm"),dn=hn("m"),fn=hn("bu"),mn=hn("u"),_n=hn("bum"),gn=hn("um"),vn=hn("rtg"),yn=hn("rtc"),wn={};function xn(t,e,n){return bn(t,e,n)}function bn(t,e,{immediate:n,deep:s,flush:i,onTrack:o,onTrigger:r}=w,a=As){let c,l,u=!1;if(le(t)?(c=()=>t.value,u=!!t._shallow):ie(t)?(c=()=>t,s=!0):c=D(t)?()=>t.map((t=>le(t)?t.value:ie(t)?Cn(t):N(t)?ge(t,a,2,[a&&a.proxy]):void 0)):N(t)?e?()=>ge(t,a,2,[a&&a.proxy]):()=>{if(!a||!a.isUnmounted)return l&&l(),ve(t,a,3,[h])}:b,e&&s){const t=c;c=()=>Cn(t())}let h=t=>{l=m.options.onStop=()=>{ge(t,a,4)}},p=D(t)?[]:wn;const d=()=>{if(m.active)if(e){const t=m();(s||u||Q(t,p))&&(l&&l(),ve(e,a,3,[t,p===wn?void 0:p,h]),p=t)}else m()};let f;d.allowRecurse=!!e,f="sync"===i?d:"post"===i?()=>jn(d,a&&a.suspense):()=>{!a||a.isMounted?function(t){Pe(t,Se,Ce,Ae)}(d):d()};const m=rt(c,{lazy:!0,onTrack:o,onTrigger:r,scheduler:f});return Is(m,a),e?n?d():p=m():"post"===i?jn(m,a&&a.suspense):m(),()=>{at(m),a&&O(a.effects,m)}}function Tn(t,e,n){const s=this.proxy;return bn(V(t)?()=>s[t]:t.bind(s),e.bind(s),n,this)}function Cn(t,e=new Set){if(!F(t)||e.has(t))return t;if(e.add(t),le(t))Cn(t.value,e);else if(D(t))for(let n=0;n<t.length;n++)Cn(t[n],e);else if(R(t)||I(t))t.forEach((t=>{Cn(t,e)}));else for(const n in t)Cn(t[n],e);return t}const Sn=t=>t.type.__isKeepAlive;function An(t,e,n=As){const s=t.__wdc||(t.__wdc=()=>{let e=n;for(;e;){if(e.isDeactivated)return;e=e.parent}t()});if(un(e,s,n),n){let t=n.parent;for(;t&&t.parent;)Sn(t.parent.vnode)&&kn(s,e,n,t),t=t.parent}}function kn(t,e,n,s){const i=un(e,t,s,!0);gn((()=>{O(s[e],i)}),n)}const On=t=>"_"===t[0]||"$stable"===t,Mn=t=>D(t)?t.map(cs):[cs(t)],En=(t,e,n)=>function(t,e=Ge){if(!e)return t;const n=(...n)=>{ze||Qn(!0);const s=Ye(e),i=t(...n);return Ye(s),ze||Jn(),i};return n._c=!0,n}((t=>Mn(e(t))),n),Dn=(t,e)=>{const n=t._ctx;for(const s in t){if(On(s))continue;const i=t[s];if(N(i))e[s]=En(0,i,n);else if(null!=i){const t=Mn(i);e[s]=()=>t}}},In=(t,e)=>{const n=Mn(e);t.slots.default=()=>n};function Rn(t,e){if(null===Ge)return t;const n=Ge.proxy,s=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[t,o,r,a=w]=e[i];N(t)&&(t={mounted:t,updated:t}),s.push({dir:t,instance:n,value:o,oldValue:void 0,arg:r,modifiers:a})}return t}function Nn(t,e,n,s){const i=t.dirs,o=e&&e.dirs;for(let r=0;r<i.length;r++){const a=i[r];o&&(a.oldValue=o[r].value);const c=a.dir[s];c&&ve(c,n,8,[t.el,a,t,e])}}function Vn(){return{app:null,config:{isNativeTag:T,performance:!1,globalProperties:{},optionMergeStrategies:{},isCustomElement:T,errorHandler:void 0,warnHandler:void 0},mixins:[],components:{},directives:{},provides:Object.create(null)}}let Pn=0;function Fn(t,e){return function(n,s=null){null==s||F(s)||(s=null);const i=Vn(),o=new Set;let r=!1;const a=i.app={_uid:Pn++,_component:n,_props:s,_container:null,_context:i,version:Vs,get config(){return i.config},set config(t){},use:(t,...e)=>(o.has(t)||(t&&N(t.install)?(o.add(t),t.install(a,...e)):N(t)&&(o.add(t),t(a,...e))),a),mixin:t=>(i.mixins.includes(t)||(i.mixins.push(t),(t.props||t.emits)&&(i.deopt=!0)),a),component:(t,e)=>e?(i.components[t]=e,a):i.components[t],directive:(t,e)=>e?(i.directives[t]=e,a):i.directives[t],mount(o,c,l){if(!r){const u=os(n,s);return u.appContext=i,c&&e?e(u,o):t(u,o,l),r=!0,a._container=o,o.__vue_app__=a,u.component.proxy}},unmount(){r&&(t(null,a._container),delete a._container.__vue_app__)},provide:(t,e)=>(i.provides[t]=e,a)};return a}}const qn={scheduler:Ne,allowRecurse:!0},jn=function(t,e){e&&e.pendingBranch?D(t)?e.effects.push(...t):e.effects.push(t):Pe(t,Oe,ke,Me)},Wn=(t,e,n,s)=>{if(D(t))return void t.forEach(((t,i)=>Wn(t,e&&(D(e)?e[i]:e),n,s)));let i;if(s){if(s.type.__asyncLoader)return;i=4&s.shapeFlag?s.component.exposed||s.component.proxy:s.el}else i=null;const{i:o,r:r}=t,a=e&&e.r,c=o.refs===w?o.refs={}:o.refs,l=o.setupState;if(null!=a&&a!==r&&(V(a)?(c[a]=null,E(l,a)&&(l[a]=null)):le(a)&&(a.value=null)),V(r)){const t=()=>{c[r]=i,E(l,r)&&(l[r]=i)};i?(t.id=-1,jn(t,n)):t()}else if(le(r)){const t=()=>{r.value=i};i?(t.id=-1,jn(t,n)):t()}else N(r)&&ge(r,o,12,[i,c])};function Bn(t){return function(t,e){const{insert:n,remove:s,patchProp:i,forcePatchProp:o,createElement:r,createText:a,createComment:c,setText:l,setElementText:u,parentNode:h,nextSibling:p,setScopeId:d=b,cloneNode:f,insertStaticContent:m}=t,_=(t,e,n,s=null,i=null,o=null,r=!1,a=null,c=!1)=>{t&&!es(t,e)&&(s=et(t),X(t,i,o,!0),t=null),-2===e.patchFlag&&(c=!1,e.dynamicChildren=null);const{type:l,ref:u,shapeFlag:h}=e;switch(l){case Gn:g(t,e,n,s);break;case Xn:v(t,e,n,s);break;case Yn:null==t&&y(e,n,s,r);break;case $n:N(t,e,n,s,i,o,r,a,c);break;default:1&h?S(t,e,n,s,i,o,r,a,c):6&h?V(t,e,n,s,i,o,r,a,c):(64&h||128&h)&&l.process(t,e,n,s,i,o,r,a,c,st)}null!=u&&i&&Wn(u,t&&t.ref,o,e)},g=(t,e,s,i)=>{if(null==t)n(e.el=a(e.children),s,i);else{const n=e.el=t.el;e.children!==t.children&&l(n,e.children)}},v=(t,e,s,i)=>{null==t?n(e.el=c(e.children||""),s,i):e.el=t.el},y=(t,e,n,s)=>{[t.el,t.anchor]=m(t.children,e,n,s)},T=({el:t,anchor:e},s,i)=>{let o;for(;t&&t!==e;)o=p(t),n(t,s,i),t=o;n(e,s,i)},C=({el:t,anchor:e})=>{let n;for(;t&&t!==e;)n=p(t),s(t),t=n;s(e)},S=(t,e,n,s,i,o,r,a,c)=>{r=r||"svg"===e.type,null==t?A(e,n,s,i,o,r,a,c):D(t,e,i,o,r,a,c)},A=(t,e,s,o,a,c,l,h)=>{let p,d;const{type:m,props:_,shapeFlag:g,transition:v,patchFlag:y,dirs:w}=t;if(t.el&&void 0!==f&&-1===y)p=t.el=f(t.el);else{if(p=t.el=r(t.type,c,_&&_.is,_),8&g?u(p,t.children):16&g&&M(t.children,p,null,o,a,c&&"foreignObject"!==m,l,h||!!t.dynamicChildren),w&&Nn(t,null,o,"created"),_){for(const e in _)U(e)||i(p,e,null,_[e],c,t.children,o,a,tt);(d=_.onVnodeBeforeMount)&&Ln(d,o,t)}O(p,t,t.scopeId,l,o)}w&&Nn(t,null,o,"beforeMount");const x=(!a||a&&!a.pendingBranch)&&v&&!v.persisted;x&&v.beforeEnter(p),n(p,e,s),((d=_&&_.onVnodeMounted)||x||w)&&jn((()=>{d&&Ln(d,o,t),x&&v.enter(p),w&&Nn(t,null,o,"mounted")}),a)},O=(t,e,n,s,i)=>{if(n&&d(t,n),s)for(let o=0;o<s.length;o++)d(t,s[o]);if(i){if(e===i.subTree){const e=i.vnode;O(t,e,e.scopeId,e.slotScopeIds,i.parent)}}},M=(t,e,n,s,i,o,r,a,c=0)=>{for(let l=c;l<t.length;l++){const c=t[l]=r?ls(t[l]):cs(t[l]);_(null,c,e,n,s,i,o,r,a)}},D=(t,e,n,s,r,a,c)=>{const l=e.el=t.el;let{patchFlag:h,dynamicChildren:p,dirs:d}=e;h|=16&t.patchFlag;const f=t.props||w,m=e.props||w;let _;if((_=m.onVnodeBeforeUpdate)&&Ln(_,n,e,t),d&&Nn(e,t,n,"beforeUpdate"),h>0){if(16&h)R(l,e,f,m,n,s,r);else if(2&h&&f.class!==m.class&&i(l,"class",null,m.class,r),4&h&&i(l,"style",f.style,m.style,r),8&h){const a=e.dynamicProps;for(let e=0;e<a.length;e++){const c=a[e],u=f[c],h=m[c];(h!==u||o&&o(l,c))&&i(l,c,u,h,r,t.children,n,s,tt)}}1&h&&t.children!==e.children&&u(l,e.children)}else c||null!=p||R(l,e,f,m,n,s,r);const g=r&&"foreignObject"!==e.type;p?I(t.dynamicChildren,p,l,n,s,g,a):c||B(t,e,l,null,n,s,g,a,!1),((_=m.onVnodeUpdated)||d)&&jn((()=>{_&&Ln(_,n,e,t),d&&Nn(e,t,n,"updated")}),s)},I=(t,e,n,s,i,o,r)=>{for(let a=0;a<e.length;a++){const c=t[a],l=e[a],u=c.type===$n||!es(c,l)||6&c.shapeFlag||64&c.shapeFlag?h(c.el):n;_(c,l,u,null,s,i,o,r,!0)}},R=(t,e,n,s,r,a,c)=>{if(n!==s){for(const l in s){if(U(l))continue;const u=s[l],h=n[l];(u!==h||o&&o(t,l))&&i(t,l,h,u,c,e.children,r,a,tt)}if(n!==w)for(const o in n)U(o)||o in s||i(t,o,n[o],null,c,e.children,r,a,tt)}},N=(t,e,s,i,o,r,c,l,u)=>{const h=e.el=t?t.el:a(""),p=e.anchor=t?t.anchor:a("");let{patchFlag:d,dynamicChildren:f,slotScopeIds:m}=e;d>0&&(u=!0),m&&(l=l?l.concat(m):m),null==t?(n(h,s,i),n(p,s,i),M(e.children,s,p,o,r,c,l,u)):d>0&&64&d&&f&&t.dynamicChildren?(I(t.dynamicChildren,f,s,o,r,c,l),(null!=e.key||o&&e===o.subTree)&&Un(t,e,!0)):B(t,e,s,p,o,r,c,l,u)},V=(t,e,n,s,i,o,r,a,c)=>{e.slotScopeIds=a,null==t?512&e.shapeFlag?i.ctx.activate(e,n,s,r,c):P(e,n,s,i,o,r,c):F(t,e,c)},P=(t,e,n,s,i,o,r)=>{const a=t.component=function(t,e,n){const s=t.type,i=(e?e.appContext:t.appContext)||Cs,o={uid:Ss++,vnode:t,type:s,parent:e,appContext:i,root:null,next:null,subTree:null,update:null,render:null,proxy:null,exposed:null,withProxy:null,effects:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:on(s,i),emitsOptions:Le(s,i),emit:null,emitted:null,propsDefaults:w,ctx:w,data:w,props:w,attrs:w,slots:w,refs:w,setupState:w,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=Be.bind(null,o),o}(t,s,i);if(Sn(t)&&(a.ctx.renderer=st),function(t,e=!1){Ms=e;const{props:n,children:s}=t.vnode,i=Os(t);en(t,n,i,e),((t,e)=>{if(32&t.vnode.shapeFlag){const n=e._;n?(t.slots=e,K(e,"_",n)):Dn(e,t.slots={})}else t.slots={},e&&In(t,e);K(t.slots,ns,1)})(t,s);const o=i?function(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,bs);const{setup:s}=n;if(s){const n=t.setupContext=s.length>1?function(t){const e=e=>{t.exposed=fe(e)};return{attrs:t.attrs,slots:t.slots,emit:t.emit,expose:e}}(t):null;As=t,pt();const i=ge(s,t,0,[t.props,n]);if(dt(),As=null,q(i)){if(e)return i.then((e=>{Es(t,e)})).catch((e=>{ye(e,t,0)}));t.asyncDep=i}else Es(t,i)}else Ds(t)}(t,e):void 0;Ms=!1}(a),a.asyncDep){if(i&&i.registerDep(a,j),!t.el){const t=a.subTree=os(Xn);v(null,t,e,n)}}else j(a,t,e,n,i,o,r)},F=(t,e,n)=>{const s=e.component=t.component;if(function(t,e,n){const{props:s,children:i,component:o}=t,{props:r,children:a,patchFlag:c}=e,l=o.emitsOptions;if(e.dirs||e.transition)return!0;if(!(n&&c>=0))return!(!i&&!a||a&&a.$stable)||s!==r&&(s?!r||Ke(s,r,l):!!r);if(1024&c)return!0;if(16&c)return s?Ke(s,r,l):!!r;if(8&c){const t=e.dynamicProps;for(let e=0;e<t.length;e++){const n=t[e];if(r[n]!==s[n]&&!Ue(l,n))return!0}}return!1}(t,e,n)){if(s.asyncDep&&!s.asyncResolved)return void W(s,e,n);s.next=e,function(t){const e=be.indexOf(t);e>Te&&be.splice(e,1)}(s.update),s.update()}else e.component=t.component,e.el=t.el,s.vnode=e},j=(t,e,n,s,i,o,r)=>{t.update=rt((function(){if(t.isMounted){let e,{next:n,bu:s,u:a,parent:c,vnode:l}=t,u=n;n?(n.el=l.el,W(t,n,r)):n=l,s&&J(s),(e=n.props&&n.props.onVnodeBeforeUpdate)&&Ln(e,c,n,l);const p=Ze(t),d=t.subTree;t.subTree=p,_(d,p,h(d.el),et(d),t,i,o),n.el=p.el,null===u&&function({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}(t,p.el),a&&jn(a,i),(e=n.props&&n.props.onVnodeUpdated)&&jn((()=>{Ln(e,c,n,l)}),i)}else{let r;const{el:a,props:c}=e,{bm:l,m:u,parent:h}=t;l&&J(l),(r=c&&c.onVnodeBeforeMount)&&Ln(r,h,e);const p=t.subTree=Ze(t);if(a&&ot?ot(e.el,p,t,i,null):(_(null,p,n,s,t,i,o),e.el=p.el),u&&jn(u,i),r=c&&c.onVnodeMounted){const t=e;jn((()=>{Ln(r,h,t)}),i)}const{a:d}=t;d&&256&e.shapeFlag&&jn(d,i),t.isMounted=!0,e=n=s=null}}),qn)},W=(t,e,n)=>{e.component=t;const s=t.vnode.props;t.vnode=e,t.next=null,function(t,e,n,s){const{props:i,attrs:o,vnode:{patchFlag:r}}=t,a=ae(i),[c]=t.propsOptions;if(!(s||r>0)||16&r){let s;nn(t,e,i,o);for(const o in a)e&&(E(e,o)||(s=Y(o))!==o&&E(e,s))||(c?!n||void 0===n[o]&&void 0===n[s]||(i[o]=sn(c,e||w,o,void 0,t)):delete i[o]);if(o!==a)for(const t in o)e&&E(e,t)||delete o[t]}else if(8&r){const n=t.vnode.dynamicProps;for(let s=0;s<n.length;s++){const r=n[s],l=e[r];if(c)if(E(o,r))o[r]=l;else{const e=G(r);i[e]=sn(c,a,e,l,t)}else o[r]=l}}mt(t,"set","$attrs")}(t,e.props,s,n),((t,e,n)=>{const{vnode:s,slots:i}=t;let o=!0,r=w;if(32&s.shapeFlag){const t=e._;t?n&&1===t?o=!1:(k(i,e),n||1!==t||delete i._):(o=!e.$stable,Dn(e,i)),r=e}else e&&(In(t,e),r={default:1});if(o)for(const a in i)On(a)||a in r||delete i[a]})(t,e.children,n),pt(),Fe(void 0,t.update),dt()},B=(t,e,n,s,i,o,r,a,c=!1)=>{const l=t&&t.children,h=t?t.shapeFlag:0,p=e.children,{patchFlag:d,shapeFlag:f}=e;if(d>0){if(128&d)return void z(l,p,n,s,i,o,r,a,c);if(256&d)return void L(l,p,n,s,i,o,r,a,c)}8&f?(16&h&&tt(l,i,o),p!==l&&u(n,p)):16&h?16&f?z(l,p,n,s,i,o,r,a,c):tt(l,i,o,!0):(8&h&&u(n,""),16&f&&M(p,n,s,i,o,r,a,c))},L=(t,e,n,s,i,o,r,a,c)=>{e=e||x;const l=(t=t||x).length,u=e.length,h=Math.min(l,u);let p;for(p=0;p<h;p++){const s=e[p]=c?ls(e[p]):cs(e[p]);_(t[p],s,n,null,i,o,r,a,c)}l>u?tt(t,i,o,!0,!1,h):M(e,n,s,i,o,r,a,c,h)},z=(t,e,n,s,i,o,r,a,c)=>{let l=0;const u=e.length;let h=t.length-1,p=u-1;for(;l<=h&&l<=p;){const s=t[l],u=e[l]=c?ls(e[l]):cs(e[l]);if(!es(s,u))break;_(s,u,n,null,i,o,r,a,c),l++}for(;l<=h&&l<=p;){const s=t[h],l=e[p]=c?ls(e[p]):cs(e[p]);if(!es(s,l))break;_(s,l,n,null,i,o,r,a,c),h--,p--}if(l>h){if(l<=p){const t=p+1,h=t<u?e[t].el:s;for(;l<=p;)_(null,e[l]=c?ls(e[l]):cs(e[l]),n,h,i,o,r,a,c),l++}}else if(l>p)for(;l<=h;)X(t[l],i,o,!0),l++;else{const d=l,f=l,m=new Map;for(l=f;l<=p;l++){const t=e[l]=c?ls(e[l]):cs(e[l]);null!=t.key&&m.set(t.key,l)}let g,v=0;const y=p-f+1;let w=!1,b=0;const T=new Array(y);for(l=0;l<y;l++)T[l]=0;for(l=d;l<=h;l++){const s=t[l];if(v>=y){X(s,i,o,!0);continue}let u;if(null!=s.key)u=m.get(s.key);else for(g=f;g<=p;g++)if(0===T[g-f]&&es(s,e[g])){u=g;break}void 0===u?X(s,i,o,!0):(T[u-f]=l+1,u>=b?b=u:w=!0,_(s,e[u],n,null,i,o,r,a,c),v++)}const C=w?function(t){const e=t.slice(),n=[0];let s,i,o,r,a;const c=t.length;for(s=0;s<c;s++){const c=t[s];if(0!==c){if(i=n[n.length-1],t[i]<c){e[s]=i,n.push(s);continue}for(o=0,r=n.length-1;o<r;)a=(o+r)/2|0,t[n[a]]<c?o=a+1:r=a;c<t[n[o]]&&(o>0&&(e[s]=n[o-1]),n[o]=s)}}o=n.length,r=n[o-1];for(;o-- >0;)n[o]=r,r=e[r];return n}(T):x;for(g=C.length-1,l=y-1;l>=0;l--){const t=f+l,h=e[t],p=t+1<u?e[t+1].el:s;0===T[l]?_(null,h,n,p,i,o,r,a,c):w&&(g<0||l!==C[g]?$(h,n,p,2):g--)}}},$=(t,e,s,i,o=null)=>{const{el:r,type:a,transition:c,children:l,shapeFlag:u}=t;if(6&u)return void $(t.component.subTree,e,s,i);if(128&u)return void t.suspense.move(e,s,i);if(64&u)return void a.move(t,e,s,st);if(a===$n){n(r,e,s);for(let t=0;t<l.length;t++)$(l[t],e,s,i);return void n(t.anchor,e,s)}if(a===Yn)return void T(t,e,s);if(2!==i&&1&u&&c)if(0===i)c.beforeEnter(r),n(r,e,s),jn((()=>c.enter(r)),o);else{const{leave:t,delayLeave:i,afterLeave:o}=c,a=()=>n(r,e,s),l=()=>{t(r,(()=>{a(),o&&o()}))};i?i(r,a,l):l()}else n(r,e,s)},X=(t,e,n,s=!1,i=!1)=>{const{type:o,props:r,ref:a,children:c,dynamicChildren:l,shapeFlag:u,patchFlag:h,dirs:p}=t;if(null!=a&&Wn(a,null,n,null),256&u)return void e.ctx.deactivate(t);const d=1&u&&p;let f;if((f=r&&r.onVnodeBeforeUnmount)&&Ln(f,e,t),6&u)Q(t.component,n,s);else{if(128&u)return void t.suspense.unmount(n,s);d&&Nn(t,null,e,"beforeUnmount"),64&u?t.type.remove(t,e,n,i,st,s):l&&(o!==$n||h>0&&64&h)?tt(l,e,n,!1,!0):(o===$n&&(128&h||256&h)||!i&&16&u)&&tt(c,e,n),s&&Z(t)}((f=r&&r.onVnodeUnmounted)||d)&&jn((()=>{f&&Ln(f,e,t),d&&Nn(t,null,e,"unmounted")}),n)},Z=t=>{const{type:e,el:n,anchor:i,transition:o}=t;if(e===$n)return void H(n,i);if(e===Yn)return void C(t);const r=()=>{s(n),o&&!o.persisted&&o.afterLeave&&o.afterLeave()};if(1&t.shapeFlag&&o&&!o.persisted){const{leave:e,delayLeave:s}=o,i=()=>e(n,r);s?s(t.el,r,i):i()}else r()},H=(t,e)=>{let n;for(;t!==e;)n=p(t),s(t),t=n;s(e)},Q=(t,e,n)=>{const{bum:s,effects:i,update:o,subTree:r,um:a}=t;if(s&&J(s),i)for(let c=0;c<i.length;c++)at(i[c]);o&&(at(o),X(r,t,e,n)),a&&jn(a,e),jn((()=>{t.isUnmounted=!0}),e),e&&e.pendingBranch&&!e.isUnmounted&&t.asyncDep&&!t.asyncResolved&&t.suspenseId===e.pendingId&&(e.deps--,0===e.deps&&e.resolve())},tt=(t,e,n,s=!1,i=!1,o=0)=>{for(let r=o;r<t.length;r++)X(t[r],e,n,s,i)},et=t=>6&t.shapeFlag?et(t.component.subTree):128&t.shapeFlag?t.suspense.next():p(t.anchor||t.el),nt=(t,e,n)=>{null==t?e._vnode&&X(e._vnode,null,null,!0):_(e._vnode||null,t,e,null,null,null,n),qe(),e._vnode=t},st={p:_,um:X,m:$,r:Z,mt:P,mc:M,pc:B,pbc:I,n:et,o:t};let it,ot;e&&([it,ot]=e(st));return{render:nt,hydrate:it,createApp:Fn(nt,it)}}(t)}function Ln(t,e,n,s=null){ve(t,e,7,[n,s])}function Un(t,e,n=!1){const s=t.children,i=e.children;if(D(s)&&D(i))for(let o=0;o<s.length;o++){const t=s[o];let e=i[o];1&e.shapeFlag&&!e.dynamicChildren&&((e.patchFlag<=0||32===e.patchFlag)&&(e=i[o]=ls(i[o]),e.el=t.el),n||Un(t,e))}}const zn=Symbol(),$n=Symbol(void 0),Gn=Symbol(void 0),Xn=Symbol(void 0),Yn=Symbol(void 0),Zn=[];let Hn=null;function Qn(t=!1){Zn.push(Hn=t?null:[])}function Jn(){Zn.pop(),Hn=Zn[Zn.length-1]||null}function Kn(t,e,n,s,i){const o=os(t,e,n,s,i,!0);return o.dynamicChildren=Hn||x,Jn(),Hn&&Hn.push(o),o}function ts(t){return!!t&&!0===t.__v_isVNode}function es(t,e){return t.type===e.type&&t.key===e.key}const ns="__vInternal",ss=({key:t})=>null!=t?t:null,is=({ref:t})=>null!=t?V(t)||le(t)||N(t)?{i:Ge,r:t}:t:null,os=function(t,e=null,n=null,s=0,i=null,o=!1){t&&t!==zn||(t=Xn);if(ts(t)){const s=rs(t,e,!0);return n&&us(s,n),s}r=t,N(r)&&"__vccOpts"in r&&(t=t.__vccOpts);var r;if(e){(re(e)||ns in e)&&(e=k({},e));let{class:t,style:n}=e;t&&!V(t)&&(e.class=g(t)),F(n)&&(re(n)&&!D(n)&&(n=k({},n)),e.style=d(n))}const a=V(t)?1:(t=>t.__isSuspense)(t)?128:(t=>t.__isTeleport)(t)?64:F(t)?4:N(t)?2:0,c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&ss(e),ref:e&&is(e),scopeId:Xe,slotScopeIds:null,children:null,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:s,dynamicProps:i,dynamicChildren:null,appContext:null};if(us(c,n),128&a){const{content:t,fallback:e}=function(t){const{shapeFlag:e,children:n}=t;let s,i;return 32&e?(s=tn(n.default),i=tn(n.fallback)):(s=tn(n),i=cs(null)),{content:s,fallback:i}}(c);c.ssContent=t,c.ssFallback=e}!o&&Hn&&(s>0||6&a)&&32!==s&&Hn.push(c);return c};function rs(t,e,n=!1){const{props:s,ref:i,patchFlag:o,children:r}=t,a=e?function(...t){const e=k({},t[0]);for(let n=1;n<t.length;n++){const s=t[n];for(const t in s)if("class"===t)e.class!==s.class&&(e.class=g([e.class,s.class]));else if("style"===t)e.style=d([e.style,s.style]);else if(S(t)){const n=e[t],i=s[t];n!==i&&(e[t]=n?[].concat(n,s[t]):i)}else""!==t&&(e[t]=s[t])}return e}(s||{},e):s;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&ss(a),ref:e&&e.ref?n&&i?D(i)?i.concat(is(e)):[i,is(e)]:is(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:r,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==$n?-1===o?16:16|o:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&rs(t.ssContent),ssFallback:t.ssFallback&&rs(t.ssFallback),el:t.el,anchor:t.anchor}}function as(t=" ",e=0){return os(Gn,null,t,e)}function cs(t){return null==t||"boolean"==typeof t?os(Xn):D(t)?os($n,null,t):"object"==typeof t?null===t.el?t:rs(t):os(Gn,null,String(t))}function ls(t){return null===t.el?t:rs(t)}function us(t,e){let n=0;const{shapeFlag:s}=t;if(null==e)e=null;else if(D(e))n=16;else if("object"==typeof e){if(1&s||64&s){const n=e.default;return void(n&&(n._c&&$e(1),us(t,n()),n._c&&$e(-1)))}{n=32;const s=e._;s||ns in e?3===s&&Ge&&(1024&Ge.vnode.patchFlag?(e._=2,t.patchFlag|=1024):e._=1):e._ctx=Ge}}else N(e)?(e={default:e,_ctx:Ge},n=32):(e=String(e),64&s?(n=16,e=[as(e)]):n=8);t.children=e,t.shapeFlag|=n}function hs(t,e,n=!1){const s=As||Ge;if(s){const i=null==s.parent?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides;if(i&&t in i)return i[t];if(arguments.length>1)return n&&N(e)?e():e}}let ps=!0;function ds(t,e,n=[],s=[],i=[],o=!1){const{mixins:r,extends:a,data:c,computed:l,methods:u,watch:h,provide:p,inject:d,components:f,directives:m,beforeMount:_,mounted:g,beforeUpdate:v,updated:y,activated:x,deactivated:T,beforeDestroy:C,beforeUnmount:S,destroyed:A,unmounted:O,render:M,renderTracked:E,renderTriggered:I,errorCaptured:R,expose:V}=e,P=t.proxy,q=t.ctx,j=t.appContext.mixins;if(o&&M&&t.render===b&&(t.render=M),o||(ps=!1,fs("beforeCreate","bc",e,t,j),ps=!0,_s(t,j,n,s,i)),a&&ds(t,a,n,s,i,!0),r&&_s(t,r,n,s,i),d)if(D(d))for(let w=0;w<d.length;w++){const t=d[w];q[t]=hs(t)}else for(const w in d){const t=d[w];F(t)?q[w]=hs(t.from||w,t.default,!0):q[w]=hs(t)}if(u)for(const w in u){const t=u[w];N(t)&&(q[w]=t.bind(P))}if(o?c&&n.push(c):(n.length&&n.forEach((e=>gs(t,e,P))),c&&gs(t,c,P)),l)for(const w in l){const t=l[w],e=Rs({get:N(t)?t.bind(P,P):N(t.get)?t.get.bind(P,P):b,set:!N(t)&&N(t.set)?t.set.bind(P):b});Object.defineProperty(q,w,{enumerable:!0,configurable:!0,get:()=>e.value,set:t=>e.value=t})}var W;if(h&&s.push(h),!o&&s.length&&s.forEach((t=>{for(const e in t)vs(t[e],q,P,e)})),p&&i.push(p),!o&&i.length&&i.forEach((t=>{const e=N(t)?t.call(P):t;Reflect.ownKeys(e).forEach((t=>{!function(t,e){if(As){let n=As.provides;const s=As.parent&&As.parent.provides;s===n&&(n=As.provides=Object.create(s)),n[t]=e}}(t,e[t])}))})),o&&(f&&k(t.components||(t.components=k({},t.type.components)),f),m&&k(t.directives||(t.directives=k({},t.type.directives)),m)),o||fs("created","c",e,t,j),_&&pn(_.bind(P)),g&&dn(g.bind(P)),v&&fn(v.bind(P)),y&&mn(y.bind(P)),x&&An(x.bind(P),"a",W),T&&function(t,e){An(t,"da",e)}(T.bind(P)),R&&((t,e=As)=>{un("ec",t,e)})(R.bind(P)),E&&yn(E.bind(P)),I&&vn(I.bind(P)),S&&_n(S.bind(P)),O&&gn(O.bind(P)),D(V)&&!o)if(V.length){const e=t.exposed||(t.exposed=fe({}));V.forEach((t=>{e[t]=function(t,e){return le(t[e])?t[e]:new me(t,e)}(P,t)}))}else t.exposed||(t.exposed=w)}function fs(t,e,n,s,i){for(let o=0;o<i.length;o++)ms(t,e,i[o],s);ms(t,e,n,s)}function ms(t,e,n,s){const{extends:i,mixins:o}=n,r=n[t];if(i&&ms(t,e,i,s),o)for(let a=0;a<o.length;a++)ms(t,e,o[a],s);r&&ve(r.bind(s.proxy),s,e)}function _s(t,e,n,s,i){for(let o=0;o<e.length;o++)ds(t,e[o],n,s,i,!0)}function gs(t,e,n){ps=!1;const s=e.call(n,n);ps=!0,F(s)&&(t.data===w?t.data=ee(s):k(t.data,s))}function vs(t,e,n,s){const i=s.includes(".")?function(t,e){const n=e.split(".");return()=>{let e=t;for(let t=0;t<n.length&&e;t++)e=e[n[t]];return e}}(n,s):()=>n[s];if(V(t)){const n=e[t];N(n)&&xn(i,n)}else if(N(t))xn(i,t.bind(n));else if(F(t))if(D(t))t.forEach((t=>vs(t,e,n,s)));else{const s=N(t.handler)?t.handler.bind(n):e[t.handler];N(s)&&xn(i,s,t)}}function ys(t,e,n){const s=n.appContext.config.optionMergeStrategies,{mixins:i,extends:o}=e;o&&ys(t,o,n),i&&i.forEach((e=>ys(t,e,n)));for(const r in e)s&&E(s,r)?t[r]=s[r](t[r],e[r],n.proxy,r):t[r]=e[r]}const ws=t=>t?Os(t)?t.exposed?t.exposed:t.proxy:ws(t.parent):null,xs=k(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>ws(t.parent),$root:t=>ws(t.root),$emit:t=>t.emit,$options:t=>function(t){const e=t.type,{__merged:n,mixins:s,extends:i}=e;if(n)return n;const o=t.appContext.mixins;if(!o.length&&!s&&!i)return e;const r={};return o.forEach((e=>ys(r,e,t))),ys(r,e,t),e.__merged=r}(t),$forceUpdate:t=>()=>Ne(t.update),$nextTick:t=>Re.bind(t.proxy),$watch:t=>Tn.bind(t)}),bs={get({_:t},e){const{ctx:n,setupState:s,data:i,props:o,accessCache:r,type:a,appContext:c}=t;if("__v_skip"===e)return!0;let l;if("$"!==e[0]){const a=r[e];if(void 0!==a)switch(a){case 0:return s[e];case 1:return i[e];case 3:return n[e];case 2:return o[e]}else{if(s!==w&&E(s,e))return r[e]=0,s[e];if(i!==w&&E(i,e))return r[e]=1,i[e];if((l=t.propsOptions[0])&&E(l,e))return r[e]=2,o[e];if(n!==w&&E(n,e))return r[e]=3,n[e];ps&&(r[e]=4)}}const u=xs[e];let h,p;return u?("$attrs"===e&&ft(t,0,e),u(t)):(h=a.__cssModules)&&(h=h[e])?h:n!==w&&E(n,e)?(r[e]=3,n[e]):(p=c.config.globalProperties,E(p,e)?p[e]:void 0)},set({_:t},e,n){const{data:s,setupState:i,ctx:o}=t;if(i!==w&&E(i,e))i[e]=n;else if(s!==w&&E(s,e))s[e]=n;else if(E(t.props,e))return!1;return("$"!==e[0]||!(e.slice(1)in t))&&(o[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:i,propsOptions:o}},r){let a;return void 0!==n[r]||t!==w&&E(t,r)||e!==w&&E(e,r)||(a=o[0])&&E(a,r)||E(s,r)||E(xs,r)||E(i.config.globalProperties,r)}},Ts=k({},bs,{get(t,e){if(e!==Symbol.unscopables)return bs.get(t,e,t)},has:(t,e)=>"_"!==e[0]&&!h(e)}),Cs=Vn();let Ss=0;let As=null;const ks=t=>{As=t};function Os(t){return 4&t.vnode.shapeFlag}let Ms=!1;function Es(t,e,n){N(e)?t.render=e:F(e)&&(t.setupState=fe(e)),Ds(t)}function Ds(t,e){const n=t.type;t.render||(t.render=n.render||b,t.render._rc&&(t.withProxy=new Proxy(t.ctx,Ts))),As=t,pt(),ds(t,n),dt(),As=null}function Is(t,e=As){e&&(e.effects||(e.effects=[])).push(t)}function Rs(t){const e=function(t){let e,n;return N(t)?(e=t,n=b):(e=t.get,n=t.set),new _e(e,n,N(t)||!t.set)}(t);return Is(e.effect),e}function Ns(t,e){let n;if(D(t)||V(t)){n=new Array(t.length);for(let s=0,i=t.length;s<i;s++)n[s]=e(t[s],s)}else if("number"==typeof t){n=new Array(t);for(let s=0;s<t;s++)n[s]=e(s+1,s)}else if(F(t))if(t[Symbol.iterator])n=Array.from(t,e);else{const s=Object.keys(t);n=new Array(s.length);for(let i=0,o=s.length;i<o;i++){const o=s[i];n[i]=e(t[o],o,i)}}else n=[];return n}const Vs="3.0.11",Ps="http://www.w3.org/2000/svg",Fs="undefined"!=typeof document?document:null;let qs,js;const Ws={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const i=e?Fs.createElementNS(Ps,t):Fs.createElement(t,n?{is:n}:void 0);return"select"===t&&s&&null!=s.multiple&&i.setAttribute("multiple",s.multiple),i},createText:t=>Fs.createTextNode(t),createComment:t=>Fs.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Fs.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},cloneNode(t){const e=t.cloneNode(!0);return"_value"in t&&(e._value=t._value),e},insertStaticContent(t,e,n,s){const i=s?js||(js=Fs.createElementNS(Ps,"svg")):qs||(qs=Fs.createElement("div"));i.innerHTML=t;const o=i.firstChild;let r=o,a=r;for(;r;)a=r,Ws.insert(r,e,n),r=i.firstChild;return[o,a]}};const Bs=/\s*!important$/;function Ls(t,e,n){if(D(n))n.forEach((n=>Ls(t,e,n)));else if(e.startsWith("--"))t.setProperty(e,n);else{const s=function(t,e){const n=zs[e];if(n)return n;let s=G(e);if("filter"!==s&&s in t)return zs[e]=s;s=Z(s);for(let i=0;i<Us.length;i++){const n=Us[i]+s;if(n in t)return zs[e]=n}return e}(t,e);Bs.test(n)?t.setProperty(Y(s),n.replace(Bs,""),"important"):t[s]=n}}const Us=["Webkit","Moz","ms"],zs={};const $s="http://www.w3.org/1999/xlink";let Gs=Date.now,Xs=!1;if("undefined"!=typeof window){Gs()>document.createEvent("Event").timeStamp&&(Gs=()=>performance.now());const t=navigator.userAgent.match(/firefox\/(\d+)/i);Xs=!!(t&&Number(t[1])<=53)}let Ys=0;const Zs=Promise.resolve(),Hs=()=>{Ys=0};function Qs(t,e,n,s){t.addEventListener(e,n,s)}function Js(t,e,n,s,i=null){const o=t._vei||(t._vei={}),r=o[e];if(s&&r)r.value=s;else{const[n,a]=function(t){let e;if(Ks.test(t)){let n;for(e={};n=t.match(Ks);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[Y(t.slice(2)),e]}(e);if(s){Qs(t,n,o[e]=function(t,e){const n=t=>{const s=t.timeStamp||Gs();(Xs||s>=n.attached-1)&&ve(function(t,e){if(D(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map((t=>e=>!e._stopped&&t(e)))}return e}(t,n.value),e,5,[t])};return n.value=t,n.attached=(()=>Ys||(Zs.then(Hs),Ys=Gs()))(),n}(s,i),a)}else r&&(!function(t,e,n,s){t.removeEventListener(e,n,s)}(t,n,r,a),o[e]=void 0)}}const Ks=/(?:Once|Passive|Capture)$/;const ti=/^on[a-z]/;const ei=t=>{const e=t.props["onUpdate:modelValue"];return D(e)?t=>J(e,t):e};function ni(t){t.target.composing=!0}function si(t){const e=t.target;e.composing&&(e.composing=!1,function(t,e){const n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}(e,"input"))}const ii={created(t,{modifiers:{lazy:e,trim:n,number:s}},i){t._assign=ei(i);const o=s||"number"===t.type;Qs(t,e?"change":"input",(e=>{if(e.target.composing)return;let s=t.value;n?s=s.trim():o&&(s=tt(s)),t._assign(s)})),n&&Qs(t,"change",(()=>{t.value=t.value.trim()})),e||(Qs(t,"compositionstart",ni),Qs(t,"compositionend",si),Qs(t,"change",si))},mounted(t,{value:e}){t.value=null==e?"":e},beforeUpdate(t,{value:e,modifiers:{trim:n,number:s}},i){if(t._assign=ei(i),t.composing)return;if(document.activeElement===t){if(n&&t.value.trim()===e)return;if((s||"number"===t.type)&&tt(t.value)===e)return}const o=null==e?"":e;t.value!==o&&(t.value=o)}},oi=k({patchProp:(t,e,n,s,i=!1,o,r,a,c)=>{switch(e){case"class":!function(t,e,n){if(null==e&&(e=""),n)t.setAttribute("class",e);else{const n=t._vtc;n&&(e=(e?[e,...n]:[...n]).join(" ")),t.className=e}}(t,s,i);break;case"style":!function(t,e,n){const s=t.style;if(n)if(V(n)){if(e!==n){const e=s.display;s.cssText=n,"_vod"in t&&(s.display=e)}}else{for(const t in n)Ls(s,t,n[t]);if(e&&!V(e))for(const t in e)null==n[t]&&Ls(s,t,"")}else t.removeAttribute("style")}(t,n,s);break;default:S(e)?A(e)||Js(t,e,0,s,r):function(t,e,n,s){if(s)return"innerHTML"===e||!!(e in t&&ti.test(e)&&N(n));if("spellcheck"===e||"draggable"===e)return!1;if("form"===e)return!1;if("list"===e&&"INPUT"===t.tagName)return!1;if("type"===e&&"TEXTAREA"===t.tagName)return!1;if(ti.test(e)&&V(n))return!1;return e in t}(t,e,s,i)?function(t,e,n,s,i,o,r){if("innerHTML"===e||"textContent"===e)return s&&r(s,i,o),void(t[e]=null==n?"":n);if("value"!==e||"PROGRESS"===t.tagName){if(""===n||null==n){const s=typeof t[e];if(""===n&&"boolean"===s)return void(t[e]=!0);if(null==n&&"string"===s)return t[e]="",void t.removeAttribute(e);if("number"===s)return t[e]=0,void t.removeAttribute(e)}try{t[e]=n}catch(a){}}else{t._value=n;const e=null==n?"":n;t.value!==e&&(t.value=e)}}(t,e,s,o,r,a,c):("true-value"===e?t._trueValue=s:"false-value"===e&&(t._falseValue=s),function(t,e,n,s){if(s&&e.startsWith("xlink:"))null==n?t.removeAttributeNS($s,e.slice(6,e.length)):t.setAttributeNS($s,e,n);else{const s=p(e);null==n||s&&!1===n?t.removeAttribute(e):t.setAttribute(e,s?"":n)}}(t,e,s,i))}},forcePatchProp:(t,e)=>"value"===e},Ws);let ri;const ai=(...t)=>{const e=(ri||(ri=Bn(oi))).createApp(...t),{mount:n}=e;return e.mount=t=>{const s=function(t){if(V(t)){return document.querySelector(t)}return t}(t);if(!s)return;const i=e._component;N(i)||i.render||i.template||(i.template=s.innerHTML),s.innerHTML="";const o=n(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};const ci=(t,e,n)=>({endTime:e,insertTime:n,type:"exponentialRampToValue",value:t}),li=(t,e,n)=>({endTime:e,insertTime:n,type:"linearRampToValue",value:t}),ui=(t,e)=>({startTime:e,type:"setValue",value:t}),hi=(t,e,n)=>({duration:n,startTime:e,type:"setValueCurve",values:t}),pi=(t,e,{startTime:n,target:s,timeConstant:i})=>s+(e-s)*Math.exp((n-t)/i),di=t=>"exponentialRampToValue"===t.type,fi=t=>"linearRampToValue"===t.type,mi=t=>di(t)||fi(t),_i=t=>"setValue"===t.type,gi=t=>"setValueCurve"===t.type,vi=(t,e,n,s)=>{const i=t[e];return void 0===i?s:mi(i)||_i(i)?i.value:gi(i)?i.values[i.values.length-1]:pi(n,vi(t,e-1,i.startTime,s),i)},yi=(t,e,n,s,i)=>void 0===n?[s.insertTime,i]:mi(n)?[n.endTime,n.value]:_i(n)?[n.startTime,n.value]:gi(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,vi(t,e-1,n.startTime,i)],wi=t=>"cancelAndHold"===t.type,xi=t=>"cancelScheduledValues"===t.type,bi=t=>wi(t)||xi(t)?t.cancelTime:di(t)||fi(t)?t.endTime:t.startTime,Ti=(t,e,n,{endTime:s,value:i})=>n===i?i:0<n&&0<i||n<0&&i<0?n*(i/n)**((t-e)/(s-e)):0,Ci=(t,e,n,{endTime:s,value:i})=>n+(t-e)/(s-e)*(i-n),Si=(t,{duration:e,startTime:n,values:s})=>((t,e)=>{const n=Math.floor(e),s=Math.ceil(e);return n===s?t[n]:(1-(e-n))*t[n]+(1-(s-e))*t[s]})(s,(t-n)/e*(s.length-1)),Ai=t=>"setTarget"===t.type;class ki{constructor(t){this._automationEvents=[],this._currenTime=0,this._defaultValue=t}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(t){const e=bi(t);if(wi(t)||xi(t)){const n=this._automationEvents.findIndex((n=>xi(t)&&gi(n)?n.startTime+n.duration>=e:bi(n)>=e)),s=this._automationEvents[n];if(-1!==n&&(this._automationEvents=this._automationEvents.slice(0,n)),wi(t)){const t=this._automationEvents[this._automationEvents.length-1];if(void 0!==s&&mi(s)){if(Ai(t))throw new Error("The internal list is malformed.");const n=gi(t)?t.startTime+t.duration:bi(t),i=gi(t)?t.values[t.values.length-1]:t.value,o=di(s)?Ti(e,n,i,s):Ci(e,n,i,s),r=di(s)?ci(o,e,this._currenTime):li(o,e,this._currenTime);this._automationEvents.push(r)}void 0!==t&&Ai(t)&&this._automationEvents.push(ui(this.getValue(e),e)),void 0!==t&&gi(t)&&t.startTime+t.duration>e&&(this._automationEvents[this._automationEvents.length-1]=hi(new Float32Array([6,7]),t.startTime,e-t.startTime))}}else{const n=this._automationEvents.findIndex((t=>bi(t)>e)),s=-1===n?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[n-1];if(void 0!==s&&gi(s)&&bi(s)+s.duration>e)return!1;const i=di(t)?ci(t.value,t.endTime,this._currenTime):fi(t)?li(t.value,e,this._currenTime):t;if(-1===n)this._automationEvents.push(i);else{if(gi(t)&&e+t.duration>bi(this._automationEvents[n]))return!1;this._automationEvents.splice(n,0,i)}}return!0}flush(t){const e=this._automationEvents.findIndex((e=>bi(e)>t));if(e>1){const t=this._automationEvents.slice(e-1),n=t[0];Ai(n)&&t.unshift(ui(vi(this._automationEvents,e-2,n.startTime,this._defaultValue),n.startTime)),this._automationEvents=t}}getValue(t){if(0===this._automationEvents.length)return this._defaultValue;const e=this._automationEvents.findIndex((e=>bi(e)>t)),n=this._automationEvents[e],s=(-1===e?this._automationEvents.length:e)-1,i=this._automationEvents[s];if(void 0!==i&&Ai(i)&&(void 0===n||!mi(n)||n.insertTime>t))return pi(t,vi(this._automationEvents,s-1,i.startTime,this._defaultValue),i);if(void 0!==i&&_i(i)&&(void 0===n||!mi(n)))return i.value;if(void 0!==i&&gi(i)&&(void 0===n||!mi(n)||i.startTime+i.duration>t))return t<i.startTime+i.duration?Si(t,i):i.values[i.values.length-1];if(void 0!==i&&mi(i)&&(void 0===n||!mi(n)))return i.value;if(void 0!==n&&di(n)){const[e,o]=yi(this._automationEvents,s,i,n,this._defaultValue);return Ti(t,e,o,n)}if(void 0!==n&&fi(n)){const[e,o]=yi(this._automationEvents,s,i,n,this._defaultValue);return Ci(t,e,o,n)}return this._defaultValue}}const Oi=new WeakSet,Mi=new WeakMap,Ei=new WeakMap,Di=new WeakMap,Ii=new WeakMap,Ri=new WeakMap,Ni=new WeakMap,Vi=new WeakMap,Pi=new WeakMap,Fi=new WeakMap,qi={construct:()=>qi},ji=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,Wi=(t,e)=>{const n=[];let s=t.replace(/^[\s]+/,""),i=s.match(ji);for(;null!==i;){const t=i[1].slice(1,-1),o=i[0].replace(/([\s]+)?;?$/,"").replace(t,new URL(t,e).toString());n.push(o),s=s.slice(i[0].length).replace(/^[\s]+/,""),i=s.match(ji)}return[n.join(";"),s]},Bi=t=>{if(void 0!==t&&!Array.isArray(t))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},Li=t=>{if(!(t=>{try{new new Proxy(t,qi)}catch{return!1}return!0})(t))throw new TypeError("The given value for processorCtor should be a constructor.");if(null===t.prototype||"object"!=typeof t.prototype)throw new TypeError("The given value for processorCtor should have a prototype.")},Ui=(t,e)=>{const n=t.get(e);if(void 0===n)throw new Error("A value with the given key could not be found.");return n},zi=(t,e)=>{const n=Array.from(t).filter(e);if(n.length>1)throw Error("More than one element was found.");if(0===n.length)throw Error("No element was found.");const[s]=n;return t.delete(s),s},$i=(t,e,n,s)=>{const i=Ui(t,e),o=zi(i,(t=>t[0]===n&&t[1]===s));return 0===i.size&&t.delete(e),o},Gi=t=>Ui(Ni,t),Xi=t=>{if(Oi.has(t))throw new Error("The AudioNode is already stored.");Oi.add(t),Gi(t).forEach((t=>t(!0)))},Yi=t=>"port"in t,Zi=t=>{if(!Oi.has(t))throw new Error("The AudioNode is not stored.");Oi.delete(t),Gi(t).forEach((t=>t(!1)))},Hi=(t,e)=>{!Yi(t)&&e.every((t=>0===t.size))&&Zi(t)},Qi={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},Ji=(t,e)=>t.context===e,Ki=t=>{try{t.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},to=()=>new DOMException("","IndexSizeError"),eo=t=>{var e;t.getChannelData=(e=t.getChannelData,n=>{try{return e.call(t,n)}catch(s){if(12===s.code)throw to();throw s}})},no={numberOfChannels:1},so=-34028234663852886e22,io=-so,oo=t=>Oi.has(t),ro={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},ao=t=>Ui(Mi,t),co=t=>Ui(Di,t),lo=(t,e)=>{const{activeInputs:n}=ao(t);n.forEach((n=>n.forEach((([n])=>{e.includes(t)||lo(n,[...e,t])}))));const s=(t=>"playbackRate"in t)(t)?[t.playbackRate]:Yi(t)?Array.from(t.parameters.values()):(t=>"frequency"in t&&"gain"in t)(t)?[t.Q,t.detune,t.frequency,t.gain]:(t=>"offset"in t)(t)?[t.offset]:(t=>!("frequency"in t)&&"gain"in t)(t)?[t.gain]:(t=>"detune"in t&&"frequency"in t)(t)?[t.detune,t.frequency]:(t=>"pan"in t)(t)?[t.pan]:[];for(const i of s){const t=co(i);void 0!==t&&t.activeInputs.forEach((([t])=>lo(t,e)))}oo(t)&&Zi(t)},uo=t=>{lo(t.destination,[])},ho=t=>"context"in t,po=t=>ho(t[0]),fo=(t,e,n,s)=>{for(const i of t)if(n(i)){if(s)return!1;throw Error("The set contains at least one similar element.")}return t.add(e),!0},mo=(t,e,[n,s],i)=>{fo(t,[e,n,s],(t=>t[0]===e&&t[1]===n),i)},_o=(t,[e,n,s],i)=>{const o=t.get(e);void 0===o?t.set(e,new Set([[n,s]])):fo(o,[n,s],(t=>t[0]===n),i)},go=t=>"inputs"in t,vo=(t,e,n,s)=>{if(go(e)){const i=e.inputs[s];return t.connect(i,n,0),[i,n,0]}return t.connect(e,n,s),[e,n,s]},yo=(t,e,n)=>{for(const s of t)if(s[0]===e&&s[1]===n)return t.delete(s),s;return null},wo=(t,e)=>{if(!Gi(t).delete(e))throw new Error("Missing the expected event listener.")},xo=(t,e,n)=>{const s=Ui(t,e),i=zi(s,(t=>t[0]===n));return 0===s.size&&t.delete(e),i},bo=(t,e,n,s)=>{go(e)?t.disconnect(e.inputs[s],n,0):t.disconnect(e,n,s)},To=t=>Ui(Ei,t),Co=t=>Ui(Ii,t),So=t=>Vi.has(t),Ao=t=>!Oi.has(t),ko=t=>new Promise((e=>{const n=t.createScriptProcessor(256,1,1),s=t.createGain(),i=t.createBuffer(1,2,44100),o=i.getChannelData(0);o[0]=1,o[1]=1;const r=t.createBufferSource();r.buffer=i,r.loop=!0,r.connect(n).connect(t.destination),r.connect(s),r.disconnect(s),n.onaudioprocess=s=>{const i=s.inputBuffer.getChannelData(0);Array.prototype.some.call(i,(t=>1===t))?e(!0):e(!1),r.stop(),n.onaudioprocess=null,r.disconnect(n),n.disconnect(t.destination)},r.start()})),Oo=(t,e)=>{const n=new Map;for(const s of t)for(const t of s){const e=n.get(t);n.set(t,void 0===e?1:e+1)}n.forEach(((t,n)=>e(n,t)))},Mo=t=>"context"in t,Eo=(t,e,n,s)=>{const{activeInputs:i,passiveInputs:o}=co(e),{outputs:r}=ao(t),a=Gi(t),c=r=>{const a=To(t),c=Co(e);if(r){const e=xo(o,t,n);mo(i,t,e,!1),s||So(t)||a.connect(c,n)}else{const e=((t,e,n)=>zi(t,(t=>t[0]===e&&t[1]===n)))(i,t,n);_o(o,e,!1),s||So(t)||a.disconnect(c,n)}};return!!fo(r,[e,n],(t=>t[0]===e&&t[1]===n),!0)&&(a.add(c),oo(t)?mo(i,t,[n,c],!0):_o(o,[t,n,c],!0),!0)},Do=(t,e,n,s,i)=>{const[o,r]=((t,e,n,s)=>{const{activeInputs:i,passiveInputs:o}=ao(e),r=yo(i[s],t,n);if(null===r)return[$i(o,t,n,s)[2],!1];return[r[2],!0]})(t,n,s,i);if(null!==o&&(wo(t,o),!r||e||So(t)||bo(To(t),To(n),s,i)),oo(n)){const{activeInputs:t}=ao(n);Hi(n,t)}},Io=(t,e,n,s)=>{const[i,o]=((t,e,n)=>{const{activeInputs:s,passiveInputs:i}=co(e),o=yo(s,t,n);if(null===o)return[xo(i,t,n)[1],!1];return[o[2],!0]})(t,n,s);null!==i&&(wo(t,i),!o||e||So(t)||To(t).disconnect(Co(n),s))};class Ro{constructor(t){this._map=new Map(t)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(t,e=null){return this._map.forEach(((n,s)=>t.call(e,n,s,this)))}get(t){return this._map.get(t)}has(t){return this._map.has(t)}keys(){return this._map.keys()}values(){return this._map.values()}}const No={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}};function Vo(t,e,n,s,i){if("function"==typeof t.copyFromChannel)0===e[n].byteLength&&(e[n]=new Float32Array(128)),t.copyFromChannel(e[n],s,i);else{const o=t.getChannelData(s);if(0===e[n].byteLength)e[n]=o.slice(i,i+128);else{const t=new Float32Array(o.buffer,i*Float32Array.BYTES_PER_ELEMENT,128);e[n].set(t)}}}const Po=(t,e,n,s,i)=>{"function"==typeof t.copyToChannel?0!==e[n].byteLength&&t.copyToChannel(e[n],s,i):0!==e[n].byteLength&&t.getChannelData(s).set(e[n],i)},Fo=(t,e)=>{const n=[];for(let s=0;s<t;s+=1){const t=[],i="number"==typeof e?e:e[s];for(let e=0;e<i;e+=1)t.push(new Float32Array(128));n.push(t)}return n},qo=async(t,e,n,s,i,o,r)=>{const l=null===e?128*Math.ceil(t.context.length/128):e.length,u=s.channelCount*s.numberOfInputs,h=i.reduce(((t,e)=>t+e),0),p=0===h?null:n.createBuffer(h,l,n.sampleRate);if(void 0===o)throw new Error("Missing the processor constructor.");const d=ao(t),f=await((t,e)=>{const n=Ui(Fi,t),s=To(e);return Ui(n,s)})(n,t),m=Fo(s.numberOfInputs,s.channelCount),_=Fo(s.numberOfOutputs,i),g=Array.from(t.parameters.keys()).reduce(((t,e)=>c(a({},t),{[e]:new Float32Array(128)})),{});for(let a=0;a<l;a+=128){if(s.numberOfInputs>0&&null!==e)for(let t=0;t<s.numberOfInputs;t+=1)for(let n=0;n<s.channelCount;n+=1)Vo(e,m[t],n,n,a);void 0!==o.parameterDescriptors&&null!==e&&o.parameterDescriptors.forEach((({name:t},n)=>{Vo(e,g,t,u+n,a)}));for(let t=0;t<s.numberOfInputs;t+=1)for(let e=0;e<i[t];e+=1)0===_[t][e].byteLength&&(_[t][e]=new Float32Array(128));try{const t=m.map(((t,e)=>0===d.activeInputs[e].size?[]:t)),e=r(a/n.sampleRate,n.sampleRate,(()=>f.process(t,_,g)));if(null!==p)for(let n=0,o=0;n<s.numberOfOutputs;n+=1){for(let t=0;t<i[n];t+=1)Po(p,_[n],t,o+t,a);o+=i[n]}if(!e)break}catch(v){t.dispatchEvent(new ErrorEvent("processorerror",{colno:v.colno,filename:v.filename,lineno:v.lineno,message:v.message}));break}}return p},jo={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},Wo={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},Bo={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},Lo={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},Uo={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},zo=t=>{const{port1:e,port2:n}=new MessageChannel;return new Promise((s=>{n.onmessage=()=>{e.close(),n.close(),s()},e.postMessage(t,[t])}))},$o={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},Go=(t,e,n)=>{const s=e[n];if(void 0===s)throw t();return s},Xo={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},Yo={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},Zo=()=>new DOMException("","InvalidStateError"),Ho=()=>new DOMException("","InvalidAccessError"),Qo={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},Jo=(t,e,n,s,i,o,r,a,c,l,u)=>{const h=l.length;let p=a;for(let d=0;d<h;d+=1){let a=n[0]*l[d];for(let e=1;e<i;e+=1){const s=p-e&c-1;a+=n[e]*o[s],a-=t[e]*r[s]}for(let t=i;t<s;t+=1)a+=n[t]*o[p-t&c-1];for(let n=i;n<e;n+=1)a-=t[n]*r[p-n&c-1];o[p]=l[d],r[p]=a,p=p+1&c-1,u[d]=a}return p},Ko={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},tr=t=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=t.decodeAudioData(e.buffer,(()=>{}));return void 0!==n&&(n.catch((()=>{})),!0)}catch{}return!1},er=(t,e,n)=>{const s=e[n];void 0!==s&&s!==t[n]&&(t[n]=s)},nr=(t,e)=>{er(t,e,"channelCount"),er(t,e,"channelCountMode"),er(t,e,"channelInterpretation")},sr=t=>"function"==typeof t.getFloatTimeDomainData,ir=(t,e,n)=>{const s=e[n];void 0!==s&&s!==t[n].value&&(t[n].value=s)},or=t=>{var e;t.start=(e=t.start,(n=0,s=0,i)=>{if("number"==typeof i&&i<0||s<0||n<0)throw new RangeError("The parameters can't be negative.");e.call(t,n,s,i)})},rr=t=>{var e;t.stop=(e=t.stop,(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");e.call(t,n)})},ar=(t,e)=>null===t?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(t*e))))),cr=async(t,e)=>new t(await(t=>new Promise(((e,n)=>{const{port1:s,port2:i}=new MessageChannel;s.onmessage=({data:t})=>{s.close(),i.close(),e(t)},s.onmessageerror=({data:t})=>{s.close(),i.close(),n(t)},i.postMessage(t)})))(e)),lr=(t,e)=>{const n=t.createBiquadFilter();return nr(n,e),ir(n,e,"Q"),ir(n,e,"detune"),ir(n,e,"frequency"),ir(n,e,"gain"),er(n,e,"type"),n},ur=(t,e)=>{const n=t.createChannelSplitter(e.numberOfOutputs);return nr(n,e),(t=>{const e=t.numberOfOutputs;Object.defineProperty(t,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw Zo()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:t=>{if("explicit"!==t)throw Zo()}}),Object.defineProperty(t,"channelInterpretation",{get:()=>"discrete",set:t=>{if("discrete"!==t)throw Zo()}})})(n),n},hr=(t,e)=>(t.connect=e.connect.bind(e),t.disconnect=e.disconnect.bind(e),t),pr=(t,e)=>{const n=t.createDelay(e.maxDelayTime);return nr(n,e),ir(n,e,"delayTime"),n},dr=(t,e)=>{const n=t.createGain();return nr(n,e),ir(n,e,"gain"),n};function fr(t,e){const n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}function mr(t,e){let n=[0,0];for(let o=t.length-1;o>=0;o-=1)i=e,n=[(s=n)[0]*i[0]-s[1]*i[1],s[0]*i[1]+s[1]*i[0]],n[0]+=t[o];var s,i;return n}const _r=(t,e,n,s)=>t.createScriptProcessor(e,n,s),gr=()=>new DOMException("","NotSupportedError"),vr={numberOfChannels:1},yr={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},wr={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},xr={disableNormalization:!1},br={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},Tr={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},Cr=t=>{if(null===t)return!1;const e=t.length;return e%2!=0?0!==t[Math.floor(e/2)]:t[e/2-1]+t[e/2]!==0},Sr=(t,e,n,s)=>{let i=Object.getPrototypeOf(t);for(;!i.hasOwnProperty(e);)i=Object.getPrototypeOf(i);const{get:o,set:r}=Object.getOwnPropertyDescriptor(i,e);Object.defineProperty(t,e,{get:n(o),set:s(r)})},Ar=(t,e,n)=>{try{t.setValueAtTime(e,n)}catch(s){if(9!==s.code)throw s;Ar(t,e,n+1e-7)}},kr=t=>{const e=t.createOscillator();try{e.start(-1)}catch(n){return n instanceof RangeError}return!1},Or=t=>{const e=t.createBuffer(1,1,44100),n=t.createBufferSource();n.buffer=e,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},Mr=t=>{const e=t.createOscillator();try{e.stop(-1)}catch(n){return n instanceof RangeError}return!1},Er=(t,e)=>{const n=e.createGain();t.connect(n);const s=(i=t.disconnect,()=>{i.call(t,n),t.removeEventListener("ended",s)});var i;t.addEventListener("ended",s),hr(t,n),t.stop=(e=>{let s=!1;return(i=0)=>{if(s)try{e.call(t,i)}catch{n.gain.setValueAtTime(0,i)}else e.call(t,i),s=!0}})(t.stop)},Dr=(t,e)=>n=>{const s={value:t};return Object.defineProperties(n,{currentTarget:s,target:s}),"function"==typeof e?e.call(t,n):e.handleEvent.call(t,n)},Ir=(Rr=fo,(t,e,[n,s,i],o)=>{Rr(t[s],[e,n,i],(t=>t[0]===e&&t[1]===n),o)});var Rr;const Nr=(t=>(e,n,[s,i,o],r)=>{const a=e.get(s);void 0===a?e.set(s,new Set([[i,n,o]])):t(a,[i,n,o],(t=>t[0]===i&&t[1]===n),r)})(fo),Vr=(Pr=zi,(t,e,n,s)=>Pr(t[s],(t=>t[0]===e&&t[1]===n)));var Pr;const Fr=new WeakMap,qr=(jr=Fr,t=>{var e;return null!==(e=jr.get(t))&&void 0!==e?e:0});var jr;const Wr=(Br=new Map,Lr=new WeakMap,(t,e)=>{const n=Lr.get(t);if(void 0!==n)return n;const s=Br.get(t);if(void 0!==s)return s;try{const n=e();return n instanceof Promise?(Br.set(t,n),n.catch((()=>!1)).then((e=>(Br.delete(t),Lr.set(t,e),e)))):(Lr.set(t,n),n)}catch{return Lr.set(t,!1),!1}});var Br,Lr;const Ur="undefined"==typeof window?null:window,zr=($r=Wr,Gr=to,(t,e)=>{const n=t.createAnalyser();if(nr(n,e),!(e.maxDecibels>e.minDecibels))throw Gr();return er(n,e,"fftSize"),er(n,e,"maxDecibels"),er(n,e,"minDecibels"),er(n,e,"smoothingTimeConstant"),$r(sr,(()=>sr(n)))||(t=>{t.getFloatTimeDomainData=e=>{const n=new Uint8Array(e.length);t.getByteTimeDomainData(n);const s=Math.max(n.length,t.fftSize);for(let t=0;t<s;t+=1)e[t]=.0078125*(n[t]-128);return e}})(n),n});var $r,Gr;const Xr=(Yr=ao,t=>{const e=Yr(t);if(null===e.renderer)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return e.renderer});var Yr;const Zr=((t,e,n)=>async(s,i,o,r)=>{const a=t(s),c=[...r,s];await Promise.all(a.activeInputs.map(((t,r)=>Array.from(t).filter((([t])=>!c.includes(t))).map((async([t,a])=>{const l=e(t),u=await l.render(t,i,c),h=s.context.destination;n(t)||s===h&&n(s)||u.connect(o,a,r)})))).reduce(((t,e)=>[...t,...e]),[]))})(ao,Xr,So),Hr=(Qr=zr,Jr=To,Kr=Zr,()=>{const t=new WeakMap;return{render(e,n,s){const i=t.get(n);return void 0!==i?Promise.resolve(i):(async(e,n,s)=>{let i=Jr(e);if(!Ji(i,n)){const t={channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,fftSize:i.fftSize,maxDecibels:i.maxDecibels,minDecibels:i.minDecibels,smoothingTimeConstant:i.smoothingTimeConstant};i=Qr(n,t)}return t.set(n,i),await Kr(e,n,i,s),i})(e,n,s)}}});var Qr,Jr,Kr;const ta=(ea=Ri,t=>{const e=ea.get(t);if(void 0===e)throw Zo();return e});var ea;const na=null===(sa=Ur)?null:sa.hasOwnProperty("OfflineAudioContext")?sa.OfflineAudioContext:sa.hasOwnProperty("webkitOfflineAudioContext")?sa.webkitOfflineAudioContext:null;var sa;const ia=(oa=na,t=>null!==oa&&t instanceof oa);var oa;const ra=new WeakMap,aa=(ca=Dr,class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(t,e,n){if(null!==e){let s=this._listeners.get(e);void 0===s&&(s=ca(this,e),"function"==typeof e&&this._listeners.set(e,s)),this._nativeEventTarget.addEventListener(t,s,n)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,e,n){const s=null===e?void 0:this._listeners.get(e);this._nativeEventTarget.removeEventListener(t,void 0===s?null:s,n)}});var ca;const la=(t=>null===t?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null)(Ur),ua=(ha=la,t=>null!==ha&&t instanceof ha);var ha;const pa=(t=>e=>null!==t&&"function"==typeof t.AudioNode&&e instanceof t.AudioNode)(Ur),da=(t=>e=>null!==t&&"function"==typeof t.AudioParam&&e instanceof t.AudioParam)(Ur),fa=((t,e,n,s,i,o,r,a,c,l,u,h,p,d,f)=>class extends l{constructor(e,s,i,o){super(i),this._context=e,this._nativeAudioNode=i;const r=u(e);h(r)&&!0!==n(ko,(()=>ko(r)))&&(t=>{const e=new Map;var n,s;t.connect=(n=t.connect.bind(t),(t,s=0,i=0)=>{const o=Mo(t)?n(t,s,i):n(t,s),r=e.get(t);return void 0===r?e.set(t,[{input:i,output:s}]):r.every((t=>t.input!==i||t.output!==s))&&r.push({input:i,output:s}),o}),t.disconnect=(s=t.disconnect,(n,i,o)=>{if(s.apply(t),void 0===n)e.clear();else if("number"==typeof n)for(const[t,s]of e){const i=s.filter((t=>t.output!==n));0===i.length?e.delete(t):e.set(t,i)}else if(e.has(n))if(void 0===i)e.delete(n);else{const t=e.get(n);if(void 0!==t){const s=t.filter((t=>t.output!==i&&(t.input!==o||void 0===o)));0===s.length?e.delete(n):e.set(n,s)}}for(const[s,r]of e)r.forEach((e=>{Mo(s)?t.connect(s,e.output,e.input):t.connect(s,e.output)}))})})(i),Ei.set(this,i),Ni.set(this,new Set),"closed"!==e.state&&s&&Xi(this),t(this,o,i)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(t){this._nativeAudioNode.channelCount=t}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(t){this._nativeAudioNode.channelCountMode=t}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(t){this._nativeAudioNode.channelInterpretation=t}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(t,n=0,a=0){if(n<0||n>=this._nativeAudioNode.numberOfOutputs)throw i();const l=u(this._context),h=f(l);if(p(t)||d(t))throw o();if(ho(t)){const i=To(t);try{const e=vo(this._nativeAudioNode,i,n,a),s=Ao(this);(h||s)&&this._nativeAudioNode.disconnect(...e),"closed"!==this.context.state&&!s&&Ao(t)&&Xi(t)}catch(_){if(12===_.code)throw o();throw _}if(e(this,t,n,a,h)){const e=c([this],t);Oo(e,s(h))}return t}const m=Co(t);if("playbackRate"===m.name&&1024===m.maxValue)throw r();try{this._nativeAudioNode.connect(m,n),(h||Ao(this))&&this._nativeAudioNode.disconnect(m,n)}catch(_){if(12===_.code)throw o();throw _}if(Eo(this,t,n,h)){const e=c([this],t);Oo(e,s(h))}}disconnect(t,e,n){let s;const r=u(this._context),l=f(r);if(void 0===t)s=((t,e)=>{const n=ao(t),s=[];for(const i of n.outputs)po(i)?Do(t,e,...i):Io(t,e,...i),s.push(i[0]);return n.outputs.clear(),s})(this,l);else if("number"==typeof t){if(t<0||t>=this.numberOfOutputs)throw i();s=((t,e,n)=>{const s=ao(t),i=[];for(const o of s.outputs)o[1]===n&&(po(o)?Do(t,e,...o):Io(t,e,...o),i.push(o[0]),s.outputs.delete(o));return i})(this,l,t)}else{if(void 0!==e&&(e<0||e>=this.numberOfOutputs))throw i();if(ho(t)&&void 0!==n&&(n<0||n>=t.numberOfInputs))throw i();if(s=((t,e,n,s,i)=>{const o=ao(t);return Array.from(o.outputs).filter((t=>!(t[0]!==n||void 0!==s&&t[1]!==s||void 0!==i&&t[2]!==i))).map((n=>(po(n)?Do(t,e,...n):Io(t,e,...n),o.outputs.delete(n),n[0])))})(this,l,t,e,n),0===s.length)throw o()}for(const i of s){const t=c([this],i);Oo(t,a)}}})((ma=Mi,(t,e,n)=>{const s=[];for(let i=0;i<n.numberOfInputs;i+=1)s.push(new Set);ma.set(t,{activeInputs:s,outputs:new Set,passiveInputs:new WeakMap,renderer:e})}),((t,e,n,s,i,o,r,a,c,l,u,h,p)=>{const d=new WeakMap;return(f,m,_,g,v)=>{const{activeInputs:y,passiveInputs:w}=o(m),{outputs:x}=o(f),b=a(f),T=o=>{const a=c(m),l=c(f);if(o){const e=$i(w,f,_,g);t(y,f,e,!1),v||h(f)||n(l,a,_,g),p(m)&&Xi(m)}else{const t=s(y,f,_,g);e(w,g,t,!1),v||h(f)||i(l,a,_,g);const n=r(m);if(0===n)u(m)&&Hi(m,y);else{const t=d.get(m);void 0!==t&&clearTimeout(t),d.set(m,setTimeout((()=>{u(m)&&Hi(m,y)}),1e3*n))}}};return!!l(x,[m,_,g],(t=>t[0]===m&&t[1]===_&&t[2]===g),!0)&&(b.add(T),u(f)?t(y,f,[_,g,T],!0):e(w,g,[f,_,T],!0),!0)}})(Ir,Nr,vo,Vr,bo,ao,qr,Gi,To,fo,oo,So,Ao),Wr,((t,e,n,s,i,o)=>r=>(a,c)=>{const l=t.get(a);if(void 0===l){if(!r&&o(a)){const t=s(a),{outputs:o}=n(a);for(const n of o)if(po(n)){const i=s(n[0]);e(t,i,n[1],n[2])}else{const e=i(n[0]);t.disconnect(e,n[1])}}t.set(a,c)}else t.set(a,l+c)})(Vi,bo,ao,To,Co,oo),to,Ho,gr,((t,e,n,s,i,o,r,a)=>(c,l)=>{const u=e.get(c);if(void 0===u)throw new Error("Missing the expected cycle count.");const h=o(c.context),p=a(h);if(u===l){if(e.delete(c),!p&&r(c)){const e=s(c),{outputs:o}=n(c);for(const n of o)if(po(n)){const i=s(n[0]);t(e,i,n[1],n[2])}else{const t=i(n[0]);e.connect(t,n[1])}}}else e.set(c,u-l)})(vo,Vi,ao,To,Co,ta,oo,ia),((t,e,n)=>function s(i,o){const r=ho(o)?o:n(t,o);if((t=>"delayTime"in t)(r))return[];if(i[0]===r)return[i];if(i.includes(r))return[];const{outputs:a}=e(r);return Array.from(a).map((t=>s([...i,r],t[0]))).reduce(((t,e)=>t.concat(e)),[])})(ra,ao,Ui),aa,ta,ua,pa,da,ia);var ma;const _a=((t,e,n,s,i,o)=>class extends t{constructor(t,n){const r=i(t),c=a(a({},Qi),n),l=s(r,c);super(t,!1,l,o(r)?e():null),this._nativeAnalyserNode=l}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(t){this._nativeAnalyserNode.fftSize=t}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(t){const e=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=t,!(t>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=e,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(t){const e=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=t,!(this._nativeAnalyserNode.maxDecibels>t))throw this._nativeAnalyserNode.minDecibels=e,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(t){this._nativeAnalyserNode.smoothingTimeConstant=t}getByteFrequencyData(t){this._nativeAnalyserNode.getByteFrequencyData(t)}getByteTimeDomainData(t){this._nativeAnalyserNode.getByteTimeDomainData(t)}getFloatFrequencyData(t){this._nativeAnalyserNode.getFloatFrequencyData(t)}getFloatTimeDomainData(t){this._nativeAnalyserNode.getFloatTimeDomainData(t)}})(fa,Hr,to,zr,ta,ia),ga=new WeakSet,va=(t=>null===t?null:t.hasOwnProperty("AudioBuffer")?t.AudioBuffer:null)(Ur),ya=(wa=new Uint32Array(1),t=>(wa[0]=t,wa[0]));var wa;const xa=((t,e)=>n=>{n.copyFromChannel=(s,i,o=0)=>{const r=t(o),a=t(i);if(a>=n.numberOfChannels)throw e();const c=n.length,l=n.getChannelData(a),u=s.length;for(let t=r<0?-r:0;t+r<c&&t<u;t+=1)s[t]=l[t+r]},n.copyToChannel=(s,i,o=0)=>{const r=t(o),a=t(i);if(a>=n.numberOfChannels)throw e();const c=n.length,l=n.getChannelData(a),u=s.length;for(let t=r<0?-r:0;t+r<c&&t<u;t+=1)l[t+r]=s[t]}})(ya,to),ba=(Ta=ya,t=>{var e,n;t.copyFromChannel=(e=t.copyFromChannel,(n,s,i=0)=>{const o=Ta(i),r=Ta(s);if(o<t.length)return e.call(t,n,r,o)}),t.copyToChannel=(n=t.copyToChannel,(e,s,i=0)=>{const o=Ta(i),r=Ta(s);if(o<t.length)return n.call(t,e,r,o)})});var Ta;const Ca=((t,e,n,s,i,o,r,c)=>{let l=null;return class u{constructor(u){if(null===i)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:h,numberOfChannels:p,sampleRate:d}=a(a({},no),u);null===l&&(l=new i(1,1,44100));const f=null!==s&&e(o,o)?new s({length:h,numberOfChannels:p,sampleRate:d}):l.createBuffer(p,h,d);if(0===f.numberOfChannels)throw n();return"function"!=typeof f.copyFromChannel?(r(f),eo(f)):e(Ki,(()=>Ki(f)))||c(f),t.add(f),f}static[Symbol.hasInstance](e){return null!==e&&"object"==typeof e&&Object.getPrototypeOf(e)===u.prototype||t.has(e)}}})(ga,Wr,gr,va,na,(Sa=va,()=>{if(null===Sa)return!1;try{new Sa({length:1,sampleRate:44100})}catch{return!1}return!0}),xa,ba);var Sa;const Aa=(ka=dr,(t,e)=>{const n=ka(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});e.connect(n).connect(t.destination);const s=()=>{e.removeEventListener("ended",s),e.disconnect(n),n.disconnect()};e.addEventListener("ended",s)});var ka;const Oa=(Ma=Xr,Ea=co,Da=So,async(t,e,n,s)=>{const i=Ea(t);await Promise.all(Array.from(i.activeInputs).map((async([t,i])=>{const o=Ma(t),r=await o.render(t,e,s);Da(t)||r.connect(n,i)})))});var Ma,Ea,Da;const Ia=(Ra=Oa,(t,e,n,s)=>Ra(e,t,n,s));var Ra;const Na=((t,e,n,s,i,o,r,a,c,l,u)=>(h,p)=>{const d=h.createBufferSource();return nr(d,p),ir(d,p,"playbackRate"),er(d,p,"buffer"),er(d,p,"loop"),er(d,p,"loopEnd"),er(d,p,"loopStart"),e(n,(()=>n(h)))||(t=>{t.start=(e=>{let n=!1;return(s=0,i=0,o)=>{if(n)throw Zo();e.call(t,s,i,o),n=!0}})(t.start)})(d),e(s,(()=>s(h)))||c(d),e(i,(()=>i(h)))||l(d,h),e(o,(()=>o(h)))||or(d),e(r,(()=>r(h)))||u(d,h),e(a,(()=>a(h)))||rr(d),t(h,d),d})(Aa,Wr,(t=>{const e=t.createBufferSource();e.start();try{e.start()}catch{return!0}return!1}),(t=>{const e=t.createBufferSource(),n=t.createBuffer(1,1,44100);e.buffer=n;try{e.start(0,1)}catch{return!1}return!0}),(t=>{const e=t.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0}),kr,Or,Mr,(t=>{var e;t.start=(e=t.start,(n=0,s=0,i)=>{const o=t.buffer,r=null===o?s:Math.min(o.duration,s);null!==o&&r>o.duration-.5/t.context.sampleRate?e.call(t,n,0,0):e.call(t,n,r,i)})}),(Va=Sr,(t,e)=>{const n=e.createBuffer(1,1,44100);null===t.buffer&&(t.buffer=n),Va(t,"buffer",(e=>()=>{const s=e.call(t);return s===n?null:s}),(e=>s=>e.call(t,null===s?n:s)))}),Er);var Va;const Pa=((t,e)=>(n,s,i,o)=>(t(s).replay(i),e(s,n,i,o)))((t=>e=>{const n=t(e);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer})(co),Oa),Fa=((t,e,n,s,i)=>()=>{const o=new WeakMap;let r=null,a=null;return{set start(t){r=t},set stop(t){a=t},render(c,l,u){const h=o.get(l);return void 0!==h?Promise.resolve(h):(async(c,l,u)=>{let h=n(c);const p=Ji(h,l);if(!p){const t={buffer:h.buffer,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,loop:h.loop,loopEnd:h.loopEnd,loopStart:h.loopStart,playbackRate:h.playbackRate.value};h=e(l,t),null!==r&&h.start(...r),null!==a&&h.stop(a)}return o.set(l,h),p?await t(l,c.playbackRate,h.playbackRate,u):await s(l,c.playbackRate,h.playbackRate,u),await i(c,l,h,u),h})(c,l,u)}}})(Ia,Na,To,Pa,Zr),qa=((t,e,n,s,i,o,r,a,c,l,u,h,p)=>(d,f,m,_=null,g=null)=>{const v=new ki(m.defaultValue),y=f?s(v):null,w={get defaultValue(){return m.defaultValue},get maxValue(){return null===_?m.maxValue:_},get minValue(){return null===g?m.minValue:g},get value(){return m.value},set value(t){m.value=t,w.setValueAtTime(t,d.context.currentTime)},cancelAndHoldAtTime(t){if("function"==typeof m.cancelAndHoldAtTime)null===y&&v.flush(d.context.currentTime),v.add(i(t)),m.cancelAndHoldAtTime(t);else{const e=Array.from(v).pop();null===y&&v.flush(d.context.currentTime),v.add(i(t));const n=Array.from(v).pop();m.cancelScheduledValues(t),e!==n&&void 0!==n&&("exponentialRampToValue"===n.type?m.exponentialRampToValueAtTime(n.value,n.endTime):"linearRampToValue"===n.type?m.linearRampToValueAtTime(n.value,n.endTime):"setValue"===n.type?m.setValueAtTime(n.value,n.startTime):"setValueCurve"===n.type&&m.setValueCurveAtTime(n.values,n.startTime,n.duration))}return w},cancelScheduledValues:t=>(null===y&&v.flush(d.context.currentTime),v.add(o(t)),m.cancelScheduledValues(t),w),exponentialRampToValueAtTime(t,e){if(0===t)throw new RangeError;if(!Number.isFinite(e)||e<0)throw new RangeError;return null===y&&v.flush(d.context.currentTime),v.add(r(t,e)),m.exponentialRampToValueAtTime(t,e),w},linearRampToValueAtTime:(t,e)=>(null===y&&v.flush(d.context.currentTime),v.add(a(t,e)),m.linearRampToValueAtTime(t,e),w),setTargetAtTime:(t,e,n)=>(null===y&&v.flush(d.context.currentTime),v.add(c(t,e,n)),m.setTargetAtTime(t,e,n),w),setValueAtTime:(t,e)=>(null===y&&v.flush(d.context.currentTime),v.add(l(t,e)),m.setValueAtTime(t,e),w),setValueCurveAtTime(t,e,n){const s=t instanceof Float32Array?t:new Float32Array(t);if(null!==h&&"webkitAudioContext"===h.name){const t=e+n,i=d.context.sampleRate,o=Math.ceil(e*i),r=Math.floor(t*i),a=r-o,c=new Float32Array(a);for(let u=0;u<a;u+=1){const t=(s.length-1)/n*((o+u)/i-e),r=Math.floor(t),a=Math.ceil(t);c[u]=r===a?s[r]:(1-(t-r))*s[r]+(1-(a-t))*s[a]}null===y&&v.flush(d.context.currentTime),v.add(u(c,e,n)),m.setValueCurveAtTime(c,e,n);const l=r/i;l<t&&p(w,c[c.length-1],l),p(w,s[s.length-1],t)}else null===y&&v.flush(d.context.currentTime),v.add(u(s,e,n)),m.setValueCurveAtTime(s,e,n);return w}};return n.set(w,m),e.set(w,d),t(w,y),w})((ja=Di,(t,e)=>{ja.set(t,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:e})}),ra,Ii,(t=>({replay(e){for(const n of t)if("exponentialRampToValue"===n.type){const{endTime:t,value:s}=n;e.exponentialRampToValueAtTime(s,t)}else if("linearRampToValue"===n.type){const{endTime:t,value:s}=n;e.linearRampToValueAtTime(s,t)}else if("setTarget"===n.type){const{startTime:t,target:s,timeConstant:i}=n;e.setTargetAtTime(s,t,i)}else if("setValue"===n.type){const{startTime:t,value:s}=n;e.setValueAtTime(s,t)}else{if("setValueCurve"!==n.type)throw new Error("Can't apply an unknown automation.");{const{duration:t,startTime:s,values:i}=n;e.setValueCurveAtTime(i,s,t)}}}})),(t=>({cancelTime:t,type:"cancelAndHold"})),(t=>({cancelTime:t,type:"cancelScheduledValues"})),((t,e)=>({endTime:e,type:"exponentialRampToValue",value:t})),((t,e)=>({endTime:e,type:"linearRampToValue",value:t})),((t,e,n)=>({startTime:e,target:t,timeConstant:n,type:"setTarget"})),ui,hi,la,Ar);var ja;const Wa=((t,e,n,s,i,o,r,c)=>class extends t{constructor(t,s){const c=o(t),l=a(a({},ro),s),u=i(c,l),h=r(c),p=h?e():null;super(t,!1,u,p),this._audioBufferSourceNodeRenderer=p,this._isBufferNullified=!1,this._isBufferSet=null!==l.buffer,this._nativeAudioBufferSourceNode=u,this._onended=null,this._playbackRate=n(this,h,u.playbackRate,io,so)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(t){if(this._nativeAudioBufferSourceNode.buffer=t,null!==t){if(this._isBufferSet)throw s();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(t){this._nativeAudioBufferSourceNode.loop=t}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(t){this._nativeAudioBufferSourceNode.loopEnd=t}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(t){this._nativeAudioBufferSourceNode.loopStart=t}get onended(){return this._onended}set onended(t){const e="function"==typeof t?c(this,t):null;this._nativeAudioBufferSourceNode.onended=e;const n=this._nativeAudioBufferSourceNode.onended;this._onended=null!==n&&n===e?t:n}get playbackRate(){return this._playbackRate}start(t=0,e=0,n){if(this._nativeAudioBufferSourceNode.start(t,e,n),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.start=void 0===n?[t,e]:[t,e,n]),"closed"!==this.context.state){Xi(this);const t=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",t),oo(this)&&Zi(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",t)}}stop(t=0){this._nativeAudioBufferSourceNode.stop(t),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.stop=t)}})(fa,Fa,qa,Zo,Na,ta,ia,Dr),Ba=((t,e,n,s,i,o,r,a)=>class extends t{constructor(t,n){const s=o(t),c=r(s),l=i(s,n,c);super(t,!1,l,c?e(a):null),this._isNodeOfNativeOfflineAudioContext=c,this._nativeAudioDestinationNode=l}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(t){if(this._isNodeOfNativeOfflineAudioContext)throw s();if(t>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=t}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(t){if(this._isNodeOfNativeOfflineAudioContext)throw s();this._nativeAudioDestinationNode.channelCountMode=t}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}})(fa,(t=>{let e=null;return{render:(n,s,i)=>(null===e&&(e=(async(e,n,s)=>{const i=n.destination;return await t(e,n,i,s),i})(n,s,i)),e)}}),to,Zo,((t,e)=>(n,s,i)=>{const o=n.destination;if(o.channelCount!==s)try{o.channelCount=s}catch{}i&&"explicit"!==o.channelCountMode&&(o.channelCountMode="explicit"),0===o.maxChannelCount&&Object.defineProperty(o,"maxChannelCount",{value:s});const r=t(n,{channelCount:s,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,gain:1});return e(r,"channelCount",(t=>()=>t.call(r)),(t=>e=>{t.call(r,e);try{o.channelCount=e}catch(n){if(e>o.maxChannelCount)throw n}})),e(r,"channelCountMode",(t=>()=>t.call(r)),(t=>e=>{t.call(r,e),o.channelCountMode=e})),e(r,"channelInterpretation",(t=>()=>t.call(r)),(t=>e=>{t.call(r,e),o.channelInterpretation=e})),Object.defineProperty(r,"maxChannelCount",{get:()=>o.maxChannelCount}),r.connect(o),r})(dr,Sr),ta,ia,Zr),La=((t,e,n,s,i)=>()=>{const o=new WeakMap;return{render(r,a,c){const l=o.get(a);return void 0!==l?Promise.resolve(l):(async(r,a,c)=>{let l=n(r);const u=Ji(l,a);if(!u){const t={Q:l.Q.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,detune:l.detune.value,frequency:l.frequency.value,gain:l.gain.value,type:l.type};l=e(a,t)}return o.set(a,l),u?(await t(a,r.Q,l.Q,c),await t(a,r.detune,l.detune,c),await t(a,r.frequency,l.frequency,c),await t(a,r.gain,l.gain,c)):(await s(a,r.Q,l.Q,c),await s(a,r.detune,l.detune,c),await s(a,r.frequency,l.frequency,c),await s(a,r.gain,l.gain,c)),await i(r,a,l,c),l})(r,a,c)}}})(Ia,lr,To,Pa,Zr),Ua=(t=>(e,n)=>t.set(e,n))(Fr),za=($a=fa,Ga=qa,Xa=La,Ya=Ho,Za=lr,Ha=ta,Qa=ia,Ja=Ua,class extends $a{constructor(t,e){const n=Ha(t),s=a(a({},jo),e),i=Za(n,s),o=Qa(n);super(t,!1,i,o?Xa():null),this._Q=Ga(this,o,i.Q,io,so),this._detune=Ga(this,o,i.detune,1200*Math.log2(io),-1200*Math.log2(io)),this._frequency=Ga(this,o,i.frequency,t.sampleRate/2,0),this._gain=Ga(this,o,i.gain,40*Math.log10(io),so),this._nativeBiquadFilterNode=i,Ja(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(t){this._nativeBiquadFilterNode.type=t}getFrequencyResponse(t,e,n){try{this._nativeBiquadFilterNode.getFrequencyResponse(t,e,n)}catch(s){if(11===s.code)throw Ya();throw s}if(t.length!==e.length||e.length!==n.length)throw Ya()}});var $a,Ga,Xa,Ya,Za,Ha,Qa,Ja;const Ka=((t,e)=>(n,s,i)=>{const o=new Set;var r,a;return n.connect=(r=n.connect,(i,a=0,c=0)=>{const l=0===o.size;if(e(i))return r.call(n,i,a,c),t(o,[i,a,c],(t=>t[0]===i&&t[1]===a&&t[2]===c),!0),l&&s(),i;r.call(n,i,a),t(o,[i,a],(t=>t[0]===i&&t[1]===a),!0),l&&s()}),n.disconnect=(a=n.disconnect,(t,s,r)=>{const c=o.size>0;if(void 0===t)a.apply(n),o.clear();else if("number"==typeof t){a.call(n,t);for(const e of o)e[1]===t&&o.delete(e)}else{e(t)?a.call(n,t,s,r):a.call(n,t,s);for(const e of o)e[0]!==t||void 0!==s&&e[1]!==s||void 0!==r&&e[2]!==r||o.delete(e)}const l=0===o.size;c&&l&&i()}),n})(fo,pa);var tc,ec;const nc=((t,e)=>(n,s)=>{const i=n.createChannelMerger(s.numberOfInputs);return null!==t&&"webkitAudioContext"===t.name&&e(n,i),nr(i,s),i})(la,(tc=Zo,ec=Ka,(t,e)=>{e.channelCount=1,e.channelCountMode="explicit",Object.defineProperty(e,"channelCount",{get:()=>1,set:()=>{throw tc()}}),Object.defineProperty(e,"channelCountMode",{get:()=>"explicit",set:()=>{throw tc()}});const n=t.createBufferSource();ec(e,(()=>{const t=e.numberOfInputs;for(let s=0;s<t;s+=1)n.connect(e,0,s)}),(()=>n.disconnect(e)))})),sc=((t,e,n,s,i)=>class extends t{constructor(t,o){const r=s(t),c=a(a({},Wo),o);super(t,!1,n(r,c),i(r)?e():null)}})(fa,((t,e,n)=>()=>{const s=new WeakMap;return{render(i,o,r){const a=s.get(o);return void 0!==a?Promise.resolve(a):(async(i,o,r)=>{let a=e(i);if(!Ji(a,o)){const e={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfInputs:a.numberOfInputs};a=t(o,e)}return s.set(o,a),await n(i,o,a,r),a})(i,o,r)}}})(nc,To,Zr),nc,ta,ia),ic=((t,e,n,s,i,o)=>class extends t{constructor(t,r){const c=s(t),l=o(a(a({},Bo),r));super(t,!1,n(c,l),i(c)?e():null)}})(fa,((t,e,n)=>()=>{const s=new WeakMap;return{render(i,o,r){const a=s.get(o);return void 0!==a?Promise.resolve(a):(async(i,o,r)=>{let a=e(i);if(!Ji(a,o)){const e={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfOutputs:a.numberOfOutputs};a=t(o,e)}return s.set(o,a),await n(i,o,a,r),a})(i,o,r)}}})(ur,To,Zr),ur,ta,ia,(t=>c(a({},t),{channelCount:t.numberOfOutputs}))),oc=((t,e,n,s,i)=>(o,r)=>{if(void 0===o.createConstantSource)return n(o,r);const a=o.createConstantSource();return nr(a,r),ir(a,r,"offset"),e(s,(()=>s(o)))||or(a),e(i,(()=>i(o)))||rr(a),t(o,a),a})(Aa,Wr,((t,e,n,s)=>(i,o)=>{var r=o,{offset:u}=r,h=l(r,["offset"]);const p=i.createBuffer(1,2,44100),d=e(i,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),f=n(i,c(a({},h),{gain:u})),m=p.getChannelData(0);m[0]=1,m[1]=1,d.buffer=p,d.loop=!0;const _={get bufferSize(){},get channelCount(){return f.channelCount},set channelCount(t){f.channelCount=t},get channelCountMode(){return f.channelCountMode},set channelCountMode(t){f.channelCountMode=t},get channelInterpretation(){return f.channelInterpretation},set channelInterpretation(t){f.channelInterpretation=t},get context(){return f.context},get inputs(){return[]},get numberOfInputs(){return d.numberOfInputs},get numberOfOutputs(){return f.numberOfOutputs},get offset(){return f.gain},get onended(){return d.onended},set onended(t){d.onended=t},addEventListener:(...t)=>d.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>d.dispatchEvent(t[0]),removeEventListener:(...t)=>d.removeEventListener(t[0],t[1],t[2]),start(t=0){d.start.call(d,t)},stop(t=0){d.stop.call(d,t)}};return t(i,d),s(hr(_,f),(()=>d.connect(f)),(()=>d.disconnect(f)))})(Aa,Na,dr,Ka),kr,Mr),rc=((t,e,n,s,i,o,r)=>class extends t{constructor(t,r){const c=i(t),l=a(a({},Lo),r),u=s(c,l),h=o(c),p=h?n():null;super(t,!1,u,p),this._constantSourceNodeRenderer=p,this._nativeConstantSourceNode=u,this._offset=e(this,h,u.offset,io,so),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(t){const e="function"==typeof t?r(this,t):null;this._nativeConstantSourceNode.onended=e;const n=this._nativeConstantSourceNode.onended;this._onended=null!==n&&n===e?t:n}start(t=0){if(this._nativeConstantSourceNode.start(t),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.start=t),"closed"!==this.context.state){Xi(this);const t=()=>{this._nativeConstantSourceNode.removeEventListener("ended",t),oo(this)&&Zi(this)};this._nativeConstantSourceNode.addEventListener("ended",t)}}stop(t=0){this._nativeConstantSourceNode.stop(t),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.stop=t)}})(fa,qa,((t,e,n,s,i)=>()=>{const o=new WeakMap;let r=null,a=null;return{set start(t){r=t},set stop(t){a=t},render(c,l,u){const h=o.get(l);return void 0!==h?Promise.resolve(h):(async(c,l,u)=>{let h=n(c);const p=Ji(h,l);if(!p){const t={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,offset:h.offset.value};h=e(l,t),null!==r&&h.start(r),null!==a&&h.stop(a)}return o.set(l,h),p?await t(l,c.offset,h.offset,u):await s(l,c.offset,h.offset,u),await i(c,l,h,u),h})(c,l,u)}}})(Ia,oc,To,Pa,Zr),oc,ta,ia,Dr),ac=((t,e)=>(n,s)=>{const i=n.createConvolver();if(nr(i,s),s.disableNormalization===i.normalize&&(i.normalize=!s.disableNormalization),er(i,s,"buffer"),s.channelCount>2)throw t();if(e(i,"channelCount",(t=>()=>t.call(i)),(e=>n=>{if(n>2)throw t();return e.call(i,n)})),"max"===s.channelCountMode)throw t();return e(i,"channelCountMode",(t=>()=>t.call(i)),(e=>n=>{if("max"===n)throw t();return e.call(i,n)})),i})(gr,Sr),cc=((t,e,n,s,i,o)=>class extends t{constructor(t,r){const c=s(t),l=a(a({},Uo),r),u=n(c,l);super(t,!1,u,i(c)?e():null),this._isBufferNullified=!1,this._nativeConvolverNode=u,null!==l.buffer&&o(this,l.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(t){if(this._nativeConvolverNode.buffer=t,null===t&&null!==this._nativeConvolverNode.buffer){const t=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=t.createBuffer(1,1,44100),this._isBufferNullified=!0,o(this,0)}else this._isBufferNullified=!1,o(this,null===this._nativeConvolverNode.buffer?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(t){this._nativeConvolverNode.normalize=t}})(fa,((t,e,n)=>()=>{const s=new WeakMap;return{render(i,o,r){const a=s.get(o);return void 0!==a?Promise.resolve(a):(async(i,o,r)=>{let a=e(i);if(!Ji(a,o)){const e={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize};a=t(o,e)}return s.set(o,a),go(a)?await n(i,o,a.inputs[0],r):await n(i,o,a,r),a})(i,o,r)}}})(ac,To,Zr),ac,ta,ia,Ua),lc=((t,e,n,s,i,o,r)=>class extends t{constructor(t,c){const l=i(t),u=a(a({},$o),c),h=s(l,u),p=o(l);super(t,!1,h,p?n(u.maxDelayTime):null),this._delayTime=e(this,p,h.delayTime),r(this,u.maxDelayTime)}get delayTime(){return this._delayTime}})(fa,qa,((t,e,n,s,i)=>o=>{const r=new WeakMap;return{render(a,c,l){const u=r.get(c);return void 0!==u?Promise.resolve(u):(async(a,c,l)=>{let u=n(a);const h=Ji(u,c);if(!h){const t={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,delayTime:u.delayTime.value,maxDelayTime:o};u=e(c,t)}return r.set(c,u),h?await t(c,a.delayTime,u.delayTime,l):await s(c,a.delayTime,u.delayTime,l),await i(a,c,u,l),u})(a,c,l)}}})(Ia,pr,To,Pa,Zr),pr,ta,ia,Ua),uc=(hc=gr,(t,e)=>{const n=t.createDynamicsCompressor();if(nr(n,e),e.channelCount>2)throw hc();if("max"===e.channelCountMode)throw hc();return ir(n,e,"attack"),ir(n,e,"knee"),ir(n,e,"ratio"),ir(n,e,"release"),ir(n,e,"threshold"),n});var hc;const pc=((t,e,n,s,i,o,r,c)=>class extends t{constructor(t,i){const l=o(t),u=a(a({},Xo),i),h=s(l,u),p=r(l);super(t,!1,h,p?n():null),this._attack=e(this,p,h.attack),this._knee=e(this,p,h.knee),this._nativeDynamicsCompressorNode=h,this._ratio=e(this,p,h.ratio),this._release=e(this,p,h.release),this._threshold=e(this,p,h.threshold),c(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(t){const e=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=t,t>2)throw this._nativeDynamicsCompressorNode.channelCount=e,i()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(t){const e=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=t,"max"===t)throw this._nativeDynamicsCompressorNode.channelCountMode=e,i()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return"number"==typeof this._nativeDynamicsCompressorNode.reduction.value?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}})(fa,qa,((t,e,n,s,i)=>()=>{const o=new WeakMap;return{render(r,a,c){const l=o.get(a);return void 0!==l?Promise.resolve(l):(async(r,a,c)=>{let l=n(r);const u=Ji(l,a);if(!u){const t={attack:l.attack.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,knee:l.knee.value,ratio:l.ratio.value,release:l.release.value,threshold:l.threshold.value};l=e(a,t)}return o.set(a,l),u?(await t(a,r.attack,l.attack,c),await t(a,r.knee,l.knee,c),await t(a,r.ratio,l.ratio,c),await t(a,r.release,l.release,c),await t(a,r.threshold,l.threshold,c)):(await s(a,r.attack,l.attack,c),await s(a,r.knee,l.knee,c),await s(a,r.ratio,l.ratio,c),await s(a,r.release,l.release,c),await s(a,r.threshold,l.threshold,c)),await i(r,a,l,c),l})(r,a,c)}}})(Ia,uc,To,Pa,Zr),uc,gr,ta,ia,Ua),dc=((t,e,n,s,i,o)=>class extends t{constructor(t,r){const c=i(t),l=a(a({},Yo),r),u=s(c,l),h=o(c);super(t,!1,u,h?n():null),this._gain=e(this,h,u.gain,io,so)}get gain(){return this._gain}})(fa,qa,((t,e,n,s,i)=>()=>{const o=new WeakMap;return{render(r,a,c){const l=o.get(a);return void 0!==l?Promise.resolve(l):(async(r,a,c)=>{let l=n(r);const u=Ji(l,a);if(!u){const t={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,gain:l.gain.value};l=e(a,t)}return o.set(a,l),u?await t(a,r.gain,l.gain,c):await s(a,r.gain,l.gain,c),await i(r,a,l,c),l})(r,a,c)}}})(Ia,dr,To,Pa,Zr),dr,ta,ia),fc=((t,e,n,s)=>(i,o,{channelCount:r,channelCountMode:a,channelInterpretation:c,feedback:l,feedforward:u})=>{const h=ar(o,i.sampleRate),p=l instanceof Float64Array?l:new Float64Array(l),d=u instanceof Float64Array?u:new Float64Array(u),f=p.length,m=d.length,_=Math.min(f,m);if(0===f||f>20)throw s();if(0===p[0])throw e();if(0===m||m>20)throw s();if(0===d[0])throw e();if(1!==p[0]){for(let t=0;t<m;t+=1)d[t]/=p[0];for(let t=1;t<f;t+=1)p[t]/=p[0]}const g=n(i,h,r,r);g.channelCount=r,g.channelCountMode=a,g.channelInterpretation=c;const v=[],y=[],w=[];for(let t=0;t<r;t+=1){v.push(0);const t=new Float32Array(32),e=new Float32Array(32);t.fill(0),e.fill(0),y.push(t),w.push(e)}g.onaudioprocess=t=>{const e=t.inputBuffer,n=t.outputBuffer,s=e.numberOfChannels;for(let i=0;i<s;i+=1){const t=e.getChannelData(i),s=n.getChannelData(i);v[i]=Jo(p,f,d,m,_,y[i],w[i],v[i],32,t,s)}};const x=i.sampleRate/2;return hr({get bufferSize(){return h},get channelCount(){return g.channelCount},set channelCount(t){g.channelCount=t},get channelCountMode(){return g.channelCountMode},set channelCountMode(t){g.channelCountMode=t},get channelInterpretation(){return g.channelInterpretation},set channelInterpretation(t){g.channelInterpretation=t},get context(){return g.context},get inputs(){return[g]},get numberOfInputs(){return g.numberOfInputs},get numberOfOutputs(){return g.numberOfOutputs},addEventListener:(...t)=>g.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>g.dispatchEvent(t[0]),getFrequencyResponse(e,n,s){if(e.length!==n.length||n.length!==s.length)throw t();const i=e.length;for(let t=0;t<i;t+=1){const i=-Math.PI*(e[t]/x),o=[Math.cos(i),Math.sin(i)],r=fr(mr(d,o),mr(p,o));n[t]=Math.sqrt(r[0]*r[0]+r[1]*r[1]),s[t]=Math.atan2(r[1],r[0])}},removeEventListener:(...t)=>g.removeEventListener(t[0],t[1],t[2])},g)})(Ho,Zo,_r,gr),mc=((t,e,n,s)=>i=>t(tr,(()=>tr(i)))?Promise.resolve(t(s,s)).then((t=>{if(!t){const t=n(i,512,0,1);i.oncomplete=()=>{t.onaudioprocess=null,t.disconnect()},t.onaudioprocess=()=>i.currentTime,t.connect(i.destination)}return i.startRendering()})):new Promise((t=>{const n=e(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});i.oncomplete=e=>{n.disconnect(),t(e.renderedBuffer)},n.connect(i.destination),i.startRendering()})))(Wr,dr,_r,((t,e)=>()=>{if(null===e)return Promise.resolve(!1);const n=new e(1,1,44100),s=t(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise((t=>{n.oncomplete=()=>{s.disconnect(),t(0!==n.currentTime)},n.startRendering()}))})(dr,na)),_c=((t,e,n,s,i)=>(o,r)=>{const a=new WeakMap;let c=null;const l=async(l,u,h)=>{let p=null,d=e(l);const f=Ji(d,u);if(void 0===u.createIIRFilter?p=t(u,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):f||(d=u.createIIRFilter(r,o)),a.set(u,null===p?d:p),null!==p){if(null===c){if(null===n)throw new Error("Missing the native OfflineAudioContext constructor.");const t=new n(l.context.destination.channelCount,l.context.length,u.sampleRate);c=(async()=>{await s(l,t,t.destination,h);return((t,e,n,s)=>{const i=n instanceof Float64Array?n:new Float64Array(n),o=s instanceof Float64Array?s:new Float64Array(s),r=i.length,a=o.length,c=Math.min(r,a);if(1!==i[0]){for(let t=0;t<r;t+=1)o[t]/=i[0];for(let t=1;t<a;t+=1)i[t]/=i[0]}const l=new Float32Array(32),u=new Float32Array(32),h=e.createBuffer(t.numberOfChannels,t.length,t.sampleRate),p=t.numberOfChannels;for(let d=0;d<p;d+=1){const e=t.getChannelData(d),n=h.getChannelData(d);l.fill(0),u.fill(0),Jo(i,r,o,a,c,l,u,0,32,e,n)}return h})(await i(t),u,o,r)})()}const t=await c;return p.buffer=t,p.start(0),p}return await s(l,u,d,h),d};return{render(t,e,n){const s=a.get(e);return void 0!==s?Promise.resolve(s):l(t,e,n)}}})(Na,To,na,Zr,mc);var gc;const vc=((t,e,n,s,i,o)=>class extends t{constructor(t,r){const c=s(t),l=i(c),u=a(a({},Qo),r),h=e(c,l?null:t.baseLatency,u);super(t,!1,h,l?n(u.feedback,u.feedforward):null),(t=>{var e;t.getFrequencyResponse=(e=t.getFrequencyResponse,(n,s,i)=>{if(n.length!==s.length||s.length!==i.length)throw Ho();return e.call(t,n,s,i)})})(h),this._nativeIIRFilterNode=h,o(this,1)}getFrequencyResponse(t,e,n){return this._nativeIIRFilterNode.getFrequencyResponse(t,e,n)}})(fa,(gc=fc,(t,e,n)=>{if(void 0===t.createIIRFilter)return gc(t,e,n);const s=t.createIIRFilter(n.feedforward,n.feedback);return nr(s,n),s}),_c,ta,ia,Ua),yc=((t,e,n,s,i)=>(o,r)=>{const a=r.listener,{forwardX:c,forwardY:l,forwardZ:u,positionX:h,positionY:p,positionZ:d,upX:f,upY:m,upZ:_}=void 0===a.forwardX?(()=>{const c=e(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),l=i(r),u=s(r,256,9,0),h=(e,s)=>{const i=n(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:s});return i.connect(c,0,e),i.start(),Object.defineProperty(i.offset,"defaultValue",{get:()=>s}),t({context:o},l,i.offset,io,so)};let p=[0,0,-1,0,1,0],d=[0,0,0];return u.onaudioprocess=({inputBuffer:t})=>{const e=[t.getChannelData(0)[0],t.getChannelData(1)[0],t.getChannelData(2)[0],t.getChannelData(3)[0],t.getChannelData(4)[0],t.getChannelData(5)[0]];e.some(((t,e)=>t!==p[e]))&&(a.setOrientation(...e),p=e);const n=[t.getChannelData(6)[0],t.getChannelData(7)[0],t.getChannelData(8)[0]];n.some(((t,e)=>t!==d[e]))&&(a.setPosition(...n),d=n)},c.connect(u),{forwardX:h(0,0),forwardY:h(1,0),forwardZ:h(2,-1),positionX:h(6,0),positionY:h(7,0),positionZ:h(8,0),upX:h(3,0),upY:h(4,1),upZ:h(5,0)}})():a;return{get forwardX(){return c},get forwardY(){return l},get forwardZ(){return u},get positionX(){return h},get positionY(){return p},get positionZ(){return d},get upX(){return f},get upY(){return m},get upZ(){return _}}})(qa,nc,oc,_r,ia),wc=new WeakMap,xc=((t,e,n,s,i,o)=>class extends n{constructor(n,o){super(n),this._nativeContext=n,Ri.set(this,n),s(n)&&i.set(n,new Set),this._destination=new t(this,o),this._listener=e(this,n),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(t){const e="function"==typeof t?o(this,t):null;this._nativeContext.onstatechange=e;const n=this._nativeContext.onstatechange;this._onstatechange=null!==n&&n===e?t:n}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}})(Ba,yc,aa,ia,wc,Dr),bc=((t,e,n,s,i,o)=>(r,a)=>{const c=r.createOscillator();return nr(c,a),ir(c,a,"detune"),ir(c,a,"frequency"),void 0!==a.periodicWave?c.setPeriodicWave(a.periodicWave):er(c,a,"type"),e(n,(()=>n(r)))||or(c),e(s,(()=>s(r)))||o(c,r),e(i,(()=>i(r)))||rr(c),t(r,c),c})(Aa,Wr,kr,Or,Mr,Er),Tc=((t,e,n,s,i,o,r)=>class extends t{constructor(t,r){const c=i(t),l=a(a({},yr),r),u=n(c,l),h=o(c),p=h?s():null,d=t.sampleRate/2;super(t,!1,u,p),this._detune=e(this,h,u.detune,153600,-153600),this._frequency=e(this,h,u.frequency,d,-d),this._nativeOscillatorNode=u,this._onended=null,this._oscillatorNodeRenderer=p,null!==this._oscillatorNodeRenderer&&void 0!==l.periodicWave&&(this._oscillatorNodeRenderer.periodicWave=l.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(t){const e="function"==typeof t?r(this,t):null;this._nativeOscillatorNode.onended=e;const n=this._nativeOscillatorNode.onended;this._onended=null!==n&&n===e?t:n}get type(){return this._nativeOscillatorNode.type}set type(t){this._nativeOscillatorNode.type=t,null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(t){this._nativeOscillatorNode.setPeriodicWave(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=t)}start(t=0){if(this._nativeOscillatorNode.start(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.start=t),"closed"!==this.context.state){Xi(this);const t=()=>{this._nativeOscillatorNode.removeEventListener("ended",t),oo(this)&&Zi(this)};this._nativeOscillatorNode.addEventListener("ended",t)}}stop(t=0){this._nativeOscillatorNode.stop(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.stop=t)}})(fa,qa,bc,((t,e,n,s,i)=>()=>{const o=new WeakMap;let r=null,a=null,c=null;return{set periodicWave(t){r=t},set start(t){a=t},set stop(t){c=t},render(l,u,h){const p=o.get(u);return void 0!==p?Promise.resolve(p):(async(l,u,h)=>{let p=n(l);const d=Ji(p,u);if(!d){const t={channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,detune:p.detune.value,frequency:p.frequency.value,periodicWave:null===r?void 0:r,type:p.type};p=e(u,t),null!==a&&p.start(a),null!==c&&p.stop(c)}return o.set(u,p),d?(await t(u,l.detune,p.detune,h),await t(u,l.frequency,p.frequency,h)):(await s(u,l.detune,p.detune,h),await s(u,l.frequency,p.frequency,h)),await i(l,u,p,h),p})(l,u,h)}}})(Ia,bc,To,Pa,Zr),ta,ia,Dr),Cc=(Sc=Na,(t,e)=>{const n=Sc(t,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),s=t.createBuffer(1,2,44100);return n.buffer=s,n.loop=!0,n.connect(e),n.start(),()=>{n.stop(),n.disconnect(e)}});var Sc;const Ac=((t,e,n,s,i)=>(o,r)=>{var u=r,{curve:h,oversample:p}=u,d=l(u,["curve","oversample"]);const f=o.createWaveShaper(),m=o.createWaveShaper();nr(f,d),nr(m,d);const _=n(o,c(a({},d),{gain:1})),g=n(o,c(a({},d),{gain:-1})),v=n(o,c(a({},d),{gain:1})),y=n(o,c(a({},d),{gain:-1}));let w=null,x=!1,b=null;const T={get bufferSize(){},get channelCount(){return f.channelCount},set channelCount(t){_.channelCount=t,g.channelCount=t,f.channelCount=t,v.channelCount=t,m.channelCount=t,y.channelCount=t},get channelCountMode(){return f.channelCountMode},set channelCountMode(t){_.channelCountMode=t,g.channelCountMode=t,f.channelCountMode=t,v.channelCountMode=t,m.channelCountMode=t,y.channelCountMode=t},get channelInterpretation(){return f.channelInterpretation},set channelInterpretation(t){_.channelInterpretation=t,g.channelInterpretation=t,f.channelInterpretation=t,v.channelInterpretation=t,m.channelInterpretation=t,y.channelInterpretation=t},get context(){return f.context},get curve(){return b},set curve(n){if(null!==n&&n.length<2)throw e();if(null===n)f.curve=n,m.curve=n;else{const t=n.length,e=new Float32Array(t+2-t%2),s=new Float32Array(t+2-t%2);e[0]=n[0],s[0]=-n[t-1];const i=Math.ceil((t+1)/2),o=(t+1)/2-1;for(let r=1;r<i;r+=1){const a=r/i*o,c=Math.floor(a),l=Math.ceil(a);e[r]=c===l?n[c]:(1-(a-c))*n[c]+(1-(l-a))*n[l],s[r]=c===l?-n[t-1-c]:-(1-(a-c))*n[t-1-c]-(1-(l-a))*n[t-1-l]}e[i]=t%2==1?n[i-1]:(n[i-2]+n[i-1])/2,f.curve=e,m.curve=s}b=n,x&&(s(b)&&null===w?w=t(o,_):null!==w&&(w(),w=null))},get inputs(){return[_]},get numberOfInputs(){return f.numberOfInputs},get numberOfOutputs(){return f.numberOfOutputs},get oversample(){return f.oversample},set oversample(t){f.oversample=t,m.oversample=t},addEventListener:(...t)=>_.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>_.dispatchEvent(t[0]),removeEventListener:(...t)=>_.removeEventListener(t[0],t[1],t[2])};null!==h&&(T.curve=h instanceof Float32Array?h:new Float32Array(h)),p!==T.oversample&&(T.oversample=p);return i(hr(T,v),(()=>{_.connect(f).connect(v),_.connect(g).connect(m).connect(y).connect(v),x=!0,s(b)&&(w=t(o,_))}),(()=>{_.disconnect(f),f.disconnect(v),_.disconnect(g),g.disconnect(m),m.disconnect(y),y.disconnect(v),x=!1,null!==w&&(w(),w=null)}))})(Cc,Zo,dr,Cr,Ka),kc=((t,e,n,s,i,o,r)=>(a,c)=>{const l=a.createWaveShaper();if(null!==o&&"webkitAudioContext"===o.name&&void 0===a.createGain().gain.automationRate)return n(a,c);nr(l,c);const u=null===c.curve||c.curve instanceof Float32Array?c.curve:new Float32Array(c.curve);if(null!==u&&u.length<2)throw e();er(l,{curve:u},"curve"),er(l,c,"oversample");let h=null,p=!1;r(l,"curve",(t=>()=>t.call(l)),(e=>n=>(e.call(l,n),p&&(s(n)&&null===h?h=t(a,l):s(n)||null===h||(h(),h=null)),n)));return i(l,(()=>{p=!0,s(l.curve)&&(h=t(a,l))}),(()=>{p=!1,null!==h&&(h(),h=null)}))})(Cc,Zo,Ac,Cr,Ka,la,Sr),Oc=((t,e,n,s,i,o,r,u,h)=>(p,d)=>{var f=d,{coneInnerAngle:m,coneOuterAngle:_,coneOuterGain:g,distanceModel:v,maxDistance:y,orientationX:w,orientationY:x,orientationZ:b,panningModel:T,positionX:C,positionY:S,positionZ:A,refDistance:k,rolloffFactor:O}=f,M=l(f,["coneInnerAngle","coneOuterAngle","coneOuterGain","distanceModel","maxDistance","orientationX","orientationY","orientationZ","panningModel","positionX","positionY","positionZ","refDistance","rolloffFactor"]);const E=p.createPanner();if(M.channelCount>2)throw r();if("max"===M.channelCountMode)throw r();nr(E,M);const D={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},I=n(p,c(a({},D),{channelInterpretation:"speakers",numberOfInputs:6})),R=s(p,c(a({},M),{gain:1})),N=s(p,c(a({},D),{gain:1})),V=s(p,c(a({},D),{gain:0})),P=s(p,c(a({},D),{gain:0})),F=s(p,c(a({},D),{gain:0})),q=s(p,c(a({},D),{gain:0})),j=s(p,c(a({},D),{gain:0})),W=i(p,256,6,1),B=o(p,c(a({},D),{curve:new Float32Array([1,1]),oversample:"none"}));let L=[w,x,b],U=[C,S,A];W.onaudioprocess=({inputBuffer:t})=>{const e=[t.getChannelData(0)[0],t.getChannelData(1)[0],t.getChannelData(2)[0]];e.some(((t,e)=>t!==L[e]))&&(E.setOrientation(...e),L=e);const n=[t.getChannelData(3)[0],t.getChannelData(4)[0],t.getChannelData(5)[0]];n.some(((t,e)=>t!==U[e]))&&(E.setPosition(...n),U=n)},Object.defineProperty(V.gain,"defaultValue",{get:()=>0}),Object.defineProperty(P.gain,"defaultValue",{get:()=>0}),Object.defineProperty(F.gain,"defaultValue",{get:()=>0}),Object.defineProperty(q.gain,"defaultValue",{get:()=>0}),Object.defineProperty(j.gain,"defaultValue",{get:()=>0});const z={get bufferSize(){},get channelCount(){return E.channelCount},set channelCount(t){if(t>2)throw r();R.channelCount=t,E.channelCount=t},get channelCountMode(){return E.channelCountMode},set channelCountMode(t){if("max"===t)throw r();R.channelCountMode=t,E.channelCountMode=t},get channelInterpretation(){return E.channelInterpretation},set channelInterpretation(t){R.channelInterpretation=t,E.channelInterpretation=t},get coneInnerAngle(){return E.coneInnerAngle},set coneInnerAngle(t){E.coneInnerAngle=t},get coneOuterAngle(){return E.coneOuterAngle},set coneOuterAngle(t){E.coneOuterAngle=t},get coneOuterGain(){return E.coneOuterGain},set coneOuterGain(t){if(t<0||t>1)throw e();E.coneOuterGain=t},get context(){return E.context},get distanceModel(){return E.distanceModel},set distanceModel(t){E.distanceModel=t},get inputs(){return[R]},get maxDistance(){return E.maxDistance},set maxDistance(t){if(t<0)throw new RangeError;E.maxDistance=t},get numberOfInputs(){return E.numberOfInputs},get numberOfOutputs(){return E.numberOfOutputs},get orientationX(){return N.gain},get orientationY(){return V.gain},get orientationZ(){return P.gain},get panningModel(){return E.panningModel},set panningModel(t){E.panningModel=t},get positionX(){return F.gain},get positionY(){return q.gain},get positionZ(){return j.gain},get refDistance(){return E.refDistance},set refDistance(t){if(t<0)throw new RangeError;E.refDistance=t},get rolloffFactor(){return E.rolloffFactor},set rolloffFactor(t){if(t<0)throw new RangeError;E.rolloffFactor=t},addEventListener:(...t)=>R.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>R.dispatchEvent(t[0]),removeEventListener:(...t)=>R.removeEventListener(t[0],t[1],t[2])};m!==z.coneInnerAngle&&(z.coneInnerAngle=m),_!==z.coneOuterAngle&&(z.coneOuterAngle=_),g!==z.coneOuterGain&&(z.coneOuterGain=g),v!==z.distanceModel&&(z.distanceModel=v),y!==z.maxDistance&&(z.maxDistance=y),w!==z.orientationX.value&&(z.orientationX.value=w),x!==z.orientationY.value&&(z.orientationY.value=x),b!==z.orientationZ.value&&(z.orientationZ.value=b),T!==z.panningModel&&(z.panningModel=T),C!==z.positionX.value&&(z.positionX.value=C),S!==z.positionY.value&&(z.positionY.value=S),A!==z.positionZ.value&&(z.positionZ.value=A),k!==z.refDistance&&(z.refDistance=k),O!==z.rolloffFactor&&(z.rolloffFactor=O),1===L[0]&&0===L[1]&&0===L[2]||E.setOrientation(...L),0===U[0]&&0===U[1]&&0===U[2]||E.setPosition(...U);return h(hr(z,E),(()=>{R.connect(E),t(R,B,0,0),B.connect(N).connect(I,0,0),B.connect(V).connect(I,0,1),B.connect(P).connect(I,0,2),B.connect(F).connect(I,0,3),B.connect(q).connect(I,0,4),B.connect(j).connect(I,0,5),I.connect(W).connect(p.destination)}),(()=>{R.disconnect(E),u(R,B,0,0),B.disconnect(N),N.disconnect(I),B.disconnect(V),V.disconnect(I),B.disconnect(P),P.disconnect(I),B.disconnect(F),F.disconnect(I),B.disconnect(q),q.disconnect(I),B.disconnect(j),j.disconnect(I),I.disconnect(W),W.disconnect(p.destination)}))})(vo,Zo,nc,dr,_r,kc,gr,bo,Ka),Mc=(Ec=Oc,(t,e)=>{const n=t.createPanner();return void 0===n.orientationX?Ec(t,e):(nr(n,e),ir(n,e,"orientationX"),ir(n,e,"orientationY"),ir(n,e,"orientationZ"),ir(n,e,"positionX"),ir(n,e,"positionY"),ir(n,e,"positionZ"),er(n,e,"coneInnerAngle"),er(n,e,"coneOuterAngle"),er(n,e,"coneOuterGain"),er(n,e,"distanceModel"),er(n,e,"maxDistance"),er(n,e,"panningModel"),er(n,e,"refDistance"),er(n,e,"rolloffFactor"),n)});var Ec;const Dc=((t,e,n,s,i,o,r)=>class extends t{constructor(t,c){const l=i(t),u=a(a({},wr),c),h=n(l,u),p=o(l);super(t,!1,h,p?s():null),this._nativePannerNode=h,this._orientationX=e(this,p,h.orientationX,io,so),this._orientationY=e(this,p,h.orientationY,io,so),this._orientationZ=e(this,p,h.orientationZ,io,so),this._positionX=e(this,p,h.positionX,io,so),this._positionY=e(this,p,h.positionY,io,so),this._positionZ=e(this,p,h.positionZ,io,so),r(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(t){this._nativePannerNode.coneInnerAngle=t}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(t){this._nativePannerNode.coneOuterAngle=t}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(t){this._nativePannerNode.coneOuterGain=t}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(t){this._nativePannerNode.distanceModel=t}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(t){this._nativePannerNode.maxDistance=t}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(t){this._nativePannerNode.panningModel=t}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(t){this._nativePannerNode.refDistance=t}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(t){this._nativePannerNode.rolloffFactor=t}})(fa,qa,Mc,((t,e,n,s,i,o,r,l,u,h)=>()=>{const p=new WeakMap;let d=null;return{render(f,m,_){const g=p.get(m);return void 0!==g?Promise.resolve(g):(async(f,m,_)=>{let g=null,v=o(f);const y={channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation},w=c(a({},y),{coneInnerAngle:v.coneInnerAngle,coneOuterAngle:v.coneOuterAngle,coneOuterGain:v.coneOuterGain,distanceModel:v.distanceModel,maxDistance:v.maxDistance,panningModel:v.panningModel,refDistance:v.refDistance,rolloffFactor:v.rolloffFactor}),x=Ji(v,m);if("bufferSize"in v)g=s(m,c(a({},y),{gain:1}));else if(!x){const t=c(a({},w),{orientationX:v.orientationX.value,orientationY:v.orientationY.value,orientationZ:v.orientationZ.value,positionX:v.positionX.value,positionY:v.positionY.value,positionZ:v.positionZ.value});v=i(m,t)}if(p.set(m,null===g?v:g),null!==g){if(null===d){if(null===r)throw new Error("Missing the native OfflineAudioContext constructor.");const t=new r(6,f.context.length,m.sampleRate),s=e(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});s.connect(t.destination),d=(async()=>{const e=await Promise.all([f.orientationX,f.orientationY,f.orientationZ,f.positionX,f.positionY,f.positionZ].map((async(e,s)=>{const i=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:0===s?1:0});return await l(t,e,i.offset,_),i})));for(let t=0;t<6;t+=1)e[t].connect(s,0,t),e[t].start(0);return h(t)})()}const t=await d,o=s(m,c(a({},y),{gain:1}));await u(f,m,o,_);const p=[];for(let e=0;e<t.numberOfChannels;e+=1)p.push(t.getChannelData(e));let v=[p[0][0],p[1][0],p[2][0]],x=[p[3][0],p[4][0],p[5][0]],b=s(m,c(a({},y),{gain:1})),T=i(m,c(a({},w),{orientationX:v[0],orientationY:v[1],orientationZ:v[2],positionX:x[0],positionY:x[1],positionZ:x[2]}));o.connect(b).connect(T.inputs[0]),T.connect(g);for(let e=128;e<t.length;e+=128){const t=[p[0][e],p[1][e],p[2][e]],n=[p[3][e],p[4][e],p[5][e]];if(t.some(((t,e)=>t!==v[e]))||n.some(((t,e)=>t!==x[e]))){v=t,x=n;const r=e/m.sampleRate;b.gain.setValueAtTime(0,r),b=s(m,c(a({},y),{gain:0})),T=i(m,c(a({},w),{orientationX:v[0],orientationY:v[1],orientationZ:v[2],positionX:x[0],positionY:x[1],positionZ:x[2]})),b.gain.setValueAtTime(1,r),o.connect(b).connect(T.inputs[0]),T.connect(g)}}return g}return x?(await t(m,f.orientationX,v.orientationX,_),await t(m,f.orientationY,v.orientationY,_),await t(m,f.orientationZ,v.orientationZ,_),await t(m,f.positionX,v.positionX,_),await t(m,f.positionY,v.positionY,_),await t(m,f.positionZ,v.positionZ,_)):(await l(m,f.orientationX,v.orientationX,_),await l(m,f.orientationY,v.orientationY,_),await l(m,f.orientationZ,v.orientationZ,_),await l(m,f.positionX,v.positionX,_),await l(m,f.positionY,v.positionY,_),await l(m,f.positionZ,v.positionZ,_)),go(v)?await u(f,m,v.inputs[0],_):await u(f,m,v,_),v})(f,m,_)}}})(Ia,nc,oc,dr,Mc,To,na,Pa,Zr,mc),ta,ia,Ua),Ic=((t,e,n,s)=>class i{constructor(i,o){const r=e(i),c=s(a(a({},xr),o)),l=t(r,c);return n.add(l),l}static[Symbol.hasInstance](t){return null!==t&&"object"==typeof t&&Object.getPrototypeOf(t)===i.prototype||n.has(t)}})((t=>(e,{disableNormalization:n,imag:s,real:i})=>{const o=s instanceof Float32Array?s:new Float32Array(s),r=i instanceof Float32Array?i:new Float32Array(i),a=e.createPeriodicWave(r,o,{disableNormalization:n});if(Array.from(s).length<2)throw t();return a})(to),ta,new WeakSet,(t=>{const{imag:e,real:n}=t;return c(a({},t),void 0===e?void 0===n?{imag:[0,0],real:[0,0]}:{imag:Array.from(n,(()=>0)),real:n}:void 0===n?{imag:e,real:Array.from(e,(()=>0))}:{imag:e,real:n})})),Rc=((t,e)=>(n,s)=>{const i=s.channelCountMode;if("clamped-max"===i)throw e();if(void 0===n.createStereoPanner)return t(n,s);const o=n.createStereoPanner();return nr(o,s),ir(o,s,"pan"),Object.defineProperty(o,"channelCountMode",{get:()=>i,set:t=>{if(t!==i)throw e()}}),o})(((t,e,n,s,i,o)=>{const r=16385,u=new Float32Array([1,1]),h=Math.PI/2,p={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},d=c(a({},p),{oversample:"none"}),f=(t,o,l,f,m)=>{if(1===o)return((t,e,i,o)=>{const l=new Float32Array(r),f=new Float32Array(r);for(let n=0;n<r;n+=1){const t=n/16384*h;l[n]=Math.cos(t),f[n]=Math.sin(t)}const m=n(t,c(a({},p),{gain:0})),_=s(t,c(a({},d),{curve:l})),g=s(t,c(a({},d),{curve:u})),v=n(t,c(a({},p),{gain:0})),y=s(t,c(a({},d),{curve:f}));return{connectGraph(){e.connect(m),e.connect(void 0===g.inputs?g:g.inputs[0]),e.connect(v),g.connect(i),i.connect(void 0===_.inputs?_:_.inputs[0]),i.connect(void 0===y.inputs?y:y.inputs[0]),_.connect(m.gain),y.connect(v.gain),m.connect(o,0,0),v.connect(o,0,1)},disconnectGraph(){e.disconnect(m),e.disconnect(void 0===g.inputs?g:g.inputs[0]),e.disconnect(v),g.disconnect(i),i.disconnect(void 0===_.inputs?_:_.inputs[0]),i.disconnect(void 0===y.inputs?y:y.inputs[0]),_.disconnect(m.gain),y.disconnect(v.gain),m.disconnect(o,0,0),v.disconnect(o,0,1)}}})(t,l,f,m);if(2===o)return((t,i,o,l)=>{const f=new Float32Array(r),m=new Float32Array(r),_=new Float32Array(r),g=new Float32Array(r),v=Math.floor(8192.5);for(let e=0;e<r;e+=1)if(e>v){const t=(e-v)/(16384-v)*h;f[e]=Math.cos(t),m[e]=Math.sin(t),_[e]=0,g[e]=1}else{const t=e/(16384-v)*h;f[e]=1,m[e]=0,_[e]=Math.cos(t),g[e]=Math.sin(t)}const y=e(t,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),w=n(t,c(a({},p),{gain:0})),x=s(t,c(a({},d),{curve:f})),b=n(t,c(a({},p),{gain:0})),T=s(t,c(a({},d),{curve:m})),C=s(t,c(a({},d),{curve:u})),S=n(t,c(a({},p),{gain:0})),A=s(t,c(a({},d),{curve:_})),k=n(t,c(a({},p),{gain:0})),O=s(t,c(a({},d),{curve:g}));return{connectGraph(){i.connect(y),i.connect(void 0===C.inputs?C:C.inputs[0]),y.connect(w,0),y.connect(b,0),y.connect(S,1),y.connect(k,1),C.connect(o),o.connect(void 0===x.inputs?x:x.inputs[0]),o.connect(void 0===T.inputs?T:T.inputs[0]),o.connect(void 0===A.inputs?A:A.inputs[0]),o.connect(void 0===O.inputs?O:O.inputs[0]),x.connect(w.gain),T.connect(b.gain),A.connect(S.gain),O.connect(k.gain),w.connect(l,0,0),S.connect(l,0,0),b.connect(l,0,1),k.connect(l,0,1)},disconnectGraph(){i.disconnect(y),i.disconnect(void 0===C.inputs?C:C.inputs[0]),y.disconnect(w,0),y.disconnect(b,0),y.disconnect(S,1),y.disconnect(k,1),C.disconnect(o),o.disconnect(void 0===x.inputs?x:x.inputs[0]),o.disconnect(void 0===T.inputs?T:T.inputs[0]),o.disconnect(void 0===A.inputs?A:A.inputs[0]),o.disconnect(void 0===O.inputs?O:O.inputs[0]),x.disconnect(w.gain),T.disconnect(b.gain),A.disconnect(S.gain),O.disconnect(k.gain),w.disconnect(l,0,0),S.disconnect(l,0,0),b.disconnect(l,0,1),k.disconnect(l,0,1)}}})(t,l,f,m);throw i()};return(e,s)=>{var r=s,{channelCount:u,channelCountMode:h,pan:p}=r,d=l(r,["channelCount","channelCountMode","pan"]);if("max"===h)throw i();const m=t(e,c(a({},d),{channelCount:1,channelCountMode:h,numberOfInputs:2})),_=n(e,c(a({},d),{channelCount:u,channelCountMode:h,gain:1})),g=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:p});let{connectGraph:v,disconnectGraph:y}=f(e,u,_,g,m);Object.defineProperty(g.gain,"defaultValue",{get:()=>0}),Object.defineProperty(g.gain,"maxValue",{get:()=>1}),Object.defineProperty(g.gain,"minValue",{get:()=>-1});const w={get bufferSize(){},get channelCount(){return _.channelCount},set channelCount(t){_.channelCount!==t&&(x&&y(),({connectGraph:v,disconnectGraph:y}=f(e,t,_,g,m)),x&&v()),_.channelCount=t},get channelCountMode(){return _.channelCountMode},set channelCountMode(t){if("clamped-max"===t||"max"===t)throw i();_.channelCountMode=t},get channelInterpretation(){return _.channelInterpretation},set channelInterpretation(t){_.channelInterpretation=t},get context(){return _.context},get inputs(){return[_]},get numberOfInputs(){return _.numberOfInputs},get numberOfOutputs(){return _.numberOfOutputs},get pan(){return g.gain},addEventListener:(...t)=>_.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>_.dispatchEvent(t[0]),removeEventListener:(...t)=>_.removeEventListener(t[0],t[1],t[2])};let x=!1;return o(hr(w,m),(()=>{v(),x=!0}),(()=>{y(),x=!1}))}})(nc,ur,dr,kc,gr,Ka),gr),Nc=((t,e,n,s,i,o)=>class extends t{constructor(t,r){const c=i(t),l=a(a({},br),r),u=n(c,l),h=o(c);super(t,!1,u,h?s():null),this._pan=e(this,h,u.pan)}get pan(){return this._pan}})(fa,qa,Rc,((t,e,n,s,i)=>()=>{const o=new WeakMap;return{render(r,a,c){const l=o.get(a);return void 0!==l?Promise.resolve(l):(async(r,a,c)=>{let l=n(r);const u=Ji(l,a);if(!u){const t={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,pan:l.pan.value};l=e(a,t)}return o.set(a,l),u?await t(a,r.pan,l.pan,c):await s(a,r.pan,l.pan,c),go(l)?await i(r,a,l.inputs[0],c):await i(r,a,l,c),l})(r,a,c)}}})(Ia,Rc,To,Pa,Zr),ta,ia),Vc=((t,e,n)=>()=>{const s=new WeakMap;return{render(i,o,r){const a=s.get(o);return void 0!==a?Promise.resolve(a):(async(i,o,r)=>{let a=e(i);if(!Ji(a,o)){const e={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample};a=t(o,e)}return s.set(o,a),go(a)?await n(i,o,a.inputs[0],r):await n(i,o,a,r),a})(i,o,r)}}})(kc,To,Zr),Pc=((t,e,n,s,i,o,r)=>class extends t{constructor(t,e){const c=i(t),l=a(a({},Tr),e),u=n(c,l);super(t,!0,u,o(c)?s():null),this._isCurveNullified=!1,this._nativeWaveShaperNode=u,r(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(t){if(null===t)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(t.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=t}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(t){this._nativeWaveShaperNode.oversample=t}})(fa,Zo,kc,Vc,ta,ia,Ua),Fc=(t=>null!==t&&t.isSecureContext)(Ur),qc=(t=>(e,n,s)=>{Object.defineProperties(t,{currentFrame:{configurable:!0,get:()=>Math.round(e*n)},currentTime:{configurable:!0,get:()=>e}});try{return s()}finally{null!==t&&(delete t.currentFrame,delete t.currentTime)}})(Ur),jc=new WeakMap,Wc=((t,e)=>n=>{let s=t.get(n);if(void 0!==s)return s;if(null===e)throw new Error("Missing the native OfflineAudioContext constructor.");return s=new e(1,1,44100),t.set(n,s),s})(jc,na),Bc=(t=>null===t?null:t.hasOwnProperty("AudioWorkletNode")?t.AudioWorkletNode:null)(Ur),Lc=Fc?((t,e,n,s,i,o,r,a,c,l,u,h)=>(p,d,f={credentials:"omit"})=>{const m=o(p);if(void 0!==m.audioWorklet)return Promise.all([i(d),Promise.resolve(t(u,u))]).then((([[t,e],n])=>{const[s,i]=Wi(t,e),o=new Blob([`${s};((AudioWorkletProcessor,registerProcessor)=>{${i}\n})(${n?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${n?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${n?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac',class extends AudioWorkletProcessor{process(){return !1}})`],{type:"application/javascript; charset=utf-8"}),c=URL.createObjectURL(o);return m.audioWorklet.addModule(c,f).then((()=>{if(a(m))return m;const t=r(m);return t.audioWorklet.addModule(c,f).then((()=>t))})).then((t=>{try{new AudioWorkletNode(t,"__sac")}catch{throw new SyntaxError}})).finally((()=>URL.revokeObjectURL(c)))}));const _=l.get(p);if(void 0!==_&&_.has(d))return Promise.resolve();const g=c.get(p);if(void 0!==g){const t=g.get(d);if(void 0!==t)return t}const v=i(d).then((([t,e])=>{const[s,i]=Wi(t,e);return n(`${s};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${i}\n})})(window,'_AWGS')`)})).then((()=>{const t=h._AWGS.pop();if(void 0===t)throw new SyntaxError;s(m.currentTime,m.sampleRate,(()=>t(class{},void 0,((t,n)=>{if(""===t.trim())throw e();const s=Pi.get(m);if(void 0!==s){if(s.has(t))throw e();Li(n),Bi(n.parameterDescriptors),s.set(t,n)}else Li(n),Bi(n.parameterDescriptors),Pi.set(m,new Map([[t,n]]))}),m.sampleRate,void 0,void 0)))}));return void 0===g?c.set(p,new Map([[d,v]])):g.set(d,v),v.then((()=>{const t=l.get(p);void 0===t?l.set(p,new Set([d])):t.add(d)})).finally((()=>{const t=c.get(p);void 0!==t&&t.delete(d)})),v})(Wr,gr,(t=>e=>new Promise(((n,s)=>{if(null===t)return void s(new SyntaxError);const i=t.document.head;if(null===i)s(new SyntaxError);else{const o=t.document.createElement("script"),r=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(r),c=t.onerror,l=()=>{t.onerror=c,URL.revokeObjectURL(a)};t.onerror=(e,n,i,o,r)=>n===a||n===t.location.href&&1===i&&1===o?(l(),s(r),!1):null!==c?c(e,n,i,o,r):void 0,o.onerror=()=>{l(),s(new SyntaxError)},o.onload=()=>{l(),n()},o.src=a,o.type="module",i.appendChild(o)}})))(Ur),qc,(Uc=()=>new DOMException("","AbortError"),async t=>{try{const e=await fetch(t);if(e.ok)return[await e.text(),e.url]}catch{}throw Uc()}),ta,Wc,ia,new WeakMap,new WeakMap,((t,e)=>async()=>{if(null===t)return!0;if(null===e)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),s=new e(1,128,44100),i=URL.createObjectURL(n);let o=!1,r=!1;try{await s.audioWorklet.addModule(i);const e=new t(s,"a",{numberOfOutputs:0}),n=s.createOscillator();e.port.onmessage=()=>o=!0,e.onprocessorerror=()=>r=!0,n.connect(e),n.start(0),await s.startRendering()}catch{}finally{URL.revokeObjectURL(i)}return o&&!r})(Bc,na),Ur):void 0;var Uc;const zc=((t,e)=>n=>t(n)||e(n))(ua,ia),$c=((t,e,n,s,i,o,r,a,c,l,u)=>(h,p)=>{const d=r(h)?h:o(h);if(i.has(p)){const t=n();return Promise.reject(t)}try{i.add(p)}catch{}return e(c,(()=>c(d)))?d.decodeAudioData(p).then((n=>(zo(p).catch((()=>{})),e(a,(()=>a(n)))||u(n),t.add(n),n))):new Promise(((e,n)=>{const i=async()=>{try{await zo(p)}catch{}},o=t=>{n(t),i()};try{d.decodeAudioData(p,(n=>{"function"!=typeof n.copyFromChannel&&(l(n),eo(n)),t.add(n),i().then((()=>e(n)))}),(t=>{o(null===t?s():t)}))}catch(r){o(r)}}))})(ga,Wr,(()=>new DOMException("","DataCloneError")),(()=>new DOMException("","EncodingError")),new WeakSet,ta,zc,Ki,tr,xa,ba),Gc=(Xc=Lc,Yc=_a,Zc=Ca,Hc=Wa,Qc=za,Jc=sc,Kc=ic,tl=rc,el=cc,nl=$c,sl=lc,il=pc,ol=dc,rl=vc,al=xc,cl=Tc,ll=Dc,ul=Ic,hl=Nc,pl=Pc,class extends al{constructor(t,e){super(t,e),this._nativeContext=t,this._audioWorklet=void 0===Xc?void 0:{addModule:(t,e)=>Xc(this,t,e)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new Yc(this)}createBiquadFilter(){return new Qc(this)}createBuffer(t,e,n){return new Zc({length:e,numberOfChannels:t,sampleRate:n})}createBufferSource(){return new Hc(this)}createChannelMerger(t=6){return new Jc(this,{numberOfInputs:t})}createChannelSplitter(t=6){return new Kc(this,{numberOfOutputs:t})}createConstantSource(){return new tl(this)}createConvolver(){return new el(this)}createDelay(t=1){return new sl(this,{maxDelayTime:t})}createDynamicsCompressor(){return new il(this)}createGain(){return new ol(this)}createIIRFilter(t,e){return new rl(this,{feedback:e,feedforward:t})}createOscillator(){return new cl(this)}createPanner(){return new ll(this)}createPeriodicWave(t,e,n={disableNormalization:!1}){return new ul(this,c(a({},n),{imag:e,real:t}))}createStereoPanner(){return new hl(this)}createWaveShaper(){return new pl(this)}decodeAudioData(t,e,n){return nl(this._nativeContext,t).then((t=>("function"==typeof e&&e(t),t)),(t=>{throw"function"==typeof n&&n(t),t}))}});var Xc,Yc,Zc,Hc,Qc,Jc,Kc,tl,el,nl,sl,il,ol,rl,al,cl,ll,ul,hl,pl;const dl=((t,e,n,s)=>class extends t{constructor(t,i){const o=n(t),r=e(o,i);if(s(o))throw TypeError();super(t,!0,r,null),this._nativeMediaElementAudioSourceNode=r}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}})(fa,((t,e)=>t.createMediaElementSource(e.mediaElement)),ta,ia),fl=((t,e,n,s)=>class extends t{constructor(t,i){const o=n(t);if(s(o))throw new TypeError;const r=a(a({},Ko),i),c=e(o,r);super(t,!1,c,null),this._nativeMediaStreamAudioDestinationNode=c}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}})(fa,((t,e)=>{const n=t.createMediaStreamDestination();return nr(n,e),1===n.numberOfOutputs&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n}),ta,ia),ml=((t,e,n,s)=>class extends t{constructor(t,i){const o=n(t),r=e(o,i);if(s(o))throw new TypeError;super(t,!0,r,null),this._nativeMediaStreamAudioSourceNode=r}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}})(fa,((t,{mediaStream:e})=>{const n=e.getAudioTracks();n.sort(((t,e)=>t.id<e.id?-1:t.id>e.id?1:0));const s=n.slice(0,1),i=t.createMediaStreamSource(new MediaStream(s));return Object.defineProperty(i,"mediaStream",{value:e}),i}),ta,ia),_l=((t,e,n)=>class extends t{constructor(t,s){const i=n(t);super(t,!0,e(i,s),null)}})(fa,((t,e)=>(n,{mediaStreamTrack:s})=>{if("function"==typeof n.createMediaStreamTrackSource)return n.createMediaStreamTrackSource(s);const i=new MediaStream([s]),o=n.createMediaStreamSource(i);if("audio"!==s.kind)throw t();if(e(n))throw new TypeError;return o})(Zo,ia),ta),gl=((t,e,n,s,i,o,r,a,c)=>class extends t{constructor(t={}){if(null===c)throw new Error("Missing the native AudioContext constructor.");let e;try{e=new c(t)}catch(r){if(12===r.code&&"sampleRate is not in range"===r.message)throw n();throw r}if(null===e)throw s();if(!(t=>void 0===t||"number"==typeof t||"string"==typeof t&&("balanced"===t||"interactive"===t||"playback"===t))(t.latencyHint))throw new TypeError(`The provided value '${t.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(void 0!==t.sampleRate&&e.sampleRate!==t.sampleRate)throw n();super(e,2);const{latencyHint:i}=t,{sampleRate:o}=e;if(this._baseLatency="number"==typeof e.baseLatency?e.baseLatency:"balanced"===i?512/o:"interactive"===i||void 0===i?256/o:"playback"===i?1024/o:128*Math.max(2,Math.min(128,Math.round(i*o/128)))/o,this._nativeAudioContext=e,"webkitAudioContext"===c.name?(this._nativeGainNode=e.createGain(),this._nativeOscillatorNode=e.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(e.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,"running"===e.state){this._state="suspended";const t=()=>{"suspended"===this._state&&(this._state=null),e.removeEventListener("statechange",t)};e.addEventListener("statechange",t)}}get baseLatency(){return this._baseLatency}get state(){return null!==this._state?this._state:this._nativeAudioContext.state}close(){return"closed"===this.state?this._nativeAudioContext.close().then((()=>{throw e()})):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close().then((()=>{null!==this._nativeGainNode&&null!==this._nativeOscillatorNode&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),uo(this)})))}createMediaElementSource(t){return new i(this,{mediaElement:t})}createMediaStreamDestination(){return new o(this)}createMediaStreamSource(t){return new r(this,{mediaStream:t})}createMediaStreamTrackSource(t){return new a(this,{mediaStreamTrack:t})}resume(){return"suspended"===this._state?new Promise(((t,e)=>{const n=()=>{this._nativeAudioContext.removeEventListener("statechange",n),"running"===this._nativeAudioContext.state?t():this.resume().then(t,e)};this._nativeAudioContext.addEventListener("statechange",n)})):this._nativeAudioContext.resume().catch((t=>{if(void 0===t||15===t.code)throw e();throw t}))}suspend(){return this._nativeAudioContext.suspend().catch((t=>{if(void 0===t)throw e();throw t}))}})(Gc,Zo,gr,(()=>new DOMException("","UnknownError")),dl,fl,ml,_l,la),vl=(yl=wc,t=>{const e=yl.get(t);if(void 0===e)throw new Error("The context has no set of AudioWorkletNodes.");return e});var yl;const wl=(xl=vl,(t,e)=>{xl(t).add(e)});var xl;const bl=(t=>(e,n,s=0,i=0)=>{const o=e[s];if(void 0===o)throw t();return Mo(n)?o.connect(n,0,i):o.connect(n,0)})(to),Tl=(t=>(e,n)=>{t(e).delete(n)})(vl),Cl=(t=>(e,n,s,i=0)=>void 0===n?e.forEach((t=>t.disconnect())):"number"==typeof n?Go(t,e,n).disconnect():Mo(n)?void 0===s?e.forEach((t=>t.disconnect(n))):void 0===i?Go(t,e,s).disconnect(n,0):Go(t,e,s).disconnect(n,0,i):void 0===s?e.forEach((t=>t.disconnect(n))):Go(t,e,s).disconnect(n,0))(to),Sl=new WeakMap,Al=(kl=Sl,Ol=Ui,t=>Ol(kl,t));var kl,Ol;const Ml=((t,e,n,s,i,o,r,l,u,h,p,d,f)=>(m,_,g,v)=>{if(0===v.numberOfInputs&&0===v.numberOfOutputs)throw u();const y=Array.isArray(v.outputChannelCount)?v.outputChannelCount:Array.from(v.outputChannelCount);if(y.some((t=>t<1)))throw u();if(y.length!==v.numberOfOutputs)throw e();if("explicit"!==v.channelCountMode)throw u();const w=v.channelCount*v.numberOfInputs,x=y.reduce(((t,e)=>t+e),0),b=void 0===g.parameterDescriptors?0:g.parameterDescriptors.length;if(w+b>6||x>6)throw u();const T=new MessageChannel,C=[],S=[];for(let t=0;t<v.numberOfInputs;t+=1)C.push(r(m,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1})),S.push(i(m,{channelCount:v.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:v.channelCount}));const A=[];if(void 0!==g.parameterDescriptors)for(const{defaultValue:t,maxValue:e,minValue:n,name:s}of g.parameterDescriptors){const i=o(m,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:void 0!==v.parameterData[s]?v.parameterData[s]:void 0===t?0:t});Object.defineProperties(i.offset,{defaultValue:{get:()=>void 0===t?0:t},maxValue:{get:()=>void 0===e?io:e},minValue:{get:()=>void 0===n?so:n}}),A.push(i)}const k=s(m,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,w+b)}),O=ar(_,m.sampleRate),M=l(m,O,w+b,Math.max(1,x)),E=i(m,{channelCount:Math.max(1,x),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,x)}),D=[];for(let t=0;t<v.numberOfOutputs;t+=1)D.push(s(m,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:y[t]}));for(let t=0;t<v.numberOfInputs;t+=1){C[t].connect(S[t]);for(let e=0;e<v.channelCount;e+=1)S[t].connect(k,e,t*v.channelCount+e)}const I=new Ro(void 0===g.parameterDescriptors?[]:g.parameterDescriptors.map((({name:t},e)=>{const n=A[e];return n.connect(k,0,w+e),n.start(0),[t,n.offset]})));k.connect(M);let R=v.channelInterpretation,N=null;const V=0===v.numberOfOutputs?[M]:D,P={get bufferSize(){return O},get channelCount(){return v.channelCount},set channelCount(t){throw n()},get channelCountMode(){return v.channelCountMode},set channelCountMode(t){throw n()},get channelInterpretation(){return R},set channelInterpretation(t){for(const e of C)e.channelInterpretation=t;R=t},get context(){return M.context},get inputs(){return C},get numberOfInputs(){return v.numberOfInputs},get numberOfOutputs(){return v.numberOfOutputs},get onprocessorerror(){return N},set onprocessorerror(t){"function"==typeof N&&P.removeEventListener("processorerror",N),N="function"==typeof t?t:null,"function"==typeof N&&P.addEventListener("processorerror",N)},get parameters(){return I},get port(){return T.port2},addEventListener:(...t)=>M.addEventListener(t[0],t[1],t[2]),connect:t.bind(null,V),disconnect:h.bind(null,V),dispatchEvent:(...t)=>M.dispatchEvent(t[0]),removeEventListener:(...t)=>M.removeEventListener(t[0],t[1],t[2])},F=new Map;var q,j;T.port1.addEventListener=(q=T.port1.addEventListener,(...t)=>{if("message"===t[0]){const e="function"==typeof t[1]?t[1]:"object"==typeof t[1]&&null!==t[1]&&"function"==typeof t[1].handleEvent?t[1].handleEvent:null;if(null!==e){const n=F.get(t[1]);void 0!==n?t[1]=n:(t[1]=t=>{p(m.currentTime,m.sampleRate,(()=>e(t)))},F.set(e,t[1]))}}return q.call(T.port1,t[0],t[1],t[2])}),T.port1.removeEventListener=(j=T.port1.removeEventListener,(...t)=>{if("message"===t[0]){const e=F.get(t[1]);void 0!==e&&(F.delete(t[1]),t[1]=e)}return j.call(T.port1,t[0],t[1],t[2])});let W=null;Object.defineProperty(T.port1,"onmessage",{get:()=>W,set:t=>{"function"==typeof W&&T.port1.removeEventListener("message",W),W="function"==typeof t?t:null,"function"==typeof W&&(T.port1.addEventListener("message",W),T.port1.start())}}),g.prototype.port=T.port1;let B=null;((t,e,n,s)=>{let i=Fi.get(t);void 0===i&&(i=new WeakMap,Fi.set(t,i));const o=cr(n,s);return i.set(e,o),o})(m,P,g,v).then((t=>B=t));const L=Fo(v.numberOfInputs,v.channelCount),U=Fo(v.numberOfOutputs,y),z=void 0===g.parameterDescriptors?[]:g.parameterDescriptors.reduce(((t,{name:e})=>c(a({},t),{[e]:new Float32Array(128)})),{});let $=!0;const G=()=>{v.numberOfOutputs>0&&M.disconnect(E);for(let t=0,e=0;t<v.numberOfOutputs;t+=1){const n=D[t];for(let s=0;s<y[t];s+=1)E.disconnect(n,e+s,s);e+=y[t]}},X=new Map;M.onaudioprocess=({inputBuffer:t,outputBuffer:e})=>{if(null!==B){const s=d(P);for(let i=0;i<O;i+=128){for(let e=0;e<v.numberOfInputs;e+=1)for(let n=0;n<v.channelCount;n+=1)Vo(t,L[e],n,n,i);void 0!==g.parameterDescriptors&&g.parameterDescriptors.forEach((({name:e},n)=>{Vo(t,z,e,w+n,i)}));for(let t=0;t<v.numberOfInputs;t+=1)for(let e=0;e<y[t];e+=1)0===U[t][e].byteLength&&(U[t][e]=new Float32Array(128));try{const t=L.map(((t,e)=>{if(s[e].size>0)return X.set(e,O/128),t;const n=X.get(e);return void 0===n?[]:(t.every((t=>t.every((t=>0===t))))&&(1===n?X.delete(e):X.set(e,n-1)),t)})),n=p(m.currentTime+i/m.sampleRate,m.sampleRate,(()=>B.process(t,U,z)));$=n;for(let s=0,o=0;s<v.numberOfOutputs;s+=1){for(let t=0;t<y[s];t+=1)Po(e,U[s],t,o+t,i);o+=y[s]}}catch(n){$=!1,P.dispatchEvent(new ErrorEvent("processorerror",{colno:n.colno,filename:n.filename,lineno:n.lineno,message:n.message}))}if(!$){for(let t=0;t<v.numberOfInputs;t+=1){C[t].disconnect(S[t]);for(let e=0;e<v.channelCount;e+=1)S[i].disconnect(k,e,t*v.channelCount+e)}if(void 0!==g.parameterDescriptors){const t=g.parameterDescriptors.length;for(let e=0;e<t;e+=1){const t=A[e];t.disconnect(k,0,w+e),t.stop()}}k.disconnect(M),M.onaudioprocess=null,Y?G():Q();break}}}};let Y=!1;const Z=r(m,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),H=()=>M.connect(Z).connect(m.destination),Q=()=>{M.disconnect(Z),Z.disconnect()};return H(),f(P,(()=>{if($){Q(),v.numberOfOutputs>0&&M.connect(E);for(let t=0,e=0;t<v.numberOfOutputs;t+=1){const n=D[t];for(let s=0;s<y[t];s+=1)E.connect(n,e+s,s);e+=y[t]}}Y=!0}),(()=>{$&&(H(),G()),Y=!1}))})(bl,to,Zo,nc,ur,oc,dr,_r,gr,Cl,qc,Al,Ka),El=((t,e,n,s,i)=>(o,r,c,l,u,h)=>{if(null!==c)try{const e=new c(o,l,h),s=new Map;let r=null;if(Object.defineProperties(e,{channelCount:{get:()=>h.channelCount,set:()=>{throw t()}},channelCountMode:{get:()=>"explicit",set:()=>{throw t()}},onprocessorerror:{get:()=>r,set:t=>{"function"==typeof r&&e.removeEventListener("processorerror",r),r="function"==typeof t?t:null,"function"==typeof r&&e.addEventListener("processorerror",r)}}}),e.addEventListener=(d=e.addEventListener,(...t)=>{if("processorerror"===t[0]){const e="function"==typeof t[1]?t[1]:"object"==typeof t[1]&&null!==t[1]&&"function"==typeof t[1].handleEvent?t[1].handleEvent:null;if(null!==e){const n=s.get(t[1]);void 0!==n?t[1]=n:(t[1]=n=>{"error"===n.type?(Object.defineProperties(n,{type:{value:"processorerror"}}),e(n)):e(new ErrorEvent(t[0],a({},n)))},s.set(e,t[1]))}}return d.call(e,"error",t[1],t[2]),d.call(e,...t)}),e.removeEventListener=(p=e.removeEventListener,(...t)=>{if("processorerror"===t[0]){const e=s.get(t[1]);void 0!==e&&(s.delete(t[1]),t[1]=e)}return p.call(e,"error",t[1],t[2]),p.call(e,t[0],t[1],t[2])}),0!==h.numberOfOutputs){const t=n(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});e.connect(t).connect(o.destination);return i(e,(()=>t.disconnect()),(()=>t.connect(o.destination)))}return e}catch(f){if(11===f.code)throw s();throw f}var p,d;if(void 0===u)throw s();return(t=>{const{port1:e}=new MessageChannel;try{e.postMessage(t)}finally{e.close()}})(h),e(o,r,u,h)})(Zo,Ml,dr,gr,Ka),Dl=((t,e,n,s,i,o,r,a,c,l,u,h,p,d,f,m)=>(_,g,v)=>{const y=new WeakMap;let w=null;return{render(x,b,T){a(b,x);const C=y.get(b);return void 0!==C?Promise.resolve(C):(async(a,x,b)=>{let T=u(a),C=null;const S=Ji(T,x),A=Array.isArray(g.outputChannelCount)?g.outputChannelCount:Array.from(g.outputChannelCount);if(null===h){const t=A.reduce(((t,e)=>t+e),0),n=i(x,{channelCount:Math.max(1,t),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,t)}),o=[];for(let e=0;e<a.numberOfOutputs;e+=1)o.push(s(x,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:A[e]}));const l=r(x,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1});l.connect=e.bind(null,o),l.disconnect=c.bind(null,o),C=[n,o,l]}else S||(T=new h(x,_));if(y.set(x,null===C?T:C[2]),null!==C){if(null===w){if(void 0===v)throw new Error("Missing the processor constructor.");if(null===p)throw new Error("Missing the native OfflineAudioContext constructor.");const t=a.channelCount*a.numberOfInputs,e=void 0===v.parameterDescriptors?0:v.parameterDescriptors.length,n=t+e,c=async()=>{const c=new p(n,128*Math.ceil(a.context.length/128),x.sampleRate),l=[],u=[];for(let t=0;t<g.numberOfInputs;t+=1)l.push(r(c,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1})),u.push(i(c,{channelCount:g.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:g.channelCount}));const h=await Promise.all(Array.from(a.parameters.values()).map((async t=>{const e=o(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:t.value});return await d(c,t,e.offset,b),e}))),_=s(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,t+e)});for(let t=0;t<g.numberOfInputs;t+=1){l[t].connect(u[t]);for(let e=0;e<g.channelCount;e+=1)u[t].connect(_,e,t*g.channelCount+e)}for(const[e,n]of h.entries())n.connect(_,0,t+e),n.start(0);return _.connect(c.destination),await Promise.all(l.map((t=>f(a,c,t,b)))),m(c)};w=qo(a,0===n?null:await c(),x,g,A,v,l)}const t=await w,e=n(x,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[c,u,h]=C;null!==t&&(e.buffer=t,e.start(0)),e.connect(c);for(let n=0,s=0;n<a.numberOfOutputs;n+=1){const t=u[n];for(let e=0;e<A[n];e+=1)c.connect(t,s+e,e);s+=A[n]}return h}if(S)for(const[e,n]of a.parameters.entries())await t(x,n,T.parameters.get(e),b);else for(const[t,e]of a.parameters.entries())await d(x,e,T.parameters.get(t),b);return await f(a,x,T,b),T})(x,b,T)}}})(Ia,bl,Na,nc,ur,oc,dr,Tl,Cl,qc,To,Bc,na,Pa,Zr,mc),Il=(Rl=jc,t=>Rl.get(t));var Rl;const Nl=(t=>(e,n)=>{t.set(e,n)})(Sl),Vl=Fc?((t,e,n,s,i,o,r,c,l,u,h,p,d,f)=>class extends e{constructor(e,f,m){var _;const g=c(e),v=l(g),y=h(a(a({},No),m));d(y);const w=Pi.get(g),x=null==w?void 0:w.get(f),b=v||"closed"!==g.state?g:null!==(_=r(g))&&void 0!==_?_:g,T=i(b,v?null:e.baseLatency,u,f,x,y);super(e,!0,T,v?s(f,y,x):null);const C=[];T.parameters.forEach(((t,e)=>{const s=n(this,v,t);C.push([e,s])})),this._nativeAudioWorkletNode=T,this._onprocessorerror=null,this._parameters=new Ro(C),v&&t(g,this);const{activeInputs:S}=o(this);p(T,S)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(t){const e="function"==typeof t?f(this,t):null;this._nativeAudioWorkletNode.onprocessorerror=e;const n=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=null!==n&&n===e?t:n}get parameters(){return null===this._parameters?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}})(wl,fa,qa,Dl,El,ao,Il,ta,ia,Bc,(t=>c(a({},t),{outputChannelCount:void 0!==t.outputChannelCount?t.outputChannelCount:1===t.numberOfInputs&&1===t.numberOfOutputs?[t.channelCount]:Array.from({length:t.numberOfOutputs},(()=>1))})),Nl,(t=>{const{port1:e,port2:n}=new MessageChannel;try{e.postMessage(t)}finally{e.close(),n.close()}}),Dr):void 0,Pl=((t,e)=>(n,s,i)=>{if(null===e)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(n,s,i)}catch(o){if("SyntaxError"===o.name)throw t();throw o}})(gr,na),Fl=((t,e,n,s,i,o,r,a)=>{const c=[];return(l,u)=>n(l).render(l,u,c).then((()=>Promise.all(Array.from(s(u)).map((t=>n(t).render(t,u,c)))))).then((()=>i(u))).then((n=>("function"!=typeof n.copyFromChannel?(r(n),eo(n)):e(o,(()=>o(n)))||a(n),t.add(n),n)))})(ga,Wr,Xr,vl,mc,Ki,xa,ba),ql=((t,e,n,s,i)=>class extends t{constructor(t,n,i){let o;if("number"==typeof t&&void 0!==n&&void 0!==i)o={length:n,numberOfChannels:t,sampleRate:i};else{if("object"!=typeof t)throw new Error("The given parameters are not valid.");o=t}const{length:r,numberOfChannels:c,sampleRate:l}=a(a({},vr),o),u=s(c,r,l);e(tr,(()=>tr(u)))||u.addEventListener("statechange",(()=>{let t=0;const e=n=>{"running"===this._state&&(t>0?(u.removeEventListener("statechange",e),n.stopImmediatePropagation(),this._waitForThePromiseToSettle(n)):t+=1)};return e})()),super(u,c),this._length=r,this._nativeOfflineAudioContext=u,this._state=null}get length(){return void 0===this._nativeOfflineAudioContext.length?this._length:this._nativeOfflineAudioContext.length}get state(){return null===this._state?this._nativeOfflineAudioContext.state:this._state}startRendering(){return"running"===this._state?Promise.reject(n()):(this._state="running",i(this.destination,this._nativeOfflineAudioContext).finally((()=>{this._state=null,uo(this)})))}_waitForThePromiseToSettle(t){null===this._state?this._nativeOfflineAudioContext.dispatchEvent(t):setTimeout((()=>this._waitForThePromiseToSettle(t)))}})(Gc,Wr,Zo,Pl,Fl),jl=((t,e)=>n=>{const s=t.get(n);return e(s)||e(n)})(Ri,ua),Wl=(Bl=Ei,Ll=pa,t=>Bl.has(t)||Ll(t));var Bl,Ll;const Ul=(zl=Ii,$l=da,t=>zl.has(t)||$l(t));var zl,$l;const Gl=((t,e)=>n=>{const s=t.get(n);return e(s)||e(n)})(Ri,ia);function Xl(t,e){if(!t)throw new Error(e)}function Yl(t,e,n=1/0){if(!(e<=t&&t<=n))throw new RangeError(`Value must be within [${e}, ${n}], got: ${t}`)}function Zl(t){t.isOffline||"running"===t.state||Ql('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let Hl=console;function Ql(...t){Hl.warn(...t)}function Jl(t){return void 0===t}function Kl(t){return!Jl(t)}function tu(t){return"number"==typeof t}function eu(t){return"[object Object]"===Object.prototype.toString.call(t)&&t.constructor===Object}function nu(t){return Array.isArray(t)}function su(t){return"string"==typeof t}function iu(t){return su(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)}const ou="object"==typeof self?self:null,ru=ou&&(ou.hasOwnProperty("AudioContext")||ou.hasOwnProperty("webkitAudioContext"));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function au(t,e,n,s){var i,o=arguments.length,r=o<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(o<3?i(r):o>3?i(e,n,r):i(e,n))||r);return o>3&&r&&Object.defineProperty(e,n,r),r}function cu(t,e,n,s){return new(n||(n=Promise))((function(i,o){function r(t){try{c(s.next(t))}catch(e){o(e)}}function a(t){try{c(s.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,a)}c((s=s.apply(t,e||[])).next())}))}class lu{constructor(t,e,n){this._callback=t,this._type=e,this._updateInterval=n,this._createClock()}_createWorker(){const t=new Blob([`\n\t\t\t// the initial timeout time\n\t\t\tlet timeoutTime =  ${(1e3*this._updateInterval).toFixed(1)};\n\t\t\t// onmessage callback\n\t\t\tself.onmessage = function(msg){\n\t\t\t\ttimeoutTime = parseInt(msg.data);\n\t\t\t};\n\t\t\t// the tick function which posts a message\n\t\t\t// and schedules a new tick\n\t\t\tfunction tick(){\n\t\t\t\tsetTimeout(tick, timeoutTime);\n\t\t\t\tself.postMessage('tick');\n\t\t\t}\n\t\t\t// call tick initially\n\t\t\ttick();\n\t\t\t`],{type:"text/javascript"}),e=URL.createObjectURL(t),n=new Worker(e);n.onmessage=this._callback.bind(this),this._worker=n}_createTimeout(){this._timeout=setTimeout((()=>{this._createTimeout(),this._callback()}),1e3*this._updateInterval)}_createClock(){if("worker"===this._type)try{this._createWorker()}catch(t){this._type="timeout",this._createClock()}else"timeout"===this._type&&this._createTimeout()}_disposeClock(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(t){this._updateInterval=Math.max(t,128/44100),"worker"===this._type&&this._worker.postMessage(Math.max(1e3*t,1))}get type(){return this._type}set type(t){this._disposeClock(),this._type=t,this._createClock()}dispose(){this._disposeClock()}}function uu(t){return Ul(t)}function hu(t){return Wl(t)}function pu(t){return Gl(t)}function du(t){return jl(t)}function fu(t){return t instanceof AudioBuffer}function mu(t,e){return"value"===t||uu(e)||hu(e)||fu(e)}function _u(t,...e){if(!e.length)return t;const n=e.shift();if(eu(t)&&eu(n))for(const s in n)mu(s,n[s])?t[s]=n[s]:eu(n[s])?(t[s]||Object.assign(t,{[s]:{}}),_u(t[s],n[s])):Object.assign(t,{[s]:n[s]});return _u(t,...e)}function gu(t,e,n=[],s){const i={},o=Array.from(e);if(eu(o[0])&&s&&!Reflect.has(o[0],s)){Object.keys(o[0]).some((e=>Reflect.has(t,e)))||(_u(i,{[s]:o[0]}),n.splice(n.indexOf(s),1),o.shift())}if(1===o.length&&eu(o[0]))_u(i,o[0]);else for(let r=0;r<n.length;r++)Kl(o[r])&&(i[n[r]]=o[r]);return _u(t,i)}function vu(t,e){return Jl(t)?e:t}function yu(t,e){return e.forEach((e=>{Reflect.has(t,e)&&delete t[e]})),t}
/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2019 Yotam Mann
 */class wu{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...t){(this.debug||ou&&this.toString()===ou.TONE_DEBUG_CLASS)&&function(...t){Hl.log(...t)}(this,...t)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}wu.version="14.7.77";function xu(t,e){return t>e+1e-6}function bu(t,e){return xu(t,e)||Cu(t,e)}function Tu(t,e){return t+1e-6<e}function Cu(t,e){return Math.abs(t-e)<1e-6}class Su extends wu{constructor(){super(),this.name="Timeline",this._timeline=[];const t=gu(Su.getDefaults(),arguments,["memory"]);this.memory=t.memory,this.increasing=t.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(t){if(Xl(Reflect.has(t,"time"),"Timeline: events must have a time attribute"),t.time=t.time.valueOf(),this.increasing&&this.length){const e=this._timeline[this.length-1];Xl(bu(t.time,e.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(t)}else{const e=this._search(t.time);this._timeline.splice(e+1,0,t)}if(this.length>this.memory){const t=this.length-this.memory;this._timeline.splice(0,t)}return this}remove(t){const e=this._timeline.indexOf(t);return-1!==e&&this._timeline.splice(e,1),this}get(t,e="time"){const n=this._search(t,e);return-1!==n?this._timeline[n]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(t,e="time"){const n=this._search(t,e);return n+1<this._timeline.length?this._timeline[n+1]:null}getBefore(t){const e=this._timeline.length;if(e>0&&this._timeline[e-1].time<t)return this._timeline[e-1];const n=this._search(t);return n-1>=0?this._timeline[n-1]:null}cancel(t){if(this._timeline.length>1){let e=this._search(t);if(e>=0)if(Cu(this._timeline[e].time,t)){for(let n=e;n>=0&&Cu(this._timeline[n].time,t);n--)e=n;this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[]}else 1===this._timeline.length&&bu(this._timeline[0].time,t)&&(this._timeline=[]);return this}cancelBefore(t){const e=this._search(t);return e>=0&&(this._timeline=this._timeline.slice(e+1)),this}previousEvent(t){const e=this._timeline.indexOf(t);return e>0?this._timeline[e-1]:null}_search(t,e="time"){if(0===this._timeline.length)return-1;let n=0;const s=this._timeline.length;let i=s;if(s>0&&this._timeline[s-1][e]<=t)return s-1;for(;n<i;){let s=Math.floor(n+(i-n)/2);const o=this._timeline[s],r=this._timeline[s+1];if(Cu(o[e],t)){for(let n=s;n<this._timeline.length;n++){if(!Cu(this._timeline[n][e],t))break;s=n}return s}if(Tu(o[e],t)&&xu(r[e],t))return s;xu(o[e],t)?i=s:n=s+1}return-1}_iterate(t,e=0,n=this._timeline.length-1){this._timeline.slice(e,n+1).forEach(t)}forEach(t){return this._iterate(t),this}forEachBefore(t,e){const n=this._search(t);return-1!==n&&this._iterate(e,0,n),this}forEachAfter(t,e){const n=this._search(t);return this._iterate(e,n+1),this}forEachBetween(t,e,n){let s=this._search(t),i=this._search(e);return-1!==s&&-1!==i?(this._timeline[s].time!==t&&(s+=1),this._timeline[i].time===e&&(i-=1),this._iterate(n,s,i)):-1===s&&this._iterate(n,0,i),this}forEachFrom(t,e){let n=this._search(t);for(;n>=0&&this._timeline[n].time>=t;)n--;return this._iterate(e,n+1),this}forEachAtTime(t,e){const n=this._search(t);if(-1!==n&&Cu(this._timeline[n].time,t)){let s=n;for(let e=n;e>=0&&Cu(this._timeline[e].time,t);e--)s=e;this._iterate((t=>{e(t)}),s,n)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const Au=[];function ku(t){Au.push(t)}const Ou=[];function Mu(t){Ou.push(t)}class Eu extends wu{constructor(){super(...arguments),this.name="Emitter"}on(t,e){return t.split(/\W+/).forEach((t=>{Jl(this._events)&&(this._events={}),this._events.hasOwnProperty(t)||(this._events[t]=[]),this._events[t].push(e)})),this}once(t,e){const n=(...s)=>{e(...s),this.off(t,n)};return this.on(t,n),this}off(t,e){return t.split(/\W+/).forEach((n=>{if(Jl(this._events)&&(this._events={}),this._events.hasOwnProperty(t))if(Jl(e))this._events[t]=[];else{const n=this._events[t];for(let t=n.length-1;t>=0;t--)n[t]===e&&n.splice(t,1)}})),this}emit(t,...e){if(this._events&&this._events.hasOwnProperty(t)){const n=this._events[t].slice(0);for(let t=0,s=n.length;t<s;t++)n[t].apply(this,e)}return this}static mixin(t){["on","once","off","emit"].forEach((e=>{const n=Object.getOwnPropertyDescriptor(Eu.prototype,e);Object.defineProperty(t.prototype,e,n)}))}dispose(){return super.dispose(),this._events=void 0,this}}class Du extends Eu{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Iu extends Du{constructor(){super(),this.name="Context",this._constants=new Map,this._timeouts=new Su,this._timeoutIds=0,this._initialized=!1,this.isOffline=!1,this._workletModules=new Map;const t=gu(Iu.getDefaults(),arguments,["context"]);t.context?this._context=t.context:this._context=function(t){return new gl(t)}({latencyHint:t.latencyHint}),this._ticker=new lu(this.emit.bind(this,"tick"),t.clockSource,t.updateInterval),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this._setLatencyHint(t.latencyHint),this.lookAhead=t.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){var t;return this._initialized||(t=this,Au.forEach((e=>e(t))),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(t,e,n){return this._context.createBuffer(t,e,n)}createChannelMerger(t){return this._context.createChannelMerger(t)}createChannelSplitter(t){return this._context.createChannelSplitter(t)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(t){return this._context.createDelay(t)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(t,e){return this._context.createIIRFilter(t,e)}createPanner(){return this._context.createPanner()}createPeriodicWave(t,e,n){return this._context.createPeriodicWave(t,e,n)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(t){Xl(du(this._context),"Not available if OfflineAudioContext");return this._context.createMediaStreamSource(t)}createMediaElementSource(t){Xl(du(this._context),"Not available if OfflineAudioContext");return this._context.createMediaElementSource(t)}createMediaStreamDestination(){Xl(du(this._context),"Not available if OfflineAudioContext");return this._context.createMediaStreamDestination()}decodeAudioData(t){return this._context.decodeAudioData(t)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(t){Xl(!this._initialized,"The listener cannot be set after initialization."),this._listener=t}get transport(){return this.initialize(),this._transport}set transport(t){Xl(!this._initialized,"The transport cannot be set after initialization."),this._transport=t}get draw(){return this.initialize(),this._draw}set draw(t){Xl(!this._initialized,"Draw cannot be set after initialization."),this._draw=t}get destination(){return this.initialize(),this._destination}set destination(t){Xl(!this._initialized,"The destination cannot be set after initialization."),this._destination=t}createAudioWorkletNode(t,e){return function(t,e,n){return Xl(Kl(Vl),"This node only works in a secure context (https or localhost)"),new Vl(t,e,n)}(this.rawContext,t,e)}addAudioWorkletModule(t,e){return cu(this,void 0,void 0,(function*(){Xl(Kl(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletModules.has(e)||this._workletModules.set(e,this.rawContext.audioWorklet.addModule(t)),yield this._workletModules.get(e)}))}workletsAreReady(){return cu(this,void 0,void 0,(function*(){const t=[];this._workletModules.forEach((e=>t.push(e))),yield Promise.all(t)}))}get updateInterval(){return this._ticker.updateInterval}set updateInterval(t){this._ticker.updateInterval=t}get clockSource(){return this._ticker.type}set clockSource(t){this._ticker.type=t}get latencyHint(){return this._latencyHint}_setLatencyHint(t){let e=0;if(this._latencyHint=t,su(t))switch(t){case"interactive":e=.1;break;case"playback":e=.5;break;case"balanced":e=.25}this.lookAhead=e,this.updateInterval=e/2}get rawContext(){return this._context}now(){return this._context.currentTime+this.lookAhead}immediate(){return this._context.currentTime}resume(){return du(this._context)?this._context.resume():Promise.resolve()}close(){return cu(this,void 0,void 0,(function*(){var t;du(this._context)&&(yield this._context.close()),this._initialized&&(t=this,Ou.forEach((e=>e(t))))}))}getConstant(t){if(this._constants.has(t))return this._constants.get(t);{const e=this._context.createBuffer(1,128,this._context.sampleRate),n=e.getChannelData(0);for(let i=0;i<n.length;i++)n[i]=t;const s=this._context.createBufferSource();return s.channelCount=1,s.channelCountMode="explicit",s.buffer=e,s.loop=!0,s.start(0),this._constants.set(t,s),s}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map((t=>this._constants[t].disconnect())),this}_timeoutLoop(){const t=this.now();let e=this._timeouts.peek();for(;this._timeouts.length&&e&&e.time<=t;)e.callback(),this._timeouts.shift(),e=this._timeouts.peek()}setTimeout(t,e){this._timeoutIds++;const n=this.now();return this._timeouts.add({callback:t,id:this._timeoutIds,time:n+e}),this._timeoutIds}clearTimeout(t){return this._timeouts.forEach((e=>{e.id===t&&this._timeouts.remove(e)})),this}clearInterval(t){return this.clearTimeout(t)}setInterval(t,e){const n=++this._timeoutIds,s=()=>{const i=this.now();this._timeouts.add({callback:()=>{t(),s()},id:n,time:i+e})};return s(),n}}function Ru(t,e){nu(e)?e.forEach((e=>Ru(t,e))):Object.defineProperty(t,e,{enumerable:!0,writable:!1})}function Nu(t,e){nu(e)?e.forEach((e=>Nu(t,e))):Object.defineProperty(t,e,{writable:!0})}const Vu=()=>{};class Pu extends wu{constructor(){super(),this.name="ToneAudioBuffer",this.onload=Vu;const t=gu(Pu.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=t.reverse,this.onload=t.onload,t.url&&fu(t.url)||t.url instanceof Pu?this.set(t.url):su(t.url)&&this.load(t.url).catch(t.onerror)}static getDefaults(){return{onerror:Vu,onload:Vu,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:Wu().sampleRate}set(t){return t instanceof Pu?t.loaded?this._buffer=t.get():t.onload=()=>{this.set(t),this.onload(this)}:this._buffer=t,this._reversed&&this._reverse(),this}get(){return this._buffer}load(t){return cu(this,void 0,void 0,(function*(){const e=Pu.load(t).then((t=>{this.set(t),this.onload(this)}));Pu.downloads.push(e);try{yield e}finally{const t=Pu.downloads.indexOf(e);Pu.downloads.splice(t,1)}return this}))}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(t){const e=nu(t)&&t[0].length>0,n=e?t.length:1,s=e?t[0].length:t.length,i=Wu(),o=i.createBuffer(n,s,i.sampleRate),r=e||1!==n?t:[t];for(let a=0;a<n;a++)o.copyToChannel(r[a],a);return this._buffer=o,this}toMono(t){if(tu(t))this.fromArray(this.toArray(t));else{let t=new Float32Array(this.length);const e=this.numberOfChannels;for(let n=0;n<e;n++){const e=this.toArray(n);for(let n=0;n<e.length;n++)t[n]+=e[n]}t=t.map((t=>t/e)),this.fromArray(t)}return this}toArray(t){if(tu(t))return this.getChannelData(t);if(1===this.numberOfChannels)return this.toArray(0);{const t=[];for(let e=0;e<this.numberOfChannels;e++)t[e]=this.getChannelData(e);return t}}getChannelData(t){return this._buffer?this._buffer.getChannelData(t):new Float32Array(0)}slice(t,e=this.duration){const n=Math.floor(t*this.sampleRate),s=Math.floor(e*this.sampleRate);Xl(n<s,"The start time must be less than the end time");const i=s-n,o=Wu().createBuffer(this.numberOfChannels,i,this.sampleRate);for(let r=0;r<this.numberOfChannels;r++)o.copyToChannel(this.getChannelData(r).subarray(n,s),r);return new Pu(o)}_reverse(){if(this.loaded)for(let t=0;t<this.numberOfChannels;t++)this.getChannelData(t).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(t){this._reversed!==t&&(this._reversed=t,this._reverse())}static fromArray(t){return(new Pu).fromArray(t)}static fromUrl(t){return cu(this,void 0,void 0,(function*(){const e=new Pu;return yield e.load(t)}))}static load(t){return cu(this,void 0,void 0,(function*(){const e=t.match(/\[([^\]\[]+\|.+)\]$/);if(e){const n=e[1].split("|");let s=n[0];for(const t of n)if(Pu.supportsType(t)){s=t;break}t=t.replace(e[0],s)}const n=""===Pu.baseUrl||Pu.baseUrl.endsWith("/")?Pu.baseUrl:Pu.baseUrl+"/",s=yield fetch(n+t);if(!s.ok)throw new Error(`could not load url: ${t}`);const i=yield s.arrayBuffer();return yield Wu().decodeAudioData(i)}))}static supportsType(t){const e=t.split("."),n=e[e.length-1];return""!==document.createElement("audio").canPlayType("audio/"+n)}static loaded(){return cu(this,void 0,void 0,(function*(){for(yield Promise.resolve();Pu.downloads.length;)yield Pu.downloads[0]}))}}Pu.baseUrl="",Pu.downloads=[];class Fu extends Iu{constructor(){var t,e,n;super({clockSource:"offline",context:pu(arguments[0])?arguments[0]:(t=arguments[0],e=arguments[1]*arguments[2],n=arguments[2],new ql(t,e,n)),lookAhead:0,updateInterval:pu(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=pu(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(t){return cu(this,void 0,void 0,(function*(){let e=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,e++;const n=Math.floor(this.sampleRate/128);t&&e%n==0&&(yield new Promise((t=>setTimeout(t,1))))}}))}render(t=!0){return cu(this,void 0,void 0,(function*(){yield this.workletsAreReady(),yield this._renderClock(t);const e=yield this._context.startRendering();return new Pu(e)}))}close(){return Promise.resolve()}}const qu=new class extends Du{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(t,e,n){return{}}createChannelMerger(t){return{}}createChannelSplitter(t){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(t){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(t,e){return{}}createPanner(){return{}}createPeriodicWave(t,e,n){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(t){return{}}createMediaElementSource(t){return{}}createMediaStreamDestination(){return{}}decodeAudioData(t){return Promise.resolve({})}createAudioWorkletNode(t,e){return{}}get rawContext(){return{}}addAudioWorkletModule(t,e){return cu(this,void 0,void 0,(function*(){return Promise.resolve()}))}resume(){return Promise.resolve()}setTimeout(t,e){return 0}clearTimeout(t){return this}setInterval(t,e){return 0}clearInterval(t){return this}getConstant(t){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(t){}get destination(){return{}}set destination(t){}now(){return 0}immediate(){return 0}};let ju=qu;function Wu(){var t;return ju===qu&&ru&&(t=new Iu,ju=du(t)?new Iu(t):pu(t)?new Fu(t):t),ju}if(ou&&!ou.TONE_SILENCE_LOGGING){const t=` * Tone.js ${"v"}14.7.77 * `;console.log(`%c${t}`,"background: #000; color: #fff")}function Bu(t){return Math.pow(2,t/12)}let Lu=440;function Uu(t){return Math.round(zu(t))}function zu(t){return 69+12*Math.log2(t/Lu)}class $u extends wu{constructor(t,e,n){super(),this.defaultUnits="s",this._val=e,this._units=n,this.context=t,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:t=>this._frequencyToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:t=>this._ticksToUnits(parseInt(t,10)),regexp:/^(\d+)i$/i},m:{method:t=>this._beatsToUnits(parseInt(t,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(t,e)=>{const n=parseInt(t,10),s="."===e?1.5:1;return 1===n?this._beatsToUnits(this._getTimeSignature())*s:this._beatsToUnits(4/n)*s},regexp:/^(\d+)n(\.?)$/i},number:{method:t=>this._expressions[this.defaultUnits].method.call(this,t),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:t=>this._secondsToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:t=>parseInt(t,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:t=>{const e=parseInt(t,10);return this._beatsToUnits(8/(3*Math.floor(e)))},regexp:/^(\d+)t$/i},tr:{method:(t,e,n)=>{let s=0;return t&&"0"!==t&&(s+=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(s+=this._beatsToUnits(parseFloat(e))),n&&"0"!==n&&(s+=this._beatsToUnits(parseFloat(n)/4)),s},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof $u&&this.fromType(this._val),Jl(this._val))return this._noArg();if(su(this._val)&&Jl(this._units)){for(const t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if(eu(this._val)){let t=0;for(const e in this._val)if(Kl(this._val[e])){const n=this._val[e];t+=new this.constructor(this.context,e).valueOf()*n}return t}if(Kl(this._units)){const t=this._expressions[this._units],e=this._val.toString().trim().match(t.regexp);return e?t.method.apply(this,e.slice(1)):t.method.call(this,this._val)}return su(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(t){return 1/t}_beatsToUnits(t){return 60/this._getBpm()*t}_secondsToUnits(t){return t}_ticksToUnits(t){return t*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(t){switch(this._units=void 0,this.defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency();break;case"midi":this._val=t.toMidi()}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return 1e3*this.toSeconds()}}class Gu extends $u{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:t=>this._now()+new this.constructor(this.context,t).valueOf(),regexp:/^\+(.+)/},quantize:{method:t=>{const e=new Gu(this.context,t).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(e))},regexp:/^@(.+)/}})}quantize(t,e=1){const n=new this.constructor(this.context,t).valueOf(),s=this.valueOf();return s+(Math.round(s/n)*n-s)*e}toNotation(){const t=this.toSeconds(),e=["1m"];for(let i=1;i<9;i++){const t=Math.pow(2,i);e.push(t+"n."),e.push(t+"n"),e.push(t+"t")}e.push("0");let n=e[0],s=new Gu(this.context,e[0]).toSeconds();return e.forEach((e=>{const i=new Gu(this.context,e).toSeconds();Math.abs(i-t)<Math.abs(s-t)&&(n=e,s=i)})),n}toBarsBeatsSixteenths(){const t=this._beatsToUnits(1);let e=this.valueOf()/t;e=parseFloat(e.toFixed(4));const n=Math.floor(e/this._getTimeSignature());let s=e%1*4;e=Math.floor(e)%this._getTimeSignature();const i=s.toString();i.length>3&&(s=parseFloat(parseFloat(i).toFixed(3)));return[n,e,s].join(":")}toTicks(){const t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.round(e*this._getPPQ())}toSeconds(){return this.valueOf()}toMidi(){return Uu(this.toFrequency())}_now(){return this.context.now()}}class Xu extends Gu{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return Lu}static set A4(t){!function(t){Lu=t}(t)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(t){return"midi"===this.defaultUnits?t:Xu.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method(t,e){const n=Yu[t.toLowerCase()]+12*(parseInt(e,10)+1);return"midi"===this.defaultUnits?n:Xu.mtof(n)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(t,e,n){let s=1;return t&&"0"!==t&&(s*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(s*=this._beatsToUnits(parseFloat(e))),n&&"0"!==n&&(s*=this._beatsToUnits(parseFloat(n)/4)),s}}})}transpose(t){return new Xu(this.context,this.valueOf()*Bu(t))}harmonize(t){return t.map((t=>this.transpose(t)))}toMidi(){return Uu(this.valueOf())}toNote(){const t=this.toFrequency(),e=Math.log2(t/Xu.A4);let n=Math.round(12*e)+57;const s=Math.floor(n/12);s<0&&(n+=-12*s);return Zu[n%12]+s.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.floor(e*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(t){return t}_ticksToUnits(t){return 1/(60*t/(this._getBpm()*this._getPPQ()))}_beatsToUnits(t){return 1/super._beatsToUnits(t)}_secondsToUnits(t){return 1/t}static mtof(t){return function(t){return Lu*Math.pow(2,(t-69)/12)}(t)}static ftom(t){return Uu(t)}}const Yu={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},Zu=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class Hu extends Gu{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class Qu extends wu{constructor(){super();const t=gu(Qu.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=t.context}static getDefaults(){return{context:Wu()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(t){return new Gu(this.context,t).toSeconds()}toFrequency(t){return new Xu(this.context,t).toFrequency()}toTicks(t){return new Hu(this.context,t).toTicks()}_getPartialProperties(t){const e=this.get();return Object.keys(e).forEach((n=>{Jl(t[n])&&delete e[n]})),e}get(){const t=this.constructor.getDefaults();return Object.keys(t).forEach((e=>{if(Reflect.has(this,e)){const n=this[e];Kl(n)&&Kl(n.value)&&Kl(n.setValueAtTime)?t[e]=n.value:n instanceof Qu?t[e]=n._getPartialProperties(t[e]):nu(n)||tu(n)||su(n)||"boolean"==typeof n?t[e]=n:delete t[e]}})),t}set(t){return Object.keys(t).forEach((e=>{Reflect.has(this,e)&&Kl(this[e])&&(this[e]&&Kl(this[e].value)&&Kl(this[e].setValueAtTime)?this[e].value!==t[e]&&(this[e].value=t[e]):this[e]instanceof Qu?this[e].set(t[e]):this[e]=t[e])})),this}}class Ju extends Su{constructor(t="stopped"){super(),this.name="StateTimeline",this._initial=t,this.setStateAtTime(this._initial,0)}getValueAtTime(t){const e=this.get(t);return null!==e?e.state:this._initial}setStateAtTime(t,e,n){return Yl(e,0),this.add(Object.assign({},n,{state:t,time:e})),this}getLastState(t,e){for(let n=this._search(e);n>=0;n--){const e=this._timeline[n];if(e.state===t)return e}}getNextState(t,e){const n=this._search(e);if(-1!==n)for(let s=n;s<this._timeline.length;s++){const e=this._timeline[s];if(e.state===t)return e}}}class Ku extends Qu{constructor(){super(gu(Ku.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;const t=gu(Ku.getDefaults(),arguments,["param","units","convert"]);for(Xl(Kl(t.param)&&(uu(t.param)||t.param instanceof Ku),"param must be an AudioParam");!uu(t.param);)t.param=t.param._param;this._swappable=!!Kl(t.swappable)&&t.swappable,this._swappable?(this.input=this.context.createGain(),this._param=t.param,this.input.connect(this._param)):this._param=this.input=t.param,this._events=new Su(1e3),this._initialValue=this._param.defaultValue,this.units=t.units,this.convert=t.convert,this._minValue=t.minValue,this._maxValue=t.maxValue,Kl(t.value)&&t.value!==this._toType(this._initialValue)&&this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(Qu.getDefaults(),{convert:!0,units:"number"})}get value(){const t=this.now();return this.getValueAtTime(t)}set value(t){this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())}get minValue(){return Kl(this._minValue)?this._minValue:"time"===this.units||"frequency"===this.units||"normalRange"===this.units||"positive"===this.units||"transportTime"===this.units||"ticks"===this.units||"bpm"===this.units||"hertz"===this.units||"samples"===this.units?0:"audioRange"===this.units?-1:"decibels"===this.units?-1/0:this._param.minValue}get maxValue(){return Kl(this._maxValue)?this._maxValue:"normalRange"===this.units||"audioRange"===this.units?1:this._param.maxValue}_is(t,e){return this.units===e}_assertRange(t){return Kl(this.maxValue)&&Kl(this.minValue)&&Yl(t,this._fromType(this.minValue),this._fromType(this.maxValue)),t}_fromType(t){return this.convert&&!this.overridden?this._is(t,"time")?this.toSeconds(t):this._is(t,"decibels")?(e=t,Math.pow(10,e/20)):this._is(t,"frequency")?this.toFrequency(t):t:this.overridden?0:t;var e}_toType(t){return this.convert&&"decibels"===this.units?(e=t,Math.log(e)/Math.LN10*20):t;var e}setValueAtTime(t,e){const n=this.toSeconds(e),s=this._fromType(t);return Xl(isFinite(s)&&isFinite(n),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(s),this.log(this.units,"setValueAtTime",t,n),this._events.add({time:n,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,n),this}getValueAtTime(t){const e=Math.max(this.toSeconds(t),0),n=this._events.getAfter(e),s=this._events.get(e);let i=this._initialValue;if(null===s)i=this._initialValue;else if("setTargetAtTime"!==s.type||null!==n&&"setValueAtTime"!==n.type)if(null===n)i=s.value;else if("linearRampToValueAtTime"===n.type||"exponentialRampToValueAtTime"===n.type){let t=s.value;if("setTargetAtTime"===s.type){const e=this._events.getBefore(s.time);t=null===e?this._initialValue:e.value}i="linearRampToValueAtTime"===n.type?this._linearInterpolate(s.time,t,n.time,n.value,e):this._exponentialInterpolate(s.time,t,n.time,n.value,e)}else i=s.value;else{const t=this._events.getBefore(s.time);let n;n=null===t?this._initialValue:t.value,"setTargetAtTime"===s.type&&(i=this._exponentialApproach(s.time,n,s.value,s.constant,e))}return this._toType(i)}setRampPoint(t){t=this.toSeconds(t);let e=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),0===this._fromType(e)&&(e=this._toType(this._minOutput)),this.setValueAtTime(e,t),this}linearRampToValueAtTime(t,e){const n=this._fromType(t),s=this.toSeconds(e);return Xl(isFinite(n)&&isFinite(s),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(n),this._events.add({time:s,type:"linearRampToValueAtTime",value:n}),this.log(this.units,"linearRampToValueAtTime",t,s),this._param.linearRampToValueAtTime(n,s),this}exponentialRampToValueAtTime(t,e){let n=this._fromType(t);n=Cu(n,0)?this._minOutput:n,this._assertRange(n);const s=this.toSeconds(e);return Xl(isFinite(n)&&isFinite(s),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({time:s,type:"exponentialRampToValueAtTime",value:n}),this.log(this.units,"exponentialRampToValueAtTime",t,s),this._param.exponentialRampToValueAtTime(n,s),this}exponentialRampTo(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialRampToValueAtTime(t,n+this.toSeconds(e)),this}linearRampTo(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.linearRampToValueAtTime(t,n+this.toSeconds(e)),this}targetRampTo(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialApproachValueAtTime(t,n,e),this}exponentialApproachValueAtTime(t,e,n){e=this.toSeconds(e),n=this.toSeconds(n);const s=Math.log(n+1)/Math.log(200);return this.setTargetAtTime(t,e,s),this.cancelAndHoldAtTime(e+.9*n),this.linearRampToValueAtTime(t,e+n),this}setTargetAtTime(t,e,n){const s=this._fromType(t);Xl(isFinite(n)&&n>0,"timeConstant must be a number greater than 0");const i=this.toSeconds(e);return this._assertRange(s),Xl(isFinite(s)&&isFinite(i),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({constant:n,time:i,type:"setTargetAtTime",value:s}),this.log(this.units,"setTargetAtTime",t,i,n),this._param.setTargetAtTime(s,i,n),this}setValueCurveAtTime(t,e,n,s=1){n=this.toSeconds(n),e=this.toSeconds(e);const i=this._fromType(t[0])*s;this.setValueAtTime(this._toType(i),e);const o=n/(t.length-1);for(let r=1;r<t.length;r++){const n=this._fromType(t[r])*s;this.linearRampToValueAtTime(this._toType(n),e+r*o)}return this}cancelScheduledValues(t){const e=this.toSeconds(t);return Xl(isFinite(e),`Invalid argument to cancelScheduledValues: ${JSON.stringify(t)}`),this._events.cancel(e),this._param.cancelScheduledValues(e),this.log(this.units,"cancelScheduledValues",e),this}cancelAndHoldAtTime(t){const e=this.toSeconds(t),n=this._fromType(this.getValueAtTime(e));Xl(isFinite(e),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(t)}`),this.log(this.units,"cancelAndHoldAtTime",e,"value="+n);const s=this._events.get(e),i=this._events.getAfter(e);return s&&Cu(s.time,e)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(e),this._events.cancel(e+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),"linearRampToValueAtTime"===i.type?this.linearRampToValueAtTime(this._toType(n),e):"exponentialRampToValueAtTime"===i.type&&this.exponentialRampToValueAtTime(this._toType(n),e)),this._events.add({time:e,type:"setValueAtTime",value:n}),this._param.setValueAtTime(n,e),this}rampTo(t,e=.1,n){return"frequency"===this.units||"bpm"===this.units||"decibels"===this.units?this.exponentialRampTo(t,e,n):this.linearRampTo(t,e,n),this}apply(t){const e=this.context.currentTime;t.setValueAtTime(this.getValueAtTime(e),e);const n=this._events.get(e);if(n&&"setTargetAtTime"===n.type){const s=this._events.getAfter(n.time),i=s?s.time:e+2,o=(i-e)/10;for(let n=e;n<i;n+=o)t.linearRampToValueAtTime(this.getValueAtTime(n),n)}return this._events.forEachAfter(this.context.currentTime,(e=>{"cancelScheduledValues"===e.type?t.cancelScheduledValues(e.time):"setTargetAtTime"===e.type?t.setTargetAtTime(e.value,e.time,e.constant):t[e.type](e.value,e.time)})),this}setParam(t){Xl(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const e=this.input;return e.disconnect(this._param),this.apply(t),this._param=t,e.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(t,e,n,s,i){return n+(e-n)*Math.exp(-(i-t)/s)}_linearInterpolate(t,e,n,s,i){return e+(i-t)/(n-t)*(s-e)}_exponentialInterpolate(t,e,n,s,i){return e*Math.pow(s/e,(i-t)/(n-t))}}class th extends Qu{constructor(){super(...arguments),this.name="ToneAudioNode",this._internalChannels=[]}get numberOfInputs(){return Kl(this.input)?uu(this.input)||this.input instanceof Ku?1:this.input.numberOfInputs:0}get numberOfOutputs(){return Kl(this.output)?this.output.numberOfOutputs:0}_isAudioNode(t){return Kl(t)&&(t instanceof th||hu(t))}_getInternalNodes(){const t=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&t.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&t.push(this.output),t}_setChannelProperties(t){this._getInternalNodes().forEach((e=>{e.channelCount=t.channelCount,e.channelCountMode=t.channelCountMode,e.channelInterpretation=t.channelInterpretation}))}_getChannelProperties(){const t=this._getInternalNodes();Xl(t.length>0,"ToneAudioNode does not have any internal nodes");const e=t[0];return{channelCount:e.channelCount,channelCountMode:e.channelCountMode,channelInterpretation:e.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCount:t}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCountMode:t}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelInterpretation:t}))}connect(t,e=0,n=0){return nh(this,t,e,n),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return Ql("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(t,e=0,n=0){return function(t,e,n=0,s=0){if(Kl(e))for(;e instanceof th;)e=e.input;for(;!hu(t);)Kl(t.output)&&(t=t.output);uu(e)?t.disconnect(e,n):hu(e)?t.disconnect(e,n,s):t.disconnect()}(this,t,e,n),this}chain(...t){return eh(this,...t),this}fan(...t){return t.forEach((t=>this.connect(t))),this}dispose(){return super.dispose(),Kl(this.input)&&(this.input instanceof th?this.input.dispose():hu(this.input)&&this.input.disconnect()),Kl(this.output)&&(this.output instanceof th?this.output.dispose():hu(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function eh(...t){const e=t.shift();t.reduce(((t,e)=>(t instanceof th?t.connect(e):hu(t)&&nh(t,e),e)),e)}function nh(t,e,n=0,s=0){for(Xl(Kl(t),"Cannot connect from undefined node"),Xl(Kl(e),"Cannot connect to undefined node"),(e instanceof th||hu(e))&&Xl(e.numberOfInputs>0,"Cannot connect to node with no inputs"),Xl(t.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof th||e instanceof Ku;)Kl(e.input)&&(e=e.input);for(;t instanceof th;)Kl(t.output)&&(t=t.output);uu(e)?t.connect(e,n):t.connect(e,n,s)}class sh extends th{constructor(){super(gu(sh.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;const t=gu(sh.getDefaults(),arguments,["gain","units"]);this.gain=new Ku({context:this.context,convert:t.convert,param:this._gainNode.gain,units:t.units,value:t.gain,minValue:t.minValue,maxValue:t.maxValue}),Ru(this,"gain")}static getDefaults(){return Object.assign(th.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class ih extends th{constructor(t){super(t),this.onended=Vu,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new sh({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(t){const e=this.toSeconds(t);return-1!==this._startTime&&e>=this._startTime&&(-1===this._stopTime||e<=this._stopTime)?"started":"stopped"},this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut,this._curve=t.curve,this.onended=t.onended}static getDefaults(){return Object.assign(th.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:Vu})}_startGain(t,e=1){Xl(-1===this._startTime,"Source cannot be started more than once");const n=this.toSeconds(this._fadeIn);return this._startTime=t+n,this._startTime=Math.max(this._startTime,this.context.currentTime),n>0?(this._gainNode.gain.setValueAtTime(0,t),"linear"===this._curve?this._gainNode.gain.linearRampToValueAtTime(e,t+n):this._gainNode.gain.exponentialApproachValueAtTime(e,t,n)):this._gainNode.gain.setValueAtTime(e,t),this}stop(t){return this.log("stop",t),this._stopGain(this.toSeconds(t)),this}_stopGain(t){Xl(-1!==this._startTime,"'start' must be called before 'stop'"),this.cancelStop();const e=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(t)+e,this._stopTime=Math.max(this._stopTime,this.context.currentTime),e>0?"linear"===this._curve?this._gainNode.gain.linearRampTo(0,e,t):this._gainNode.gain.targetRampTo(0,e,t):(this._gainNode.gain.cancelAndHoldAtTime(t),this._gainNode.gain.setValueAtTime(0,t)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout((()=>{const t="exponential"===this._curve?2*e:0;this._stopSource(this.now()+t),this._onended()}),this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==Vu&&(this.onended(this),this.onended=Vu,!this.context.isOffline)){const t=()=>this.dispose();void 0!==window.requestIdleCallback?window.requestIdleCallback(t):setTimeout(t,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),Xl(-1!==this._startTime,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.disconnect(),this}}class oh extends ih{constructor(){super(gu(oh.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();const t=gu(oh.getDefaults(),arguments,["offset"]);nh(this._source,this._gainNode),this.offset=new Ku({context:this.context,convert:t.convert,param:this._source.offset,units:t.units,value:t.offset,minValue:t.minValue,maxValue:t.maxValue})}static getDefaults(){return Object.assign(ih.getDefaults(),{convert:!0,offset:1,units:"number"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._source.start(e),this}_stopSource(t){this._source.stop(t)}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class rh extends th{constructor(){super(gu(rh.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;const t=gu(rh.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new oh({context:this.context,convert:t.convert,offset:t.value,units:t.units,minValue:t.minValue,maxValue:t.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(th.getDefaults(),{convert:!0,units:"number",value:0})}connect(t,e=0,n=0){return ah(this,t,e,n),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(t,e){return this._param.setValueAtTime(t,e),this}getValueAtTime(t){return this._param.getValueAtTime(t)}setRampPoint(t){return this._param.setRampPoint(t),this}linearRampToValueAtTime(t,e){return this._param.linearRampToValueAtTime(t,e),this}exponentialRampToValueAtTime(t,e){return this._param.exponentialRampToValueAtTime(t,e),this}exponentialRampTo(t,e,n){return this._param.exponentialRampTo(t,e,n),this}linearRampTo(t,e,n){return this._param.linearRampTo(t,e,n),this}targetRampTo(t,e,n){return this._param.targetRampTo(t,e,n),this}exponentialApproachValueAtTime(t,e,n){return this._param.exponentialApproachValueAtTime(t,e,n),this}setTargetAtTime(t,e,n){return this._param.setTargetAtTime(t,e,n),this}setValueCurveAtTime(t,e,n,s){return this._param.setValueCurveAtTime(t,e,n,s),this}cancelScheduledValues(t){return this._param.cancelScheduledValues(t),this}cancelAndHoldAtTime(t){return this._param.cancelAndHoldAtTime(t),this}rampTo(t,e,n){return this._param.rampTo(t,e,n),this}get value(){return this._param.value}set value(t){this._param.value=t}get convert(){return this._param.convert}set convert(t){this._param.convert=t}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(t){this._param.overridden=t}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(t){return this._param.apply(t),this}}function ah(t,e,n,s){(e instanceof Ku||uu(e)||e instanceof rh&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof rh&&(e.overridden=!0)),nh(t,e,n,s)}class ch extends Ku{constructor(){super(gu(ch.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new Su(1/0),this._multiplier=1;const t=gu(ch.getDefaults(),arguments,["value"]);this._multiplier=t.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(t.value)}),this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(Ku.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(t,e,n){e=this.toSeconds(e),this.setRampPoint(e);const s=this._fromType(t),i=this._events.get(e),o=Math.round(Math.max(1/n,1));for(let r=0;r<=o;r++){const t=n*r+e,o=this._exponentialApproach(i.time,i.value,s,n,t);this.linearRampToValueAtTime(this._toType(o),t)}return this}setValueAtTime(t,e){const n=this.toSeconds(e);super.setValueAtTime(t,e);const s=this._events.get(n),i=this._events.previousEvent(s),o=this._getTicksUntilEvent(i,n);return s.ticks=Math.max(o,0),this}linearRampToValueAtTime(t,e){const n=this.toSeconds(e);super.linearRampToValueAtTime(t,e);const s=this._events.get(n),i=this._events.previousEvent(s),o=this._getTicksUntilEvent(i,n);return s.ticks=Math.max(o,0),this}exponentialRampToValueAtTime(t,e){e=this.toSeconds(e);const n=this._fromType(t),s=this._events.get(e),i=Math.round(Math.max(10*(e-s.time),1)),o=(e-s.time)/i;for(let r=0;r<=i;r++){const t=o*r+s.time,i=this._exponentialInterpolate(s.time,s.value,e,n,t);this.linearRampToValueAtTime(this._toType(i),t)}return this}_getTicksUntilEvent(t,e){if(null===t)t={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Jl(t.ticks)){const e=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(e,t.time)}const n=this._fromType(this.getValueAtTime(t.time));let s=this._fromType(this.getValueAtTime(e));const i=this._events.get(e);return i&&i.time===e&&"setValueAtTime"===i.type&&(s=this._fromType(this.getValueAtTime(e-this.sampleTime))),.5*(e-t.time)*(n+s)+t.ticks}getTicksAtTime(t){const e=this.toSeconds(t),n=this._events.get(e);return Math.max(this._getTicksUntilEvent(n,e),0)}getDurationOfTicks(t,e){const n=this.toSeconds(e),s=this.getTicksAtTime(e);return this.getTimeOfTick(s+t)-n}getTimeOfTick(t){const e=this._events.get(t,"ticks"),n=this._events.getAfter(t,"ticks");if(e&&e.ticks===t)return e.time;if(e&&n&&"linearRampToValueAtTime"===n.type&&e.value!==n.value){const s=this._fromType(this.getValueAtTime(e.time)),i=(this._fromType(this.getValueAtTime(n.time))-s)/(n.time-e.time),o=Math.sqrt(Math.pow(s,2)-2*i*(e.ticks-t)),r=(-s+o)/i,a=(-s-o)/i;return(r>0?r:a)+e.time}return e?0===e.value?1/0:e.time+(t-e.ticks)/e.value:t/this._initialValue}ticksToTime(t,e){return this.getDurationOfTicks(t,e)}timeToTicks(t,e){const n=this.toSeconds(e),s=this.toSeconds(t),i=this.getTicksAtTime(n);return this.getTicksAtTime(n+s)-i}_fromType(t){return"bpm"===this.units&&this.multiplier?1/(60/t/this.multiplier):super._fromType(t)}_toType(t){return"bpm"===this.units&&this.multiplier?t/this.multiplier*60:super._toType(t)}get multiplier(){return this._multiplier}set multiplier(t){const e=this.value;this._multiplier=t,this.cancelScheduledValues(0),this.setValueAtTime(e,0)}}class lh extends rh{constructor(){super(gu(lh.getDefaults(),arguments,["value"])),this.name="TickSignal";const t=gu(lh.getDefaults(),arguments,["value"]);this.input=this._param=new ch({context:this.context,convert:t.convert,multiplier:t.multiplier,param:this._constantSource.offset,units:t.units,value:t.value})}static getDefaults(){return Object.assign(rh.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(t,e){return this._param.ticksToTime(t,e)}timeToTicks(t,e){return this._param.timeToTicks(t,e)}getTimeOfTick(t){return this._param.getTimeOfTick(t)}getDurationOfTicks(t,e){return this._param.getDurationOfTicks(t,e)}getTicksAtTime(t){return this._param.getTicksAtTime(t)}get multiplier(){return this._param.multiplier}set multiplier(t){this._param.multiplier=t}dispose(){return super.dispose(),this._param.dispose(),this}}class uh extends Qu{constructor(){super(gu(uh.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new Ju,this._tickOffset=new Su;const t=gu(uh.getDefaults(),arguments,["frequency"]);this.frequency=new lh({context:this.context,units:t.units,value:t.frequency}),Ru(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},Qu.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(t,e){const n=this.toSeconds(t);return"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),Kl(e)&&this.setTicksAtTime(e,n)),this}stop(t){const e=this.toSeconds(t);if("stopped"===this._state.getValueAtTime(e)){const t=this._state.get(e);t&&t.time>0&&(this._tickOffset.cancel(t.time),this._state.cancel(t.time))}return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this.setTicksAtTime(0,e),this}pause(t){const e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&this._state.setStateAtTime("paused",e),this}cancel(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this}getTicksAtTime(t){const e=this.toSeconds(t),n=this._state.getLastState("stopped",e),s={state:"paused",time:e};this._state.add(s);let i=n,o=0;return this._state.forEachBetween(n.time,e+this.sampleTime,(t=>{let e=i.time;const n=this._tickOffset.get(t.time);n&&n.time>=i.time&&(o=n.ticks,e=n.time),"started"===i.state&&"started"!==t.state&&(o+=this.frequency.getTicksAtTime(t.time)-this.frequency.getTicksAtTime(e)),i=t})),this._state.remove(s),o}get ticks(){return this.getTicksAtTime(this.now())}set ticks(t){this.setTicksAtTime(t,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(t){const e=this.now(),n=this.frequency.timeToTicks(t,e);this.setTicksAtTime(n,e)}getSecondsAtTime(t){t=this.toSeconds(t);const e=this._state.getLastState("stopped",t),n={state:"paused",time:t};this._state.add(n);let s=e,i=0;return this._state.forEachBetween(e.time,t+this.sampleTime,(t=>{let e=s.time;const n=this._tickOffset.get(t.time);n&&n.time>=s.time&&(i=n.seconds,e=n.time),"started"===s.state&&"started"!==t.state&&(i+=t.time-e),s=t})),this._state.remove(n),i}setTicksAtTime(t,e){return e=this.toSeconds(e),this._tickOffset.cancel(e),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(t,e),ticks:t,time:e}),this}getStateAtTime(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)}getTimeOfTick(t,e=this.now()){const n=this._tickOffset.get(e),s=this._state.get(e),i=Math.max(n.time,s.time),o=this.frequency.getTicksAtTime(i)+t-n.ticks;return this.frequency.getTimeOfTick(o)}forEachTickBetween(t,e,n){let s=this._state.get(t);this._state.forEachBetween(t,e,(e=>{s&&"started"===s.state&&"started"!==e.state&&this.forEachTickBetween(Math.max(s.time,t),e.time-this.sampleTime,n),s=e}));let i=null;if(s&&"started"===s.state){const r=Math.max(s.time,t),a=this.frequency.getTicksAtTime(r),c=a-this.frequency.getTicksAtTime(s.time);let l=Math.ceil(c)-c;l=Cu(l,1)?0:l;let u=this.frequency.getTimeOfTick(a+l);for(;u<e;){try{n(u,Math.round(this.getTicksAtTime(u)))}catch(o){i=o;break}u+=this.frequency.getDurationOfTicks(1,u)}}if(i)throw i;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this}}class hh extends Qu{constructor(){super(gu(hh.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=Vu,this._lastUpdate=0,this._state=new Ju("stopped"),this._boundLoop=this._loop.bind(this);const t=gu(hh.getDefaults(),arguments,["callback","frequency"]);this.callback=t.callback,this._tickSource=new uh({context:this.context,frequency:t.frequency,units:t.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,Ru(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(Qu.getDefaults(),{callback:Vu,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(t,e){Zl(this.context);const n=this.toSeconds(t);return this.log("start",n),"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),this._tickSource.start(n,e),n<this._lastUpdate&&this.emit("start",n,e)),this}stop(t){const e=this.toSeconds(t);return this.log("stop",e),this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._tickSource.stop(e),e<this._lastUpdate&&this.emit("stop",e),this}pause(t){const e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&(this._state.setStateAtTime("paused",e),this._tickSource.pause(e),e<this._lastUpdate&&this.emit("pause",e)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(t){this._tickSource.ticks=t}get seconds(){return this._tickSource.seconds}set seconds(t){this._tickSource.seconds=t}getSecondsAtTime(t){return this._tickSource.getSecondsAtTime(t)}setTicksAtTime(t,e){return this._tickSource.setTicksAtTime(t,e),this}getTimeOfTick(t,e=this.now()){return this._tickSource.getTimeOfTick(t,e)}getTicksAtTime(t){return this._tickSource.getTicksAtTime(t)}nextTickTime(t,e){const n=this.toSeconds(e),s=this.getTicksAtTime(n);return this._tickSource.getTimeOfTick(s+t,n)}_loop(){const t=this._lastUpdate,e=this.now();this._lastUpdate=e,this.log("loop",t,e),t!==e&&(this._state.forEachBetween(t,e,(t=>{switch(t.state){case"started":const e=this._tickSource.getTicksAtTime(t.time);this.emit("start",t.time,e);break;case"stopped":0!==t.time&&this.emit("stop",t.time);break;case"paused":this.emit("pause",t.time)}})),this._tickSource.forEachTickBetween(t,e,((t,e)=>{this.callback(t,e)})))}getStateAtTime(t){const e=this.toSeconds(t);return this._state.getValueAtTime(e)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Eu.mixin(hh);class ph extends wu{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const t=gu(ph.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=t.baseUrl,Object.keys(t.urls).forEach((e=>{this._loadingCount++;const n=t.urls[e];this.add(e,n,this._bufferLoaded.bind(this,t.onload),t.onerror)}))}static getDefaults(){return{baseUrl:"",onerror:Vu,onload:Vu,urls:{}}}has(t){return this._buffers.has(t.toString())}get(t){return Xl(this.has(t),`ToneAudioBuffers has no buffer named: ${t}`),this._buffers.get(t.toString())}_bufferLoaded(t){this._loadingCount--,0===this._loadingCount&&t&&t()}get loaded(){return Array.from(this._buffers).every((([t,e])=>e.loaded))}add(t,e,n=Vu,s=Vu){return su(e)?this._buffers.set(t.toString(),new Pu(this.baseUrl+e,n,s)):this._buffers.set(t.toString(),new Pu(e,n,s)),this}dispose(){return super.dispose(),this._buffers.forEach((t=>t.dispose())),this._buffers.clear(),this}}class dh extends Hu{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(t){return this._getPPQ()*t}_secondsToUnits(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(t){return t}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class fh extends Qu{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Su,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(t,e){return this._events.add({callback:t,time:this.toSeconds(e)}),1===this._events.length&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(t){return this._events.cancel(this.toSeconds(t)),this}_drawLoop(){const t=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=t;){const e=this._events.shift();e&&t-e.time<=this.expiration&&e.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}ku((t=>{t.draw=new fh({context:t})})),Mu((t=>{t.draw.dispose()}));class mh extends wu{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(t){Xl(Kl(t.time),"Events must have a time property"),Xl(Kl(t.duration),"Events must have a duration parameter"),t.time=t.time.valueOf();let e=new _h(t.time,t.time+t.duration,t);for(null===this._root?this._root=e:this._root.insert(e),this._length++;null!==e;)e.updateHeight(),e.updateMax(),this._rebalance(e),e=e.parent;return this}remove(t){if(null!==this._root){const e=[];this._root.search(t.time,e);for(const n of e)if(n.event===t){this._removeNode(n),this._length--;break}}return this}get length(){return this._length}cancel(t){return this.forEachFrom(t,(t=>this.remove(t))),this}_setRoot(t){this._root=t,null!==this._root&&(this._root.parent=null)}_replaceNodeInParent(t,e){null!==t.parent?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)}_removeNode(t){if(null===t.left&&null===t.right)this._replaceNodeInParent(t,null);else if(null===t.right)this._replaceNodeInParent(t,t.left);else if(null===t.left)this._replaceNodeInParent(t,t.right);else{let e,n=null;if(t.getBalance()>0)if(null===t.left.right)e=t.left,e.right=t.right,n=e;else{for(e=t.left.right;null!==e.right;)e=e.right;e.parent&&(e.parent.right=e.left,n=e.parent,e.left=t.left,e.right=t.right)}else if(null===t.right.left)e=t.right,e.left=t.left,n=e;else{for(e=t.right.left;null!==e.left;)e=e.left;e.parent&&(e.parent.left=e.right,n=e.parent,e.left=t.left,e.right=t.right)}null!==t.parent?t.isLeftChild()?t.parent.left=e:t.parent.right=e:this._setRoot(e),n&&this._rebalance(n)}t.dispose()}_rotateLeft(t){const e=t.parent,n=t.isLeftChild(),s=t.right;s&&(t.right=s.left,s.left=t),null!==e?n?e.left=s:e.right=s:this._setRoot(s)}_rotateRight(t){const e=t.parent,n=t.isLeftChild(),s=t.left;s&&(t.left=s.right,s.right=t),null!==e?n?e.left=s:e.right=s:this._setRoot(s)}_rebalance(t){const e=t.getBalance();e>1&&t.left?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&t.right&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))}get(t){if(null!==this._root){const e=[];if(this._root.search(t,e),e.length>0){let t=e[0];for(let n=1;n<e.length;n++)e[n].low>t.low&&(t=e[n]);return t.event}}return null}forEach(t){if(null!==this._root){const e=[];this._root.traverse((t=>e.push(t))),e.forEach((e=>{e.event&&t(e.event)}))}return this}forEachAtTime(t,e){if(null!==this._root){const n=[];this._root.search(t,n),n.forEach((t=>{t.event&&e(t.event)}))}return this}forEachFrom(t,e){if(null!==this._root){const n=[];this._root.searchAfter(t,n),n.forEach((t=>{t.event&&e(t.event)}))}return this}dispose(){return super.dispose(),null!==this._root&&this._root.traverse((t=>t.dispose())),this._root=null,this}}class _h{constructor(t,e,n){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=n,this.low=t,this.high=e,this.max=this.high}insert(t){t.low<=this.low?null===this.left?this.left=t:this.left.insert(t):null===this.right?this.right=t:this.right.insert(t)}search(t,e){t>this.max||(null!==this.left&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),this.low>t||null!==this.right&&this.right.search(t,e))}searchAfter(t,e){this.low>=t&&(e.push(this),null!==this.left&&this.left.searchAfter(t,e)),null!==this.right&&this.right.searchAfter(t,e)}traverse(t){t(this),null!==this.left&&this.left.traverse(t),null!==this.right&&this.right.traverse(t)}updateHeight(){null!==this.left&&null!==this.right?this.height=Math.max(this.left.height,this.right.height)+1:null!==this.right?this.height=this.right.height+1:null!==this.left?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let t=0;return null!==this.left&&null!==this.right?t=this.left.height-this.right.height:null!==this.left?t=this.left.height+1:null!==this.right&&(t=-(this.right.height+1)),t}isLeftChild(){return null!==this.parent&&this.parent.left===this}get left(){return this._left}set left(t){this._left=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(t){this._right=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class gh extends th{constructor(){super(gu(gh.getDefaults(),arguments,["volume"])),this.name="Volume";const t=gu(gh.getDefaults(),arguments,["volume"]);this.input=this.output=new sh({context:this.context,gain:t.volume,units:"decibels"}),this.volume=this.output.gain,Ru(this,"volume"),this._unmutedVolume=t.volume,this.mute=t.mute}static getDefaults(){return Object.assign(th.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class vh extends th{constructor(){super(gu(vh.getDefaults(),arguments)),this.name="Destination",this.input=new gh({context:this.context}),this.output=new sh({context:this.context}),this.volume=this.input.volume;const t=gu(vh.getDefaults(),arguments);eh(this.input,this.output,this.context.rawContext.destination),this.mute=t.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(th.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(t){this.input.mute=t}chain(...t){return this.input.disconnect(),t.unshift(this.input),t.push(this.output),eh(...t),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}ku((t=>{t.destination=new vh({context:t})})),Mu((t=>{t.destination.dispose()}));class yh extends wu{constructor(t){super(),this.name="TimelineValue",this._timeline=new Su({memory:10}),this._initialValue=t}set(t,e){return this._timeline.add({value:t,time:e}),this}get(t){const e=this._timeline.get(t);return e?e.value:this._initialValue}}class wh{constructor(t,e){this.id=wh._eventId++;const n=Object.assign(wh.getDefaults(),e);this.transport=t,this.callback=n.callback,this._once=n.once,this.time=n.time}static getDefaults(){return{callback:Vu,once:!1,time:0}}invoke(t){this.callback&&(this.callback(t),this._once&&this.transport.clear(this.id))}dispose(){return this.callback=void 0,this}}wh._eventId=0;class xh extends wh{constructor(t,e){super(t,e),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const n=Object.assign(xh.getDefaults(),e);this.duration=new dh(t.context,n.duration).valueOf(),this._interval=new dh(t.context,n.interval).valueOf(),this._nextTick=n.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},wh.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(t){this._createEvents(t),super.invoke(t)}_createEvents(t){const e=this.transport.getTicksAtTime(t);e>=this.time&&e>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new dh(this.context,this._nextTick).toSeconds()))}_restart(t){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.time;const e=this.transport.getTicksAtTime(t);e>this.time&&(this._nextTick=this.time+Math.ceil((e-this.time)/this._interval)*this._interval),this._currentId=this.transport.scheduleOnce(this.invoke.bind(this),new dh(this.context,this._nextTick).toSeconds()),this._nextTick+=this._interval,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new dh(this.context,this._nextTick).toSeconds())}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this}}class bh extends Qu{constructor(){super(gu(bh.getDefaults(),arguments)),this.name="Transport",this._loop=new yh(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Su,this._repeatedEvents=new mh,this._syncedSignals=[],this._swingAmount=0;const t=gu(bh.getDefaults(),arguments);this._ppq=t.ppq,this._clock=new hh({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=t.ppq,this.bpm.setValueAtTime(t.bpm,0),Ru(this,"bpm"),this._timeSignature=t.timeSignature,this._swingTicks=t.ppq/2}static getDefaults(){return Object.assign(Qu.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(t,e){if(this._loop.get(t)&&e>=this._loopEnd&&(this.emit("loopEnd",t),this._clock.setTicksAtTime(this._loopStart,t),e=this._loopStart,this.emit("loopStart",t,this._clock.getSecondsAtTime(t)),this.emit("loop",t)),this._swingAmount>0&&e%this._ppq!=0&&e%(2*this._swingTicks)!=0){const n=e%(2*this._swingTicks)/(2*this._swingTicks),s=Math.sin(n*Math.PI)*this._swingAmount;t+=new dh(this.context,2*this._swingTicks/3).toSeconds()*s}this._timeline.forEachAtTime(e,(e=>e.invoke(t)))}schedule(t,e){const n=new wh(this,{callback:t,time:new Hu(this.context,e).toTicks()});return this._addEvent(n,this._timeline)}scheduleRepeat(t,e,n,s=1/0){const i=new xh(this,{callback:t,duration:new Gu(this.context,s).toTicks(),interval:new Gu(this.context,e).toTicks(),time:new Hu(this.context,n).toTicks()});return this._addEvent(i,this._repeatedEvents)}scheduleOnce(t,e){const n=new wh(this,{callback:t,once:!0,time:new Hu(this.context,e).toTicks()});return this._addEvent(n,this._timeline)}clear(t){if(this._scheduledEvents.hasOwnProperty(t)){const e=this._scheduledEvents[t.toString()];e.timeline.remove(e.event),e.event.dispose(),delete this._scheduledEvents[t.toString()]}return this}_addEvent(t,e){return this._scheduledEvents[t.id.toString()]={event:t,timeline:e},e.add(t),t.id}cancel(t=0){const e=this.toTicks(t);return this._timeline.forEachFrom(e,(t=>this.clear(t.id))),this._repeatedEvents.forEachFrom(e,(t=>this.clear(t.id))),this}_bindClockEvents(){this._clock.on("start",((t,e)=>{e=new dh(this.context,e).toSeconds(),this.emit("start",t,e)})),this._clock.on("stop",(t=>{this.emit("stop",t)})),this._clock.on("pause",(t=>{this.emit("pause",t)}))}get state(){return this._clock.getStateAtTime(this.now())}start(t,e){let n;return Kl(e)&&(n=this.toTicks(e)),this._clock.start(t,n),this}stop(t){return this._clock.stop(t),this}pause(t){return this._clock.pause(t),this}toggle(t){return t=this.toSeconds(t),"started"!==this._clock.getStateAtTime(t)?this.start(t):this.stop(t),this}get timeSignature(){return this._timeSignature}set timeSignature(t){nu(t)&&(t=t[0]/t[1]*4),this._timeSignature=t}get loopStart(){return new Gu(this.context,this._loopStart,"i").toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t)}get loopEnd(){return new Gu(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t)}get loop(){return this._loop.get(this.now())}set loop(t){this._loop.set(t,this.now())}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get swing(){return this._swingAmount}set swing(t){this._swingAmount=t}get swingSubdivision(){return new dh(this.context,this._swingTicks).toNotation()}set swingSubdivision(t){this._swingTicks=this.toTicks(t)}get position(){const t=this.now(),e=this._clock.getTicksAtTime(t);return new dh(this.context,e).toBarsBeatsSixteenths()}set position(t){const e=this.toTicks(t);this.ticks=e}get seconds(){return this._clock.seconds}set seconds(t){const e=this.now(),n=this._clock.frequency.timeToTicks(t,e);this.ticks=n}get progress(){if(this.loop){const t=this.now();return(this._clock.getTicksAtTime(t)-this._loopStart)/(this._loopEnd-this._loopStart)}return 0}get ticks(){return this._clock.ticks}set ticks(t){if(this._clock.ticks!==t){const e=this.now();if("started"===this.state){const n=this._clock.getTicksAtTime(e),s=e+this._clock.frequency.getDurationOfTicks(Math.ceil(n)-n,e);this.emit("stop",s),this._clock.setTicksAtTime(t,s),this.emit("start",s,this._clock.getSecondsAtTime(s))}else this._clock.setTicksAtTime(t,e)}}getTicksAtTime(t){return Math.round(this._clock.getTicksAtTime(t))}getSecondsAtTime(t){return this._clock.getSecondsAtTime(t)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(t){this._clock.frequency.multiplier=t}nextSubdivision(t){if(t=this.toTicks(t),"started"!==this.state)return 0;{const e=this.now(),n=t-this.getTicksAtTime(e)%t;return this._clock.nextTickTime(n,e)}}syncSignal(t,e){if(!e){const n=this.now();if(0!==t.getValueAtTime(n)){const s=1/(60/this.bpm.getValueAtTime(n)/this.PPQ);e=t.getValueAtTime(n)/s}else e=0}const n=new sh(e);return this.bpm.connect(n),n.connect(t._param),this._syncedSignals.push({initial:t.value,ratio:n,signal:t}),t.value=0,this}unsyncSignal(t){for(let e=this._syncedSignals.length-1;e>=0;e--){const n=this._syncedSignals[e];n.signal===t&&(n.ratio.dispose(),n.signal.value=n.initial,this._syncedSignals.splice(e,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),Nu(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Eu.mixin(bh),ku((t=>{t.transport=new bh({context:t})})),Mu((t=>{t.transport.dispose()}));class Th extends th{constructor(t){super(t),this.input=void 0,this._state=new Ju("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=Vu,this._syncedStop=Vu,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new gh({context:this.context,mute:t.mute,volume:t.volume}),this.volume=this._volume.volume,Ru(this,"volume"),this.onstop=t.onstop}static getDefaults(){return Object.assign(th.getDefaults(),{mute:!1,onstop:Vu,volume:0})}get state(){return this._synced?"started"===this.context.transport.state?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}_clampToCurrentTime(t){return this._synced?t:Math.max(t,this.context.currentTime)}start(t,e,n){let s=Jl(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(s=this._clampToCurrentTime(s),this._synced||"started"!==this._state.getValueAtTime(s))if(this.log("start",s),this._state.setStateAtTime("started",s),this._synced){const t=this._state.get(s);t&&(t.offset=this.toSeconds(vu(e,0)),t.duration=n?this.toSeconds(n):void 0);const i=this.context.transport.schedule((t=>{this._start(t,e,n)}),s);this._scheduled.push(i),"started"===this.context.transport.state&&this.context.transport.getSecondsAtTime(this.immediate())>s&&this._syncedStart(this.now(),this.context.transport.seconds)}else Zl(this.context),this._start(s,e,n);else Xl(xu(s,this._state.get(s).time),"Start time must be strictly greater than previous start time"),this._state.cancel(s),this._state.setStateAtTime("started",s),this.log("restart",s),this.restart(s,e,n);return this}stop(t){let e=Jl(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(e=this._clampToCurrentTime(e),"started"===this._state.getValueAtTime(e)||Kl(this._state.getNextState("started",e))){if(this.log("stop",e),this._synced){const t=this.context.transport.schedule(this._stop.bind(this),e);this._scheduled.push(t)}else this._stop(e);this._state.cancel(e),this._state.setStateAtTime("stopped",e)}return this}restart(t,e,n){return t=this.toSeconds(t),"started"===this._state.getValueAtTime(t)&&(this._state.cancel(t),this._restart(t,e,n)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(t,e)=>{if(e>0){const n=this._state.get(e);if(n&&"started"===n.state&&n.time!==e){const s=e-this.toSeconds(n.time);let i;n.duration&&(i=this.toSeconds(n.duration)-s),this._start(t,this.toSeconds(n.offset)+s,i)}}},this._syncedStop=t=>{const e=this.context.transport.getSecondsAtTime(Math.max(t-this.sampleTime,0));"started"===this._state.getValueAtTime(e)&&this._stop(t)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach((t=>this.context.transport.clear(t))),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=Vu,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Ch extends ih{constructor(){super(gu(Ch.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;const t=gu(Ch.getDefaults(),arguments,["url","onload"]);nh(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Ku({context:this.context,param:this._source.playbackRate,units:"positive",value:t.playbackRate}),this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this._buffer=new Pu(t.url,t.onload,t.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(ih.getDefaults(),{url:new Pu,loop:!1,loopEnd:0,loopStart:0,onload:Vu,onerror:Vu,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t}get curve(){return this._curve}set curve(t){this._curve=t}start(t,e,n,s=1){Xl(this.buffer.loaded,"buffer is either not set or not loaded");const i=this.toSeconds(t);this._startGain(i,s),e=this.loop?vu(e,this.loopStart):vu(e,0);let o=Math.max(this.toSeconds(e),0);if(this.loop){const t=this.toSeconds(this.loopEnd)||this.buffer.duration,e=this.toSeconds(this.loopStart),n=t-e;bu(o,t)&&(o=(o-e)%n+e),Cu(o,this.buffer.duration)&&(o=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,Tu(o,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(i,o)),Kl(n)){let t=this.toSeconds(n);t=Math.max(t,0),this.stop(i+t)}return this}_stopSource(t){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(t)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(t){this._source.loopStart=this.toSeconds(t)}get loopEnd(){return this._source.loopEnd}set loopEnd(t){this._source.loopEnd=this.toSeconds(t)}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._source.loop}set loop(t){this._source.loop=t,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function Sh(t,e){return cu(this,void 0,void 0,(function*(){const n=e/t.context.sampleRate,s=new Fu(1,n,t.context.sampleRate);new t.constructor(Object.assign(t.get(),{frequency:2/n,detune:0,context:s})).toDestination().start(0);return(yield s.render()).getChannelData(0)}))}class Ah extends ih{constructor(){super(gu(Ah.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];const t=gu(Ah.getDefaults(),arguments,["frequency","type"]);nh(this._oscillator,this._gainNode),this.type=t.type,this.frequency=new Ku({context:this.context,param:this._oscillator.frequency,units:"frequency",value:t.frequency}),this.detune=new Ku({context:this.context,param:this._oscillator.detune,units:"cents",value:t.detune}),Ru(this,["frequency","detune"])}static getDefaults(){return Object.assign(ih.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._oscillator.start(e),this}_stopSource(t){this._oscillator.stop(t)}setPeriodicWave(t){return this._oscillator.setPeriodicWave(t),this}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class kh extends Th{constructor(){super(gu(kh.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;const t=gu(kh.getDefaults(),arguments,["frequency","type"]);this.frequency=new rh({context:this.context,units:"frequency",value:t.frequency}),Ru(this,"frequency"),this.detune=new rh({context:this.context,units:"cents",value:t.detune}),Ru(this,"detune"),this._partials=t.partials,this._partialCount=t.partialCount,this._type=t.type,t.partialCount&&"custom"!==t.type&&(this._type=this.baseType+t.partialCount.toString()),this.phase=t.phase}static getDefaults(){return Object.assign(Th.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(t){const e=this.toSeconds(t),n=new Ah({context:this.context,onended:()=>this.onstop(this)});this._oscillator=n,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(e)}_stop(t){const e=this.toSeconds(t);this._oscillator&&this._oscillator.stop(e)}_restart(t){const e=this.toSeconds(t);return this.log("restart",e),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(e),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if("custom"===this._type){return kh._periodicWaveCache.find((t=>{return t.phase===this._phase&&(e=t.partials,n=this._partials,e.length===n.length&&e.every(((t,e)=>n[e]===t)));var e,n}))}{const t=kh._periodicWaveCache.find((t=>t.type===this._type&&t.phase===this._phase));return this._partialCount=t?t.partialCount:this._partialCount,t}}get type(){return this._type}set type(t){this._type=t;const e=-1!==["sine","square","sawtooth","triangle"].indexOf(t);if(0===this._phase&&e)this._wave=void 0,this._partialCount=0,null!==this._oscillator&&(this._oscillator.type=t);else{const e=this._getCachedPeriodicWave();if(Kl(e)){const{partials:t,wave:n}=e;this._wave=n,this._partials=t,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave)}else{const[e,n]=this._getRealImaginary(t,this._phase),s=this.context.createPeriodicWave(e,n);this._wave=s,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave),kh._periodicWaveCache.push({imag:n,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:e,type:this._type,wave:this._wave}),kh._periodicWaveCache.length>100&&kh._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(t){this.partialCount&&"custom"!==this._type&&"custom"!==t?this.type=t+this.partialCount:this.type=t}get partialCount(){return this._partialCount}set partialCount(t){Yl(t,0);let e=this._type;const n=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(n&&(e=n[1]),"custom"!==this._type)this.type=0===t?e:e+t.toString();else{const e=new Float32Array(t);this._partials.forEach(((t,n)=>e[n]=t)),this._partials=Array.from(e),this.type=this._type}}_getRealImaginary(t,e){let n=2048;const s=new Float32Array(n),i=new Float32Array(n);let o=1;if("custom"===t){if(o=this._partials.length+1,this._partialCount=this._partials.length,n=o,0===this._partials.length)return[s,i]}else{const e=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(t);e?(o=parseInt(e[2],10)+1,this._partialCount=parseInt(e[2],10),t=e[1],o=Math.max(o,2),n=o):this._partialCount=0,this._partials=[]}for(let r=1;r<n;++r){const n=2/(r*Math.PI);let a;switch(t){case"sine":a=r<=o?1:0,this._partials[r-1]=a;break;case"square":a=1&r?2*n:0,this._partials[r-1]=a;break;case"sawtooth":a=n*(1&r?1:-1),this._partials[r-1]=a;break;case"triangle":a=1&r?n*n*2*(r-1>>1&1?-1:1):0,this._partials[r-1]=a;break;case"custom":a=this._partials[r-1];break;default:throw new TypeError("Oscillator: invalid type: "+t)}0!==a?(s[r]=-a*Math.sin(e*r),i[r]=a*Math.cos(e*r)):(s[r]=0,i[r]=0)}return[s,i]}_inverseFFT(t,e,n){let s=0;const i=t.length;for(let o=0;o<i;o++)s+=t[o]*Math.cos(o*n)+e[o]*Math.sin(o*n);return s}getInitialValue(){const[t,e]=this._getRealImaginary(this._type,0);let n=0;const s=2*Math.PI;for(let a=0;a<32;a++)n=Math.max(this._inverseFFT(t,e,a/32*s),n);return i=-this._inverseFFT(t,e,this._phase)/n,o=-1,r=1,Math.max(Math.min(i,r),o);var i,o,r}get partials(){return this._partials.slice(0,this.partialCount)}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(t){this._phase=t*Math.PI/180,this.type=this._type}asArray(t=1024){return cu(this,void 0,void 0,(function*(){return Sh(this,t)}))}dispose(){return super.dispose(),null!==this._oscillator&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}kh._periodicWaveCache=[];class Oh extends th{constructor(){super(Object.assign(gu(Oh.getDefaults(),arguments,["context"])))}connect(t,e=0,n=0){return ah(this,t,e,n),this}}class Mh extends Oh{constructor(){super(Object.assign(gu(Mh.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;const t=gu(Mh.getDefaults(),arguments,["mapping","length"]);nu(t.mapping)||t.mapping instanceof Float32Array?this.curve=Float32Array.from(t.mapping):"function"==typeof t.mapping&&this.setMap(t.mapping,t.length)}static getDefaults(){return Object.assign(rh.getDefaults(),{length:1024})}setMap(t,e=1024){const n=new Float32Array(e);for(let s=0,i=e;s<i;s++){const e=s/(i-1)*2-1;n[s]=t(e,s)}return this.curve=n,this}get curve(){return this._shaper.curve}set curve(t){this._shaper.curve=t}get oversample(){return this._shaper.oversample}set oversample(t){Xl(["none","2x","4x"].some((e=>e.includes(t))),"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class Eh extends Oh{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new Mh({context:this.context,mapping:t=>(t+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Dh extends rh{constructor(){super(Object.assign(gu(Dh.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;const t=gu(Dh.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new sh({context:this.context,minValue:t.minValue,maxValue:t.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(rh.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class Ih extends Th{constructor(){super(gu(Ih.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new Eh({context:this.context}),this._modulationNode=new sh({context:this.context});const t=gu(Ih.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new kh({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new kh({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new Dh({context:this.context,units:"positive",value:t.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),Ru(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(kh.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){this._modulator.restart(t),this._carrier.restart(t)}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(t=1024){return cu(this,void 0,void 0,(function*(){return Sh(this,t)}))}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class Rh extends Th{constructor(){super(gu(Rh.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new sh({context:this.context,gain:0});const t=gu(Rh.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new kh({context:this.context,detune:t.detune,frequency:0,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.detune=this._carrier.detune,this.frequency=new rh({context:this.context,units:"frequency",value:t.frequency}),this._modulator=new kh({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new Dh({context:this.context,units:"positive",value:t.harmonicity}),this.modulationIndex=new Dh({context:this.context,units:"positive",value:t.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),Ru(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(kh.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){return this._modulator.restart(t),this._carrier.restart(t),this}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(t=1024){return cu(this,void 0,void 0,(function*(){return Sh(this,t)}))}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class Nh extends Th{constructor(){super(gu(Nh.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new sh({context:this.context,gain:0}),this._thresh=new Mh({context:this.context,mapping:t=>t<=0?-1:1});const t=gu(Nh.getDefaults(),arguments,["frequency","width"]);this.width=new rh({context:this.context,units:"audioRange",value:t.width}),this._triangle=new kh({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),Ru(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Th.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(t){t=this.toSeconds(t),this._triangle.start(t),this._widthGate.gain.setValueAtTime(1,t)}_stop(t){t=this.toSeconds(t),this._triangle.stop(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(0,t)}_restart(t){this._triangle.restart(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(1,t)}get phase(){return this._triangle.phase}set phase(t){this._triangle.phase=t}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(t){this._triangle.type=t}asArray(t=1024){return cu(this,void 0,void 0,(function*(){return Sh(this,t)}))}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class Vh extends Th{constructor(){super(gu(Vh.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];const t=gu(Vh.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new rh({context:this.context,units:"frequency",value:t.frequency}),this.detune=new rh({context:this.context,units:"cents",value:t.detune}),this._spread=t.spread,this._type=t.type,this._phase=t.phase,this._partials=t.partials,this._partialCount=t.partialCount,this.count=t.count,Ru(this,["frequency","detune"])}static getDefaults(){return Object.assign(kh.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(t){t=this.toSeconds(t),this._forEach((e=>e.start(t)))}_stop(t){t=this.toSeconds(t),this._forEach((e=>e.stop(t)))}_restart(t){this._forEach((e=>e.restart(t)))}_forEach(t){for(let e=0;e<this._oscillators.length;e++)t(this._oscillators[e],e)}get type(){return this._type}set type(t){this._type=t,this._forEach((e=>e.type=t))}get spread(){return this._spread}set spread(t){if(this._spread=t,this._oscillators.length>1){const e=-t/2,n=t/(this._oscillators.length-1);this._forEach(((t,s)=>t.detune.value=e+n*s))}}get count(){return this._oscillators.length}set count(t){if(Yl(t,1),this._oscillators.length!==t){this._forEach((t=>t.dispose())),this._oscillators=[];for(let e=0;e<t;e++){const n=new kh({context:this.context,volume:-6-1.1*t,type:this._type,phase:this._phase+e/t*360,partialCount:this._partialCount,onstop:0===e?()=>this.onstop(this):Vu});"custom"===this.type&&(n.partials=this._partials),this.frequency.connect(n.frequency),this.detune.connect(n.detune),n.detune.overridden=!1,n.connect(this.output),this._oscillators[e]=n}this.spread=this._spread,"started"===this.state&&this._forEach((t=>t.start()))}}get phase(){return this._phase}set phase(t){this._phase=t,this._forEach(((t,e)=>t.phase=this._phase+e/this.count*360))}get baseType(){return this._oscillators[0].baseType}set baseType(t){this._forEach((e=>e.baseType=t)),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this._type="custom",this._forEach((e=>e.partials=t)))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(t){this._partialCount=t,this._forEach((e=>e.partialCount=t)),this._type=this._oscillators[0].type}asArray(t=1024){return cu(this,void 0,void 0,(function*(){return Sh(this,t)}))}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach((t=>t.dispose())),this}}class Ph extends Th{constructor(){super(gu(Ph.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Dh({context:this.context,value:2});const t=gu(Ph.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new Nh({context:this.context,frequency:t.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new kh({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),Ru(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Th.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)}_stop(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)}_restart(t){this._modulator.restart(t),this._pulse.restart(t)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(t){this._modulator.phase=t}asArray(t=1024){return cu(this,void 0,void 0,(function*(){return Sh(this,t)}))}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const Fh={am:Ih,fat:Vh,fm:Rh,oscillator:kh,pulse:Nh,pwm:Ph};class qh extends Th{constructor(){super(gu(qh.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";const t=gu(qh.getDefaults(),arguments,["frequency","type"]);this.frequency=new rh({context:this.context,units:"frequency",value:t.frequency}),this.detune=new rh({context:this.context,units:"cents",value:t.detune}),Ru(this,["frequency","detune"]),this.set(t)}static getDefaults(){return Object.assign(kh.getDefaults(),Rh.getDefaults(),Ih.getDefaults(),Vh.getDefaults(),Nh.getDefaults(),Ph.getDefaults())}_start(t){this._oscillator.start(t)}_stop(t){this._oscillator.stop(t)}_restart(t){return this._oscillator.restart(t),this}get type(){let t="";return["am","fm","fat"].some((t=>this._sourceType===t))&&(t=this._sourceType),t+this._oscillator.type}set type(t){"fm"===t.substr(0,2)?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"am"===t.substr(0,2)?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"fat"===t.substr(0,3)?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(3)):"pwm"===t?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):"pulse"===t?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=t)}get partials(){return this._oscillator.partials}set partials(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partials=t)}get partialCount(){return this._oscillator.partialCount}set partialCount(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partialCount=t)}set(t){return Reflect.has(t,"type")&&t.type&&(this.type=t.type),super.set(t),this}_createNewOscillator(t){if(t!==this._sourceType){this._sourceType=t;const e=Fh[t],n=this.now();if(this._oscillator){const t=this._oscillator;t.stop(n),this.context.setTimeout((()=>t.dispose()),this.blockTime)}this._oscillator=new e({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),"started"===this.state&&this._oscillator.start(n)}}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t}get sourceType(){return this._sourceType}set sourceType(t){let e="sine";"pwm"!==this._oscillator.type&&"pulse"!==this._oscillator.type&&(e=this._oscillator.type),"fm"===t?this.type="fm"+e:"am"===t?this.type="am"+e:"fat"===t?this.type="fat"+e:"oscillator"===t?this.type=e:"pulse"===t?this.type="pulse":"pwm"===t&&(this.type="pwm")}_getOscType(t,e){return t instanceof Fh[e]}get baseType(){return this._oscillator.baseType}set baseType(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||"pulse"===t||"pwm"===t||(this._oscillator.baseType=t)}get width(){return this._getOscType(this._oscillator,"pulse")?this._oscillator.width:void 0}get count(){return this._getOscType(this._oscillator,"fat")?this._oscillator.count:void 0}set count(t){this._getOscType(this._oscillator,"fat")&&tu(t)&&(this._oscillator.count=t)}get spread(){return this._getOscType(this._oscillator,"fat")?this._oscillator.spread:void 0}set spread(t){this._getOscType(this._oscillator,"fat")&&tu(t)&&(this._oscillator.spread=t)}get modulationType(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.modulationType:void 0}set modulationType(t){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&su(t)&&(this._oscillator.modulationType=t)}get modulationIndex(){return this._getOscType(this._oscillator,"fm")?this._oscillator.modulationIndex:void 0}get harmonicity(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.harmonicity:void 0}get modulationFrequency(){return this._getOscType(this._oscillator,"pwm")?this._oscillator.modulationFrequency:void 0}asArray(t=1024){return cu(this,void 0,void 0,(function*(){return Sh(this,t)}))}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}function jh(t,e=1/0){const n=new WeakMap;return function(s,i){Reflect.defineProperty(s,i,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(s){Yl(s,t,e),n.set(this,s)}})}}function Wh(t,e=1/0){const n=new WeakMap;return function(s,i){Reflect.defineProperty(s,i,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(s){Yl(this.toSeconds(s),t,e),n.set(this,s)}})}}class Bh extends Th{constructor(){super(gu(Bh.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;const t=gu(Bh.getDefaults(),arguments,["url","onload"]);this._buffer=new Pu({onload:this._onload.bind(this,t.onload),onerror:t.onerror,reverse:t.reverse,url:t.url}),this.autostart=t.autostart,this._loop=t.loop,this._loopStart=t.loopStart,this._loopEnd=t.loopEnd,this._playbackRate=t.playbackRate,this.fadeIn=t.fadeIn,this.fadeOut=t.fadeOut}static getDefaults(){return Object.assign(Th.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:Vu,onerror:Vu,playbackRate:1,reverse:!1})}load(t){return cu(this,void 0,void 0,(function*(){return yield this._buffer.load(t),this._onload(),this}))}_onload(t=Vu){t(),this.autostart&&this.start()}_onSourceEnd(t){this.onstop(this),this._activeSources.delete(t),0!==this._activeSources.size||this._synced||"started"!==this._state.getValueAtTime(this.now())||(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(t,e,n){return super.start(t,e,n),this}_start(t,e,n){e=this._loop?vu(e,this._loopStart):vu(e,0);const s=this.toSeconds(e),i=n;n=vu(n,Math.max(this._buffer.duration-s,0));let o=this.toSeconds(n);o/=this._playbackRate,t=this.toSeconds(t);const r=new Ch({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);this._loop||this._synced||(this._state.cancel(t+o),this._state.setStateAtTime("stopped",t+o,{implicitEnd:!0})),this._activeSources.add(r),this._loop&&Jl(i)?r.start(t,s):r.start(t,s,o-this.toSeconds(this.fadeOut))}_stop(t){const e=this.toSeconds(t);this._activeSources.forEach((t=>t.stop(e)))}restart(t,e,n){return super.restart(t,e,n),this}_restart(t,e,n){this._stop(t),this._start(t,e,n)}seek(t,e){const n=this.toSeconds(e);if("started"===this._state.getValueAtTime(n)){const e=this.toSeconds(t);this._stop(n),this._start(n,e)}return this}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get loopStart(){return this._loopStart}set loopStart(t){this._loopStart=t,this.buffer.loaded&&Yl(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach((e=>{e.loopStart=t}))}get loopEnd(){return this._loopEnd}set loopEnd(t){this._loopEnd=t,this.buffer.loaded&&Yl(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach((e=>{e.loopEnd=t}))}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._loop}set loop(t){if(this._loop!==t&&(this._loop=t,this._activeSources.forEach((e=>{e.loop=t})),t)){const t=this._state.getNextState("stopped",this.now());t&&this._state.cancel(t.time)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t;const e=this.now(),n=this._state.getNextState("stopped",e);n&&n.implicitEnd&&(this._state.cancel(n.time),this._activeSources.forEach((t=>t.cancelStop()))),this._activeSources.forEach((n=>{n.playbackRate.setValueAtTime(t,e)}))}get reverse(){return this._buffer.reverse}set reverse(t){this._buffer.reverse=t}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach((t=>t.dispose())),this._activeSources.clear(),this._buffer.dispose(),this}}au([Wh(0)],Bh.prototype,"fadeIn",void 0),au([Wh(0)],Bh.prototype,"fadeOut",void 0);class Lh extends th{constructor(){super(gu(Lh.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new rh({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const t=gu(Lh.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=t.attack,this.decay=t.decay,this.sustain=t.sustain,this.release=t.release,this.attackCurve=t.attackCurve,this.releaseCurve=t.releaseCurve,this.decayCurve=t.decayCurve}static getDefaults(){return Object.assign(th.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(t,e){if(su(t))return t;{let n;for(n in Uh)if(Uh[n][e]===t)return n;return t}}_setCurve(t,e,n){if(su(n)&&Reflect.has(Uh,n)){const s=Uh[n];eu(s)?"_decayCurve"!==t&&(this[t]=s[e]):this[t]=s}else{if(!nu(n)||"_decayCurve"===t)throw new Error("Envelope: invalid curve: "+n);this[t]=n}}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(t){this._setCurve("_attackCurve","In",t)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(t){this._setCurve("_releaseCurve","Out",t)}get decayCurve(){return this._decayCurve}set decayCurve(t){Xl(["linear","exponential"].some((e=>e===t)),`Invalid envelope curve: ${t}`),this._decayCurve=t}triggerAttack(t,e=1){this.log("triggerAttack",t,e),t=this.toSeconds(t);let n=this.toSeconds(this.attack);const s=this.toSeconds(this.decay),i=this.getValueAtTime(t);if(i>0){n=(1-i)/(1/n)}if(n<this.sampleTime)this._sig.cancelScheduledValues(t),this._sig.setValueAtTime(e,t);else if("linear"===this._attackCurve)this._sig.linearRampTo(e,n,t);else if("exponential"===this._attackCurve)this._sig.targetRampTo(e,n,t);else{this._sig.cancelAndHoldAtTime(t);let s=this._attackCurve;for(let t=1;t<s.length;t++)if(s[t-1]<=i&&i<=s[t]){s=this._attackCurve.slice(t),s[0]=i;break}this._sig.setValueCurveAtTime(s,t,n,e)}if(s&&this.sustain<1){const i=e*this.sustain,o=t+n;this.log("decay",o),"linear"===this._decayCurve?this._sig.linearRampToValueAtTime(i,s+o):this._sig.exponentialApproachValueAtTime(i,o,s)}return this}triggerRelease(t){this.log("triggerRelease",t),t=this.toSeconds(t);const e=this.getValueAtTime(t);if(e>0){const n=this.toSeconds(this.release);n<this.sampleTime?this._sig.setValueAtTime(0,t):"linear"===this._releaseCurve?this._sig.linearRampTo(0,n,t):"exponential"===this._releaseCurve?this._sig.targetRampTo(0,n,t):(Xl(nu(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(t),this._sig.setValueCurveAtTime(this._releaseCurve,t,n,e))}return this}getValueAtTime(t){return this._sig.getValueAtTime(t)}triggerAttackRelease(t,e,n=1){return e=this.toSeconds(e),this.triggerAttack(e,n),this.triggerRelease(e+this.toSeconds(t)),this}cancel(t){return this._sig.cancelScheduledValues(this.toSeconds(t)),this}connect(t,e=0,n=0){return ah(this,t,e,n),this}asArray(t=1024){return cu(this,void 0,void 0,(function*(){const e=t/this.context.sampleRate,n=new Fu(1,e,this.context.sampleRate),s=this.toSeconds(this.attack)+this.toSeconds(this.decay),i=s+this.toSeconds(this.release),o=.1*i,r=i+o,a=new this.constructor(Object.assign(this.get(),{attack:e*this.toSeconds(this.attack)/r,decay:e*this.toSeconds(this.decay)/r,release:e*this.toSeconds(this.release)/r,context:n}));a._sig.toDestination(),a.triggerAttackRelease(e*(s+o)/r,0);return(yield n.render()).getChannelData(0)}))}dispose(){return super.dispose(),this._sig.dispose(),this}}au([Wh(0)],Lh.prototype,"attack",void 0),au([Wh(0)],Lh.prototype,"decay",void 0),au([jh(0,1)],Lh.prototype,"sustain",void 0),au([Wh(0)],Lh.prototype,"release",void 0);const Uh=(()=>{const t=128;let e,n;const s=[];for(e=0;e<t;e++)s[e]=Math.sin(e/127*(Math.PI/2));const i=[];for(e=0;e<127;e++){n=e/127;const t=Math.sin(n*(2*Math.PI)*6.4-Math.PI/2)+1;i[e]=t/10+.83*n}i[127]=1;const o=[];for(e=0;e<t;e++)o[e]=Math.ceil(e/127*5)/5;const r=[];for(e=0;e<t;e++)n=e/127,r[e]=.5*(1-Math.cos(Math.PI*n));const a=[];for(e=0;e<t;e++){n=e/127;const t=4*Math.pow(n,3)+.2,s=Math.cos(t*Math.PI*2*n);a[e]=Math.abs(s*(1-n))}function c(t){const e=new Array(t.length);for(let n=0;n<t.length;n++)e[n]=1-t[n];return e}return{bounce:{In:c(a),Out:a},cosine:{In:s,Out:(l=s,l.slice(0).reverse())},exponential:"exponential",linear:"linear",ripple:{In:i,Out:c(i)},sine:{In:r,Out:c(r)},step:{In:o,Out:c(o)}};var l})();class zh extends th{constructor(){super(gu(zh.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease;const t=gu(zh.getDefaults(),arguments);this._volume=this.output=new gh({context:this.context,volume:t.volume}),this.volume=this._volume.volume,Ru(this,"volume")}static getDefaults(){return Object.assign(th.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0)),this}_syncState(){let t=!1;return this._synced||(this._synced=!0,t=!0),t}_syncMethod(t,e){const n=this["_original_"+t]=this[t];this[t]=(...t)=>{const s=t[e],i=this.context.transport.schedule((s=>{t[e]=s,n.apply(this,t)}),s);this._scheduledEvents.push(i)}}unsync(){return this._scheduledEvents.forEach((t=>this.context.transport.clear(t))),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this}triggerAttackRelease(t,e,n,s){const i=this.toSeconds(n),o=this.toSeconds(e);return this.triggerAttack(t,i,s),this.triggerRelease(i+o),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class $h extends zh{constructor(){super(gu($h.getDefaults(),arguments));const t=gu($h.getDefaults(),arguments);this.portamento=t.portamento,this.onsilence=t.onsilence}static getDefaults(){return Object.assign(zh.getDefaults(),{detune:0,onsilence:Vu,portamento:0})}triggerAttack(t,e,n=1){this.log("triggerAttack",t,e,n);const s=this.toSeconds(e);return this._triggerEnvelopeAttack(s,n),this.setNote(t,s),this}triggerRelease(t){this.log("triggerRelease",t);const e=this.toSeconds(t);return this._triggerEnvelopeRelease(e),this}setNote(t,e){const n=this.toSeconds(e),s=t instanceof Xu?t.toFrequency():t;if(this.portamento>0&&this.getLevelAtTime(n)>.05){const t=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(s,t,n)}else this.frequency.setValueAtTime(s,n);return this}}au([Wh(0)],$h.prototype,"portamento",void 0);class Gh extends Lh{constructor(){super(gu(Gh.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new sh({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class Xh extends $h{constructor(){super(gu(Xh.getDefaults(),arguments)),this.name="Synth";const t=gu(Xh.getDefaults(),arguments);this.oscillator=new qh(Object.assign({context:this.context,detune:t.detune,onstop:()=>this.onsilence(this)},t.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new Gh(Object.assign({context:this.context},t.envelope)),this.oscillator.chain(this.envelope,this.output),Ru(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign($h.getDefaults(),{envelope:Object.assign(yu(Lh.getDefaults(),Object.keys(th.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(yu(qh.getDefaults(),[...Object.keys(Th.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(t,e){if(this.envelope.triggerAttack(t,e),this.oscillator.start(t),0===this.envelope.sustain){const e=this.toSeconds(this.envelope.attack),n=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+e+n)}}_triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class Yh extends Xh{constructor(){super(gu(Yh.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;const t=gu(Yh.getDefaults(),arguments);this.pitchDecay=t.pitchDecay,this.octaves=t.octaves,Ru(this,["oscillator","envelope"])}static getDefaults(){return _u($h.getDefaults(),Xh.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(t,e){const n=this.toSeconds(e),s=this.toFrequency(t instanceof Xu?t.toFrequency():t),i=s*this.octaves;return this.oscillator.frequency.setValueAtTime(i,n),this.oscillator.frequency.exponentialRampToValueAtTime(s,n+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}au([jh(0)],Yh.prototype,"octaves",void 0),au([Wh(0)],Yh.prototype,"pitchDecay",void 0);const Zh=new Set;function Hh(t){Zh.add(t)}function Qh(t,e){const n=`registerProcessor("${t}", ${e})`;Zh.add(n)}Hh('\n\t/**\n\t * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. \n\t */\n\tclass ToneAudioWorkletProcessor extends AudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\t\n\t\t\tsuper(options);\n\t\t\t/**\n\t\t\t * If the processor was disposed or not. Keep alive until it\'s disposed.\n\t\t\t */\n\t\t\tthis.disposed = false;\n\t\t   \t/** \n\t\t\t * The number of samples in the processing block\n\t\t\t */\n\t\t\tthis.blockSize = 128;\n\t\t\t/**\n\t\t\t * the sample rate\n\t\t\t */\n\t\t\tthis.sampleRate = sampleRate;\n\n\t\t\tthis.port.onmessage = (event) => {\n\t\t\t\t// when it receives a dispose \n\t\t\t\tif (event.data === "dispose") {\n\t\t\t\t\tthis.disposed = true;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n');Hh("\n\t/**\n\t * Abstract class for a single input/output processor. \n\t * has a 'generate' function which processes one sample at a time\n\t */\n\tclass SingleIOProcessor extends ToneAudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(Object.assign(options, {\n\t\t\t\tnumberOfInputs: 1,\n\t\t\t\tnumberOfOutputs: 1\n\t\t\t}));\n\t\t\t/**\n\t\t\t * Holds the name of the parameter and a single value of that\n\t\t\t * parameter at the current sample\n\t\t\t * @type { [name: string]: number }\n\t\t\t */\n\t\t\tthis.params = {}\n\t\t}\n\n\t\t/**\n\t\t * Generate an output sample from the input sample and parameters\n\t\t * @abstract\n\t\t * @param input number\n\t\t * @param channel number\n\t\t * @param parameters { [name: string]: number }\n\t\t * @returns number\n\t\t */\n\t\tgenerate(){}\n\n\t\t/**\n\t\t * Update the private params object with the \n\t\t * values of the parameters at the given index\n\t\t * @param parameters { [name: string]: Float32Array },\n\t\t * @param index number\n\t\t */\n\t\tupdateParams(parameters, index) {\n\t\t\tfor (const paramName in parameters) {\n\t\t\t\tconst param = parameters[paramName];\n\t\t\t\tif (param.length > 1) {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][index];\n\t\t\t\t} else {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][0];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Process a single frame of the audio\n\t\t * @param inputs Float32Array[][]\n\t\t * @param outputs Float32Array[][]\n\t\t */\n\t\tprocess(inputs, outputs, parameters) {\n\t\t\tconst input = inputs[0];\n\t\t\tconst output = outputs[0];\n\t\t\t// get the parameter values\n\t\t\tconst channelCount = Math.max(input && input.length || 0, output.length);\n\t\t\tfor (let sample = 0; sample < this.blockSize; sample++) {\n\t\t\t\tthis.updateParams(parameters, sample);\n\t\t\t\tfor (let channel = 0; channel < channelCount; channel++) {\n\t\t\t\t\tconst inputSample = input && input.length ? input[channel][sample] : 0;\n\t\t\t\t\toutput[channel][sample] = this.generate(inputSample, channel, this.params);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn !this.disposed;\n\t\t}\n\t};\n");Hh("\n\t/**\n\t * A multichannel buffer for use within an AudioWorkletProcessor as a delay line\n\t */\n\tclass DelayLine {\n\t\t\n\t\tconstructor(size, channels) {\n\t\t\tthis.buffer = [];\n\t\t\tthis.writeHead = []\n\t\t\tthis.size = size;\n\n\t\t\t// create the empty channels\n\t\t\tfor (let i = 0; i < channels; i++) {\n\t\t\t\tthis.buffer[i] = new Float32Array(this.size);\n\t\t\t\tthis.writeHead[i] = 0;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Push a value onto the end\n\t\t * @param channel number\n\t\t * @param value number\n\t\t */\n\t\tpush(channel, value) {\n\t\t\tthis.writeHead[channel] += 1;\n\t\t\tif (this.writeHead[channel] > this.size) {\n\t\t\t\tthis.writeHead[channel] = 0;\n\t\t\t}\n\t\t\tthis.buffer[channel][this.writeHead[channel]] = value;\n\t\t}\n\n\t\t/**\n\t\t * Get the recorded value of the channel given the delay\n\t\t * @param channel number\n\t\t * @param delay number delay samples\n\t\t */\n\t\tget(channel, delay) {\n\t\t\tlet readHead = this.writeHead[channel] - Math.floor(delay);\n\t\t\tif (readHead < 0) {\n\t\t\t\treadHead += this.size;\n\t\t\t}\n\t\t\treturn this.buffer[channel][readHead];\n\t\t}\n\t}\n");Qh("feedback-comb-filter",'\n\tclass FeedbackCombFilterWorklet extends SingleIOProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(options);\n\t\t\tthis.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);\n\t\t}\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: "delayTime",\n\t\t\t\tdefaultValue: 0.1,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 1,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}, {\n\t\t\t\tname: "feedback",\n\t\t\t\tdefaultValue: 0.5,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 0.9999,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, channel, parameters) {\n\t\t\tconst delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);\n\t\t\tthis.delayLine.push(channel, input + delayedSample * parameters.feedback);\n\t\t\treturn delayedSample;\n\t\t}\n\t}\n');class Jh extends zh{constructor(){super(gu(Jh.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;const t=gu(Jh.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),e={};Object.keys(t.urls).forEach((n=>{const s=parseInt(n,10);if(Xl(iu(n)||tu(s)&&isFinite(s),`url key is neither a note or midi pitch: ${n}`),iu(n)){const s=new Xu(this.context,n).toMidi();e[s]=t.urls[n]}else tu(s)&&isFinite(s)&&(e[s]=t.urls[s])})),this._buffers=new ph({urls:e,onload:t.onload,baseUrl:t.baseUrl,onerror:t.onerror}),this.attack=t.attack,this.release=t.release,this.curve=t.curve,this._buffers.loaded&&Promise.resolve().then(t.onload)}static getDefaults(){return Object.assign(zh.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:Vu,onerror:Vu,release:.1,urls:{}})}_findClosest(t){let e=0;for(;e<96;){if(this._buffers.has(t+e))return-e;if(this._buffers.has(t-e))return e;e++}throw new Error(`No available buffers for note: ${t}`)}triggerAttack(t,e,n=1){return this.log("triggerAttack",t,e,n),Array.isArray(t)||(t=[t]),t.forEach((t=>{const s=zu(new Xu(this.context,t).toFrequency()),i=Math.round(s),o=s-i,r=this._findClosest(i),a=i-r,c=this._buffers.get(a),l=Bu(r+o),u=new Ch({url:c,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:l}).connect(this.output);u.start(e,0,c.duration/l,n),nu(this._activeSources.get(i))||this._activeSources.set(i,[]),this._activeSources.get(i).push(u),u.onended=()=>{if(this._activeSources&&this._activeSources.has(i)){const t=this._activeSources.get(i),e=t.indexOf(u);-1!==e&&t.splice(e,1)}}})),this}triggerRelease(t,e){return this.log("triggerRelease",t,e),Array.isArray(t)||(t=[t]),t.forEach((t=>{const n=new Xu(this.context,t).toMidi();if(this._activeSources.has(n)&&this._activeSources.get(n).length){const t=this._activeSources.get(n);e=this.toSeconds(e),t.forEach((t=>{t.stop(e)})),this._activeSources.set(n,[])}})),this}releaseAll(t){const e=this.toSeconds(t);return this._activeSources.forEach((t=>{for(;t.length;){t.shift().stop(e)}})),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(t,e,n,s=1){const i=this.toSeconds(n);return this.triggerAttack(t,i,s),nu(e)?(Xl(nu(t),"notes must be an array when duration is array"),t.forEach(((t,n)=>{const s=e[Math.min(n,e.length-1)];this.triggerRelease(t,i+this.toSeconds(s))}))):this.triggerRelease(t,i+this.toSeconds(e)),this}add(t,e,n){if(Xl(iu(t)||isFinite(t),`note must be a pitch or midi: ${t}`),iu(t)){const s=new Xu(this.context,t).toMidi();this._buffers.add(s,e,n)}else this._buffers.add(t,e,n);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach((t=>{t.forEach((t=>t.dispose()))})),this._activeSources.clear(),this}}au([Wh(0)],Jh.prototype,"attack",void 0),au([Wh(0)],Jh.prototype,"release",void 0);class Kh extends th{constructor(){super(Object.assign(gu(Kh.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const t=gu(Kh.getDefaults(),arguments,["pan"]);this.pan=new Ku({context:this.context,param:this._panner.pan,value:t.pan,minValue:-1,maxValue:1}),this._panner.channelCount=t.channelCount,this._panner.channelCountMode="explicit",Ru(this,"pan")}static getDefaults(){return Object.assign(th.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}Qh("bit-crusher","\n\tclass BitCrusherWorklet extends SingleIOProcessor {\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: \"bits\",\n\t\t\t\tdefaultValue: 12,\n\t\t\t\tminValue: 1,\n\t\t\t\tmaxValue: 16,\n\t\t\t\tautomationRate: 'k-rate'\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, _channel, parameters) {\n\t\t\tconst step = Math.pow(0.5, parameters.bits - 1);\n\t\t\tconst val = step * Math.floor(input / step + 0.5);\n\t\t\treturn val;\n\t\t}\n\t}\n");class tp extends th{constructor(){super(gu(tp.getDefaults(),arguments,["solo"])),this.name="Solo";const t=gu(tp.getDefaults(),arguments,["solo"]);this.input=this.output=new sh({context:this.context}),tp._allSolos.has(this.context)||tp._allSolos.set(this.context,new Set),tp._allSolos.get(this.context).add(this),this.solo=t.solo}static getDefaults(){return Object.assign(th.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(t){t?this._addSolo():this._removeSolo(),tp._allSolos.get(this.context).forEach((t=>t._updateSolo()))}get muted(){return 0===this.input.gain.value}_addSolo(){tp._soloed.has(this.context)||tp._soloed.set(this.context,new Set),tp._soloed.get(this.context).add(this)}_removeSolo(){tp._soloed.has(this.context)&&tp._soloed.get(this.context).delete(this)}_isSoloed(){return tp._soloed.has(this.context)&&tp._soloed.get(this.context).has(this)}_noSolos(){return!tp._soloed.has(this.context)||tp._soloed.has(this.context)&&0===tp._soloed.get(this.context).size}_updateSolo(){this._isSoloed()||this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),tp._allSolos.get(this.context).delete(this),this._removeSolo(),this}}tp._allSolos=new Map,tp._soloed=new Map;class ep extends th{constructor(){super(gu(ep.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";const t=gu(ep.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new Kh({context:this.context,pan:t.pan,channelCount:t.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new gh({context:this.context,volume:t.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=t.mute,Ru(this,["pan","volume"])}static getDefaults(){return Object.assign(th.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class np extends th{constructor(){super(gu(np.getDefaults(),arguments,["volume","pan"])),this.name="Channel";const t=gu(np.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new tp({solo:t.solo,context:this.context}),this._panVol=this.output=new ep({context:this.context,pan:t.pan,volume:t.volume,mute:t.mute,channelCount:t.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),Ru(this,["pan","volume"])}static getDefaults(){return Object.assign(th.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(t){this._solo.solo=t}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(t){this._panVol.mute=t}_getBus(t){return np.buses.has(t)||np.buses.set(t,new sh({context:this.context})),np.buses.get(t)}send(t,e=0){const n=this._getBus(t),s=new sh({context:this.context,units:"decibels",gain:e});return this.connect(s),s.connect(n),s}receive(t){return this._getBus(t).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}np.buses=new Map;class sp extends th{constructor(){super(...arguments),this.name="Listener",this.positionX=new Ku({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Ku({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Ku({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Ku({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Ku({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Ku({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Ku({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Ku({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Ku({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(th.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}function ip(){return Wu().now()}function op(){return Pu.loaded()}ku((t=>{t.listener=new sp({context:t})})),Mu((t=>{t.listener.dispose()})),Wu().transport,Wu().destination,Wu().destination,Wu().listener,Wu().draw,Wu();export{$n as F,Jh as S,os as a,Ns as b,Kn as c,ai as d,le as i,op as l,ip as n,Qn as o,ue as r,v as t,pe as u,ii as v,Rn as w};
